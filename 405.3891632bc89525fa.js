"use strict";(self.webpackChunktourmkr_download=self.webpackChunktourmkr_download||[]).push([[405],{354:(O,m,s)=>{s.d(m,{o:()=>p});var g=s(8692),a=s(4537);function f(e,h){if(1&e&&(a.O4$(),a.TgZ(0,"svg",1),a._UZ(1,"path",2),a.qZA()),2&e){const l=a.oxw();a.uIk("data-prefix",l.icon.prefix)("data-icon",l.icon.iconName)("viewBox","0 0 "+l.icon.icon[0]+" "+l.icon.icon[1]),a.xp6(1),a.uIk("d",l.icon.icon[4])}}let p=(()=>{class e{constructor(l,u){this.elRef=l,this.platformId=u}iconTransform(){!(0,g.NF)(this.platformId)||this.elRef.nativeElement.style.setProperty("--transform",this.icon&&this.icon.icon&&this.icon.icon[0]!=this.icon.icon[1]&&this.icon.icon[0]/this.icon.icon[1]>.8?"scale("+this.icon.icon[0]/this.icon.icon[1]+")":null)}ngOnInit(){this.iconTransform()}ngOnChanges(l){void 0!==l.icon&&this.iconTransform()}}return e.\u0275fac=function(l){return new(l||e)(a.Y36(a.SBq),a.Y36(a.Lbi))},e.\u0275cmp=a.Xpm({type:e,selectors:[["sh-icon"]],inputs:{icon:"icon"},features:[a.TTD],decls:1,vars:1,consts:[["role","img","aria-hidden","true","focusable","false","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["role","img","aria-hidden","true","focusable","false","xmlns","http://www.w3.org/2000/svg"],["fill","currentColor"]],template:function(l,u){1&l&&a.YNc(0,f,2,4,"svg",0),2&l&&a.Q6J("ngIf",u.icon&&u.icon.icon)},dependencies:[g.O5],styles:["[_nghost-%COMP%]{width:14px;height:14px;display:inline-block;line-height:0;transform:var(--transform)}svg[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:100%;height:100%}"]}),e})()},6031:(O,m,s)=>{s.d(m,{Q:()=>f});var g=s(8692),a=s(4537);let f=(()=>{class p{}return p.\u0275fac=function(h){return new(h||p)},p.\u0275mod=a.oAB({type:p}),p.\u0275inj=a.cJS({imports:[g.ez]}),p})()},4405:(O,m,s)=>{s.r(m),s.d(m,{OtherCarouselModule:()=>U});var g=s(8692),a=s(9638),f=s(6031),p=s(4507),e=s(4537),h=s(8041),l=s(9911),u=s(5864);const y=JSON.parse('{"widget":"OtherCarouselComponent","show":true,"options":[{"key":"show","label":"Hide on start","type":"responsive","category":"appearance","value":{"desktop":false,"tablet":false,"mobile":true}},{"key":"auto-hide","label":"Auto hide","type":"toggle","category":"appearance","value":false},{"key":"size","label":"Size","type":"slider","category":"appearance","help":"%","min":10,"max":100,"value":60},{"key":"width","label":"Width","type":"slider","category":"appearance","help":"px","min":0,"max":600,"value":150},{"key":"fit","label":"Fit","type":"toggle","category":"appearance","value":true},{"key":"vertical","label":"Vertical","type":"toggle","category":"appearance","value":false},{"key":"area","label":"Area","areas":["left","right","top","bottom"],"type":"area","category":"appearance","value":"bottom"},{"key":"margin","label":"Margin","type":"slider","help":"px","category":"appearance","value":0},{"key":"border","label":"Border","type":"slider","min":0,"max":30,"category":"appearance","value":5},{"key":"border-radius","label":"Border radius","type":"border-radius","category":"appearance","help":"px","value":{"topLeft":0,"topRight":0,"bottomLeft":0,"bottomRight":0}},{"key":"menu","label":"Menu elements","type":"liste","category":"content","recursive":true,"icons":true,"links":true,"all_panos":true,"font":{"family":"Exo","align":"left","size":14,"line_height":21,"italic":false,"bold":false,"underline":false,"color":""},"value":[]},{"key":"item-border-radius","label":"Item border radius","type":"border-radius","category":"appearance","help":"px","value":{"topLeft":6,"topRight":6,"bottomLeft":6,"bottomRight":6}},{"key":"title-position","label":"Title position","areas":["top","bottom"],"type":"area","category":"content","value":"bottom"},{"key":"title-wide","label":"Title wide","type":"toggle","category":"content","value":false},{"key":"active-border","label":"Active border","type":"toggle","category":"content","value":true},{"key":"arrows","label":"Arrows","type":"toggle","category":"content","value":true},{"key":"colors","type":"color-bundle","category":"colors","value":{"common_color":false,"background":{"type":"native","color":"rgba(10,10,10,0.5)"},"active_color":{"type":"native","color":"rgba(250,179,0,0.8)"},"text_color":{"color":"rgb(255,255,255)"}}},{"key":"title-background","label":"Title background","type":"color","category":"colors","value":{"type":"native","color":"rgba(0,0,0,0.5)"}},{"key":"title-color","label":"Title color","type":"color","category":"colors","value":{"color":"rgb(255,255,255)"}},{"key":"title-active-color","label":"Title active color","type":"color","category":"colors","value":{"color":"rgb(255,255,255)"}},{"key":"styles","label":"Styles","type":"css","category":"styles","value":""}]}');var b=s(2001),T=s(5056),P=s(354),M=s(6101);function k(o,r){if(1&o&&(e.O4$(),e.kcU(),e._UZ(0,"img",7)),2&o){const t=e.oxw(2);e.Q6J("src",t.item.img,e.LSH)("alt",t.i18n.t(t.item.name))}}function I(o,r){if(1&o&&e._UZ(0,"sh-icon",10),2&o){const t=e.oxw(3);e.Q6J("icon",t.icon)}}function B(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",8),e.NdJ("click",function(i){e.CHM(t);const c=e.oxw(2);return e.KtG(c.openDropdown(c.item,i))}),e._uU(1),e.YNc(2,I,1,1,"sh-icon",9),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.i18n.t(t.item.name)," "),e.xp6(1),e.Q6J("ngIf",null==t.item.children?null:t.item.children.length)}}function E(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",1),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.goToPano(i.item))}),e.TgZ(1,"div",2),e.O4$(),e._UZ(2,"svg",3),e.YNc(3,k,1,2,"img",4),e.qZA(),e.kcU(),e.TgZ(4,"div",5),e.YNc(5,B,3,2,"div",6),e.qZA()()}if(2&o){const t=e.oxw();e.ekj("active","pano"==t.item.type&&t.item.pano.id==t.active),e.xp6(1),e.ekj("transparent","text"==t.item.type),e.xp6(2),e.Q6J("ngIf",t.item.img),e.xp6(2),e.Q6J("ngIf",t.i18n.t(t.item.name))}}let F=(()=>{class o{constructor(t){this.i18n=t,this.onItemClick=new e.vpe,this.onItemDropdownClick=new e.vpe}goToPano(t){"pano"==t.type&&this.onItemClick.emit(t)}openDropdown(t,n){t.children&&this.onItemDropdownClick.emit({item:t,event:n})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(M.T))},o.\u0275cmp=e.Xpm({type:o,selectors:[["wdg-other-carousel-item"]],inputs:{item:"item",active:"active",icon:"icon"},outputs:{onItemClick:"onItemClick",onItemDropdownClick:"onItemDropdownClick"},decls:1,vars:1,consts:[["class","item","mat-button","",3,"active","click",4,"ngIf"],["mat-button","",1,"item",3,"click"],[1,"img"],["viewBox","0 0 300 200",1,"placeholder"],["loading","lazy",3,"src","alt",4,"ngIf"],[1,"name-wrapper"],["class","name",3,"click",4,"ngIf"],["loading","lazy",3,"src","alt"],[1,"name",3,"click"],["class","right",3,"icon",4,"ngIf"],[1,"right",3,"icon"]],template:function(t,n){1&t&&e.YNc(0,E,6,6,"button",0),2&t&&e.Q6J("ngIf","pano"==n.item.type||"text"==n.item.type)},dependencies:[g.O5,a.lW,P.o],styles:[".item[_ngcontent-%COMP%]{position:relative;flex-shrink:0;line-height:0;padding:0;min-width:0;border-radius:calc(var(--item-border-radius-top-left) + 2px) calc(var(--item-border-radius-top-right) + 2px) calc(var(--item-border-radius-bottom-right) + 2px) calc(var(--item-border-radius-bottom-left) + 2px);overflow:hidden}.item[_ngcontent-%COMP%] >span{border-radius:var(--item-border-radius-top-left) var(--item-border-radius-top-right) var(--item-border-radius-bottom-right) var(--item-border-radius-bottom-left)}.item[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{overflow:hidden;border-radius:inherit;line-height:0;background-color:#000;position:relative}.item[_ngcontent-%COMP%]   .img.transparent[_ngcontent-%COMP%]{background-color:transparent}.item[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:inherit;transition:transform .3s ease}.item[_ngcontent-%COMP%]:hover   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-webkit-transform:translate(-50%,-50%) scale(1.1)}.item[_ngcontent-%COMP%]   .name-wrapper[_ngcontent-%COMP%]{position:absolute;top:0;left:0;border-radius:inherit;clip-path:content-box;overflow:hidden;color:var(--menu-style-color);height:100%;width:100%}.item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{position:absolute;z-index:2;width:100%;left:0;background:var(--title-background);color:var(--title-color);display:flex;justify-content:center;align-items:center;font-style:var(--menu-style-font-style);font-weight:var(--menu-style-font-weight);-webkit-text-decoration:var(--menu-style-text-decoration);text-decoration:var(--menu-style-text-decoration);font-size:var(--menu-style-font-size);font-family:var(--menu-style-font-family);text-align:var(--menu-style-text-align);line-height:var(--menu-style-line-height)}.item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   sh-icon[_ngcontent-%COMP%]{position:absolute;top:50%;right:2px;transform:translateY(-50%)}.item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   sh-icon.right[_ngcontent-%COMP%]  svg{transform:rotate(90deg)}.item.active[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{background:var(--active-color);color:var(--title-active-color)}"]}),o})();function S(o,r){if(1&o&&e._UZ(0,"wdg-other-carousel-list",5),2&o){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("active",n.activePano)("links",t.children)}}function R(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"li",2)(1,"button",3),e.NdJ("click",function(){const c=e.CHM(t).$implicit,v=e.oxw();return e.KtG(v.open(c))}),e._uU(2),e.qZA(),e.YNc(3,S,1,2,"wdg-other-carousel-list",4),e.qZA()}if(2&o){const t=r.$implicit,n=e.oxw();e.xp6(1),e.ekj("active","pano"==t.type&&t.pano.id==n.activePano),e.xp6(1),e.Oqu(n.i18n.t(t.name)),e.xp6(1),e.Q6J("ngIf",(null==t.children?null:t.children.length)>0)}}let Z=(()=>{class o{constructor(t,n){this.viewerService=t,this.i18n=n}open(t){"pano"==t.type?this.viewerService.goToPano(t.pano.id,t):t.href&&window.open(this.linkHref(t.href),t.href_self&&!this.viewerService.editor?"_self":"_blank")}linkHref(t){return"string"==typeof t?t:this.i18n.t(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.a),e.Y36(M.T))},o.\u0275cmp=e.Xpm({type:o,selectors:[["wdg-other-carousel-list"]],inputs:{links:"links",activePano:["active","activePano"]},decls:2,vars:1,consts:[[1,"list"],["class","item",4,"ngFor","ngForOf"],[1,"item"],["mat-button","",3,"click"],[3,"active","links",4,"ngIf"],[3,"active","links"]],template:function(t,n){1&t&&(e.TgZ(0,"ul",0),e.YNc(1,R,4,4,"li",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.links))},dependencies:[g.sg,g.O5,a.lW,o],styles:[".list[_ngcontent-%COMP%]{display:flex;padding:0;flex-direction:column;list-style:none;color:var(--text-color);margin:5px 0}.list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0;padding:0 16px;width:100%;font-style:var(--menu-style-font-style);font-weight:var(--menu-style-font-weight);-webkit-text-decoration:var(--menu-style-text-decoration);text-decoration:var(--menu-style-text-decoration);font-size:var(--menu-style-font-size);font-family:var(--menu-style-font-family);color:var(--menu-style-color);text-align:var(--menu-style-text-align);line-height:var(--menu-style-line-height)}.list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]  span{font-family:inherit;display:block;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--active-color);color:var(--title-active-color)}.list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]  .items{padding-left:10px}"]}),o})(),H=(()=>{class o{constructor(t){this.elRef=t,this.onActiveChange=new e.vpe,this.visible=!1}onClick(t){!this.elRef.nativeElement.contains(t.target)&&this.visible&&(this.object.item=null,this.object.element=null)}ngOnInit(){setTimeout(()=>this.visible=!0)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq))},o.\u0275cmp=e.Xpm({type:o,selectors:[["wdg-other-carousel-dropdown"]],hostBindings:function(t,n){1&t&&e.NdJ("mousedown",function(c){return n.onClick(c)},!1,e.evT)},inputs:{object:"object",area:"area",activePano:["active","activePano"]},outputs:{onActiveChange:"onActiveChange"},decls:2,vars:5,consts:[[1,"dropdown","scrollbar",3,"ngClass"],[3,"active","links"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"wdg-other-carousel-list",1),e.qZA()),2&t&&(e.ekj("visible",n.visible),e.Q6J("ngClass",n.area),e.xp6(1),e.Q6J("active",n.activePano)("links",n.object.item.children))},dependencies:[g.mk,Z],styles:[".dropdown[_ngcontent-%COMP%]{position:absolute;z-index:9;opacity:0;background:var(--background);top:var(--dropdown-top);right:var(--dropdown-right);bottom:var(--dropdown-bottom);left:var(--dropdown-left);width:var(--dropdown-width);max-height:var(--dropdown-maxHeight);box-shadow:0 2px 2px #00000024,0 3px 1px -2px #0000001f,0 1px 5px #0003}.dropdown.top[_ngcontent-%COMP%]{transform:translate(0) translateY(-50px)}.dropdown.bottom[_ngcontent-%COMP%]{transform:translate(0) translateY(50px)}.dropdown.left[_ngcontent-%COMP%]{transform:translate(-50px) translateY(0)}.dropdown.right[_ngcontent-%COMP%]{transform:translate(50px) translateY(0)}.dropdown.visible[_ngcontent-%COMP%]{transition:opacity .3s ease,transform .3s ease;transform:translate(0) translateY(0);opacity:1}"]}),o})();var D=s(7239);const J=["sliderWrapper"],A=["slider"];function L(o,r){if(1&o&&(e._UZ(0,"code",3),e.ALo(1,"safe")),2&o){const t=e.oxw();e.Q6J("innerHTML",e.xi3(1,1,t.styles,"html"),e.oJD)}}function z(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"wdg-other-carousel-item",14),e.NdJ("onItemClick",function(i){e.CHM(t);const c=e.oxw(2);return e.KtG(c.goToPano(i.pano.id,i))})("onItemDropdownClick",function(i){e.CHM(t);const c=e.oxw(2);return e.KtG(c.openDropdown(i.item,i.event))}),e.qZA()}if(2&o){const t=r.$implicit,n=e.oxw(2);e.Q6J("item",t)("active",n.activePano.id)("icon",n.icons[0])}}function N(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",15)(1,"button",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.prevPano())}),e._UZ(2,"sh-icon",17),e.qZA(),e.TgZ(3,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.nextPano())}),e._UZ(4,"sh-icon",19),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("icon",t.icons[0]),e.xp6(2),e.Q6J("icon",t.icons[0])}}function Y(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5,6)(3,"div",7,8),e.YNc(5,z,1,3,"wdg-other-carousel-item",9),e.qZA(),e.YNc(6,N,5,2,"div",10),e.qZA(),e.TgZ(7,"div",11),e.NdJ("mouseenter",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleFromWrapper())}),e.TgZ(8,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggle())}),e._UZ(9,"sh-icon",13),e.qZA()()()}if(2&o){const t=e.oxw();e.Udp("transition",t.noTransition?"initial":null),e.ekj("fit",t.options.fit.value)("vertical",t.options.vertical.value)("hide",!t.widget.show),e.Q6J("ngClass",t.options.area.value),e.xp6(3),e.ekj("safari",t.isSafari)("bordered",t.options.active_border.value)("title-wide",t.options.title_wide.value)("title-position-bottom","bottom"==t.options.title_position.value),e.xp6(2),e.Q6J("ngForOf",t.options.menu.value),e.xp6(1),e.Q6J("ngIf",t.options.arrows.value),e.xp6(3),e.Q6J("icon",t.icons[0])}}function W(o,r){if(1&o&&e._UZ(0,"wdg-other-carousel-dropdown",20),2&o){const t=e.oxw();e.Q6J("object",t.dropdown)("area",t.options.area.value)("active",t.activePano.id)}}let Q=(()=>{class o extends h.P{constructor(t,n,i){super(t),this.viewerService=n,this.viewerDataService=i,this.default_options=y,this.noTransition=!1,this.isSafari=!1,this.icons=[{prefix:"far",iconName:"chevron-up",icon:[448,512,[],"f077","M6.101 359.293L25.9 379.092c4.686 4.686 12.284 4.686 16.971 0L224\n        198.393l181.13 180.698c4.686 4.686 12.284 4.686 16.971\n        0l19.799-19.799c4.686-4.686 4.686-12.284 0-16.971L232.485\n        132.908c-4.686-4.686-12.284-4.686-16.971 0L6.101 342.322c-4.687\n        4.687-4.687 12.285 0 16.971z"]}],this.dropdown={item:null,element:null}}get activePano(){return this.viewerService.active}goToPano(t,n){this.scrollBooster.getState().isDragging||(this.viewerService.goToPano(t,n),setTimeout(()=>this.scrollToActive()))}getParentByTag(t,n){if(t.tagName==n)return t;let i=t.parentElement;for(;i&&i.tagName!=n;)i=i.parentElement;return i}openDropdown(t,n){this.dropdown.item=t,this.dropdown.element=this.getParentByTag(n.target,"BUTTON")}addObservableFunc(){this.observableFunc.size=t=>{this.onSizeChange(t)},this.observableFunc.width=t=>{this.onWidthChange(t)},this.observableFunc.area=t=>{this.onAreaChange(t)},this.observableFunc.margin=t=>this.onMarginChange(t),this.observableFunc.border=t=>this.onBorderChange(t),this.observableFunc.border_radius=t=>{this.onBorderRadiusChange(t)},this.observableFunc.item_border_radius=t=>this.onItemBorderRadiusChange(t),this.observableFunc.menu=t=>this.onMenuChange(t),this.observableFunc.menu_font=t=>this.onMenuFontChange(t),this.observableFunc.vertical=t=>this.onVerticalChange(t),this.observableFunc.fit=t=>this.onFitChange(t),this.observableFunc.title_background=t=>this.onTitleBackgroundChange(t),this.observableFunc.title_color=t=>this.onTitleColorChange(t),this.observableFunc.title_active_color=t=>this.onTitleActiveColorChange(t)}onSizeChange(t){this.elRef.nativeElement.style.setProperty("--size",t+"%"),this.scrollBooster&&setTimeout(()=>this.scrollBooster.updateMetrics())}onWidthChange(t){this.elRef.nativeElement.style.setProperty("--width",t+"px"),this.scrollBooster&&setTimeout(()=>this.scrollBooster.updateMetrics())}onVerticalChange(t){this.scrollBooster&&(this.scrollBooster.updateOptions({direction:t?"vertical":"horizontal"}),setTimeout(()=>this.scrollBooster.updateMetrics()))}onFitChange(t){this.scrollBooster&&setTimeout(()=>this.scrollBooster.updateMetrics())}onAreaChange(t){this.noTransition=!0,setTimeout(()=>this.noTransition=!1)}onMarginChange(t){this.elRef.nativeElement.style.setProperty("--margin",t+"px"),this.scrollBooster&&setTimeout(()=>this.scrollBooster.updateMetrics())}onBorderChange(t){this.elRef.nativeElement.style.setProperty("--padding",t+"px")}onBorderRadiusChange(t){this.elRef.nativeElement.style.setProperty("--border-radius-top-left",t?t.topLeft+"px":null),this.elRef.nativeElement.style.setProperty("--border-radius-top-right",t?t.topRight+"px":null),this.elRef.nativeElement.style.setProperty("--border-radius-bottom-left",t?t.bottomLeft+"px":null),this.elRef.nativeElement.style.setProperty("--border-radius-bottom-right",t?t.bottomRight+"px":null)}onItemBorderRadiusChange(t){this.elRef.nativeElement.style.setProperty("--item-border-radius-top-left",t?t.topLeft+"px":null),this.elRef.nativeElement.style.setProperty("--item-border-radius-top-right",t?t.topRight+"px":null),this.elRef.nativeElement.style.setProperty("--item-border-radius-bottom-left",t?t.bottomLeft+"px":null),this.elRef.nativeElement.style.setProperty("--item-border-radius-bottom-right",t?t.bottomRight+"px":null)}onMenuChange(t){this.initPanoImgs()}onMenuFontChange(t){this.setFontStyle(t,"--menu-style-")}onTitleBackgroundChange(t){this.elRef.nativeElement.style.setProperty("--title-background",l.v.backgroundStyle(t))}onTitleColorChange(t){this.elRef.nativeElement.style.setProperty("--title-color",t.color)}onTitleActiveColorChange(t){this.elRef.nativeElement.style.setProperty("--title-active-color",t.color)}scrollToActive(){let t=Array.from(this.slider.nativeElement.children).filter(n=>n.classList.contains("active")).pop();if(t)if(this.options.vertical.value){let n=this.slider.nativeElement.offsetHeight-this.sliderWrapper.nativeElement.offsetHeight,i=t.offsetTop+t.offsetHeight/2-this.sliderWrapper.nativeElement.offsetHeight/2;i<0?i=0:i>n&&(i=n),this.scrollBooster.scrollTo({x:0,y:i})}else{let n=this.slider.nativeElement.offsetWidth-this.sliderWrapper.nativeElement.offsetWidth,i=t.offsetLeft+t.offsetWidth/2-this.sliderWrapper.nativeElement.offsetWidth/2;i<0?i=0:i>n&&(i=n),this.scrollBooster.scrollTo({x:i,y:0})}}scrollTo(t){let n=0;return null!=t.min?(t.min*=-1,n=-1*(t.pos+t.size),n<t.min&&(n=t.min)):null!=t.max&&(t.max*=-1,n=-1*(t.pos-t.size),n>t.max&&(n=t.max)),n}prevPano(){this.scrollBooster.scrollTo(this.options.vertical.value?{x:0,y:this.scrollTo({min:this.scrollBooster.edgeY.to,size:this.scrollBooster.viewport.height,pos:this.scrollBooster.position.y})}:{x:this.scrollTo({min:this.scrollBooster.edgeX.to,size:this.scrollBooster.viewport.width,pos:this.scrollBooster.position.x}),y:0})}nextPano(){this.scrollBooster.scrollTo(this.options.vertical.value?{x:0,y:this.scrollTo({max:this.scrollBooster.edgeY.from,size:this.scrollBooster.viewport.height,pos:this.scrollBooster.position.y})}:{x:this.scrollTo({max:this.scrollBooster.edgeX.from,size:this.scrollBooster.viewport.width,pos:this.scrollBooster.position.x}),y:0})}mouseLeaveHide(){this.options.auto_hide.value&&(this.toggleInterval=setTimeout(()=>this.toggle(),3e3))}toggleFromWrapper(){this.options.auto_hide.value&&!this.widget.show&&(this.widget.show=!0)}onEnter(){clearTimeout(this.toggleInterval)}onLeave(){this.mouseLeaveHide()}updateDropdownPosition(t){let n=t.getBoundingClientRect(),i=this.viewerDataService.viewer.nativeElement.getBoundingClientRect(),c=n.top-i.top,v=n.left-i.left,G=i.width-(v+n.width),x=i.height-(c+n.height),w=n.width,C=n.height,d={width:w,maxHeight:null,top:null,left:null,bottom:null,right:null};"bottom"==this.options.area.value?(d.maxHeight=`calc(100% - ${x+C}px)`,d.bottom=x+C,d.left=v):"top"==this.options.area.value?(d.maxHeight=`calc(100% - ${c+C}px)`,d.top=c+C,d.left=v):"left"==this.options.area.value?(d.maxHeight=`calc(100% - ${c}px)`,d.top=c,d.left=v+w):"right"==this.options.area.value&&(d.maxHeight=`calc(100% - ${c}px)`,d.top=c,d.right=G+w),Object.entries(d).forEach(_=>{_[1]&&this.elRef.nativeElement.style.setProperty(`--dropdown-${_[0]}`,"number"==typeof _[1]?_[1]+"px":_[1])})}initSlider(){l.v.waitUntil(()=>this.sliderWrapper.nativeElement&&this.sliderWrapper.nativeElement.offsetWidth).then(()=>{this.scrollBooster=new u.Z({viewport:this.sliderWrapper.nativeElement,content:this.slider.nativeElement,scrollMode:"transform",direction:this.options.vertical.value?"vertical":"horizontal",emulateScroll:!0,onWheel:()=>{this.scrollBooster.isTargetScroll=!1},onPointerDown:()=>{this.scrollBooster.isTargetScroll=!1},onUpdate:()=>{this.dropdown.element&&this.updateDropdownPosition(this.dropdown.element)}})})}initPanoImgs(){(0,g.NF)(this.panoService.platformId)&&this.options.menu.value.map(t=>{"pano"==t.type&&!t.img&&(this.panoService.getPanoById(t.pano.id)?t.img=this.panoService.panoImg(t.pano.id,t.theta):l.v.waitUntil(()=>null!=this.viewerService.viewerService).then(()=>{this.viewerService.viewerService.loadPano(t.pano.id).then(()=>{t.img=this.panoService.panoImg(t.pano.id,t.theta)})}))})}initData(){this.addObservableFunc(),super.initData(),this.viewerService.editor&&(this.options.menu.value=this.options.menu.value.filter(t=>t.pano&&this.panoService.getPanoById(t.pano.id))),this.initPanoImgs(),this.mouseLeaveHide(),(0,g.NF)(this.panoService.platformId)&&(this.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this.viewerService.viewerWidthObs.subscribe(()=>{this.scrollBooster&&setTimeout(()=>this.scrollBooster.updateMetrics())})),this.widget.show=!0,this.options.show.value[this.viewerService.overlayDeviceClass]&&(this.widget.show=!1)}ngAfterViewInit(){(0,g.NF)(this.panoService.platformId)&&l.v.waitUntil(()=>this.otherService.getWidget(this.default_options.widget)).then(()=>this.initSlider())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.zs3),e.Y36(b.a),e.Y36(T.m))},o.\u0275cmp=e.Xpm({type:o,selectors:[["wdg-other-carousel"]],viewQuery:function(t,n){if(1&t&&(e.Gf(J,5,e.SBq),e.Gf(A,5,e.SBq)),2&t){let i;e.iGM(i=e.CRH())&&(n.sliderWrapper=i.first),e.iGM(i=e.CRH())&&(n.slider=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onEnter()})("mouseleave",function(){return n.onLeave()})},features:[e.qOj],decls:3,vars:3,consts:[[3,"innerHTML",4,"ngIf"],["class","widget other",3,"ngClass","fit","vertical","hide","transition",4,"ngIf"],[3,"object","area","active",4,"ngIf"],[3,"innerHTML"],[1,"widget","other",3,"ngClass"],[1,"slider-wrapper"],["sliderWrapper",""],[1,"slider"],["slider",""],[3,"item","active","icon","onItemClick","onItemDropdownClick",4,"ngFor","ngForOf"],["class","arrow-buttons",4,"ngIf"],[1,"toggle-wrapper",3,"mouseenter"],["mat-button","","aria-label","toggle carousel",1,"toggle",3,"click"],[1,"left",3,"icon"],[3,"item","active","icon","onItemClick","onItemDropdownClick"],[1,"arrow-buttons"],["mat-button","","aria-label","previous",1,"prev",3,"click"],[1,"up",3,"icon"],["mat-button","","aria-label","next",1,"next",3,"click"],[1,"down",3,"icon"],[3,"object","area","active"]],template:function(t,n){1&t&&(e.YNc(0,L,2,4,"code",0),e.YNc(1,Y,10,20,"div",1),e.YNc(2,W,1,3,"wdg-other-carousel-dropdown",2)),2&t&&(e.Q6J("ngIf",n.styles),e.xp6(1),e.Q6J("ngIf",n.widgetInit&&n.widget),e.xp6(1),e.Q6J("ngIf",n.dropdown.item))},dependencies:[g.mk,g.sg,g.O5,a.lW,P.o,F,H,D.y],styles:["[_nghost-%COMP%]{--active-boder: 4px;--menu-style-line-height: 1.5em}.widget[_ngcontent-%COMP%]{position:absolute;z-index:2;background:var(--background);color:var(--text-color);margin:var(--margin);border-radius:var(--border-radius-top-left) var(--border-radius-top-right) var(--border-radius-bottom-right) var(--border-radius-bottom-left);transition:transform .3s ease}.widget[_ngcontent-%COMP%]   .slider-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:inherit;overflow:hidden}.widget[_ngcontent-%COMP%]   .slider-wrapper[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{display:flex;padding:var(--padding);box-sizing:border-box}.widget[_ngcontent-%COMP%]   .slider-wrapper[_ngcontent-%COMP%]   .slider.safari[_ngcontent-%COMP%]     .item .img{clip-path:content-box}.widget[_ngcontent-%COMP%]   .slider-wrapper[_ngcontent-%COMP%]   .slider.bordered[_ngcontent-%COMP%]     .item{padding:var(--active-boder)}.widget[_ngcontent-%COMP%]   .slider-wrapper[_ngcontent-%COMP%]   .slider.bordered[_ngcontent-%COMP%]     .item .name-wrapper{top:var(--active-boder);left:var(--active-boder);width:calc(100% - var(--active-boder) * 2);height:calc(100% - var(--active-boder) * 2)}.widget[_ngcontent-%COMP%]   .slider-wrapper[_ngcontent-%COMP%]   .slider.bordered[_ngcontent-%COMP%]     .item.active{background:var(--active-color)}.widget[_ngcontent-%COMP%]   .slider-wrapper[_ngcontent-%COMP%]   .slider.title-position-bottom[_ngcontent-%COMP%]     .item .name{bottom:0}.widget[_ngcontent-%COMP%]   .slider-wrapper[_ngcontent-%COMP%]   .slider.title-wide[_ngcontent-%COMP%]     .item .name{width:100%;height:100%}.widget[_ngcontent-%COMP%]   .arrow-buttons[_ngcontent-%COMP%]{border-radius:inherit}.widget[_ngcontent-%COMP%]   .arrow-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0;position:absolute;z-index:2}.widget[_ngcontent-%COMP%]   .arrow-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   sh-icon[_ngcontent-%COMP%]{width:40px;height:40px}.widget[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]{position:absolute}.widget[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]   button.toggle[_ngcontent-%COMP%]{background:var(--background);padding:0;min-width:0;width:25px;height:50px;border-radius:0 25px 25px 0;display:flex;justify-content:center;align-items:center}.widget[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]   button.toggle[_ngcontent-%COMP%]   sh-icon[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:10px}.widget.hide[_ngcontent-%COMP%]   button.toggle[_ngcontent-%COMP%]   sh-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}.widget[_ngcontent-%COMP%]:not(.vertical){width:var(--size);max-height:calc(100% - 25px)}.widget[_ngcontent-%COMP%]:not(.vertical).fit{width:calc(100% - var(--margin) * 2)}.widget[_ngcontent-%COMP%]:not(.vertical)   .slider[_ngcontent-%COMP%]{flex-direction:row;height:var(--width);max-height:100%;width:-moz-fit-content;width:fit-content}.widget[_ngcontent-%COMP%]:not(.vertical)   .slider[_ngcontent-%COMP%]   wdg-other-carousel-item[_ngcontent-%COMP%]{height:100%}.widget[_ngcontent-%COMP%]:not(.vertical)   .slider[_ngcontent-%COMP%]   wdg-other-carousel-item[_ngcontent-%COMP%]     .item{height:100%}.widget[_ngcontent-%COMP%]:not(.vertical)   .slider[_ngcontent-%COMP%]   wdg-other-carousel-item[_ngcontent-%COMP%]     .item span.mat-button-wrapper{height:100%;display:block}.widget[_ngcontent-%COMP%]:not(.vertical)   .slider[_ngcontent-%COMP%]   wdg-other-carousel-item[_ngcontent-%COMP%]     .item .img{height:100%}.widget[_ngcontent-%COMP%]:not(.vertical)   .slider[_ngcontent-%COMP%]   wdg-other-carousel-item[_ngcontent-%COMP%]     .item .img img, .widget[_ngcontent-%COMP%]:not(.vertical)   .slider[_ngcontent-%COMP%]   wdg-other-carousel-item[_ngcontent-%COMP%]     .item .img svg{width:auto;height:100%}.widget[_ngcontent-%COMP%]:not(.vertical)   .slider[_ngcontent-%COMP%]   wdg-other-carousel-item[_ngcontent-%COMP%]:not(:last-child){margin-right:var(--padding)}.widget[_ngcontent-%COMP%]:not(.vertical)   .arrow-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:100%;width:64px;top:0}.widget[_ngcontent-%COMP%]:not(.vertical)   .arrow-buttons[_ngcontent-%COMP%]   button.prev[_ngcontent-%COMP%]{border-top-left-radius:inherit;border-bottom-left-radius:inherit;left:0}.widget[_ngcontent-%COMP%]:not(.vertical)   .arrow-buttons[_ngcontent-%COMP%]   button.next[_ngcontent-%COMP%]{border-top-right-radius:inherit;border-bottom-right-radius:inherit;right:0}.widget[_ngcontent-%COMP%]:not(.vertical)   .arrow-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   sh-icon[_ngcontent-%COMP%]{transform:rotate(-90deg)}.widget.vertical[_ngcontent-%COMP%]{height:var(--size);max-width:calc(100% - 25px)}.widget.vertical.fit[_ngcontent-%COMP%]{height:calc(100% - var(--margin) * 2)}.widget.vertical[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{flex-direction:column;width:var(--width);min-width:var(--width);max-width:100%;height:-moz-fit-content;height:fit-content}.widget.vertical[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   wdg-other-carousel-item[_ngcontent-%COMP%]{width:100%}.widget.vertical[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   wdg-other-carousel-item[_ngcontent-%COMP%]     .item{width:100%}.widget.vertical[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   wdg-other-carousel-item[_ngcontent-%COMP%]     .item span.mat-button-wrapper{width:100%;display:block}.widget.vertical[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   wdg-other-carousel-item[_ngcontent-%COMP%]     .item .img img, .widget.vertical[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   wdg-other-carousel-item[_ngcontent-%COMP%]     .item .img svg{width:100%;height:auto}.widget.vertical[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   wdg-other-carousel-item[_ngcontent-%COMP%]:not(:last-child){margin-bottom:var(--padding)}.widget.vertical[_ngcontent-%COMP%]   .arrow-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:64px;left:0}.widget.vertical[_ngcontent-%COMP%]   .arrow-buttons[_ngcontent-%COMP%]   button.prev[_ngcontent-%COMP%]{border-top-right-radius:inherit;border-top-left-radius:inherit;top:0}.widget.vertical[_ngcontent-%COMP%]   .arrow-buttons[_ngcontent-%COMP%]   button.next[_ngcontent-%COMP%]{border-bottom-right-radius:inherit;border-bottom-left-radius:inherit;bottom:0}.widget.left[_ngcontent-%COMP%], .widget.right[_ngcontent-%COMP%]{top:50%;transform:translateY(-50%);margin-top:0;margin-bottom:0}.widget.left[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%], .widget.right[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]{top:50%;padding:50px 0}.widget.bottom[_ngcontent-%COMP%], .widget.top[_ngcontent-%COMP%]{left:50%;transform:translate(-50%);margin-left:0;margin-right:0}.widget.bottom[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%], .widget.top[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]{left:50%;padding:0 50px}.widget.left[_ngcontent-%COMP%]{left:0}.widget.left.hide[_ngcontent-%COMP%]{transform:translate(calc(-100% - var(--margin)),-50%)}.widget.left[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]{right:0;transform:translate(100%,-50%)}.widget.left[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]   button.toggle[_ngcontent-%COMP%]{transform:rotate(0)}.widget.right[_ngcontent-%COMP%]{right:0}.widget.right.hide[_ngcontent-%COMP%]{transform:translate(calc(100% + var(--margin)),-50%)}.widget.right[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]{left:0;transform:translate(-100%,-50%)}.widget.right[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]   button.toggle[_ngcontent-%COMP%]{transform:rotate(180deg)}.widget.top[_ngcontent-%COMP%]{top:0}.widget.top.hide[_ngcontent-%COMP%]{transform:translate(-50%,calc(-100% - var(--margin)))}.widget.top[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]{bottom:0;transform:translate(-50%,75%)}.widget.top[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]   button.toggle[_ngcontent-%COMP%]{transform:rotate(90deg)}.widget.bottom[_ngcontent-%COMP%]{top:calc(100% - var(--width) - var(--margin) * 2)}.widget.bottom.vertical[_ngcontent-%COMP%]{top:calc(100% - var(--size) - var(--margin) * 2)}.widget.bottom.vertical.fit[_ngcontent-%COMP%]{top:0}.widget.bottom.hide[_ngcontent-%COMP%]{transform:translate(-50%,calc(100% + var(--margin)))}.widget.bottom[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]{top:0;transform:translate(-50%,-75%)}.widget.bottom[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]   button.toggle[_ngcontent-%COMP%]{transform:rotate(270deg)}.widget[_ngcontent-%COMP%]   sh-icon.up[_ngcontent-%COMP%]  svg{transform:rotate(0)}.widget[_ngcontent-%COMP%]   sh-icon.right[_ngcontent-%COMP%]  svg{transform:rotate(90deg)}.widget[_ngcontent-%COMP%]   sh-icon.down[_ngcontent-%COMP%]  svg{transform:rotate(180deg)}.widget[_ngcontent-%COMP%]   sh-icon.left[_ngcontent-%COMP%]  svg{transform:rotate(270deg)}code[_ngcontent-%COMP%]{display:none}"]}),o})(),U=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o,bootstrap:[Q]}),o.\u0275inj=e.cJS({imports:[g.ez,a.ot,f.Q,p.D]}),o})()}}]);