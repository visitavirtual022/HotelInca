"use strict";(self.webpackChunktourmkr_download=self.webpackChunktourmkr_download||[]).push([[764],{5764:(B,u,s)=>{s.r(u),s.d(u,{SchemeLuubModule:()=>E});var l=s(8692),_=s(2288),m=s(9638),h=s(4507),d=s(6031),f=s(384),v=s(5573);const b=JSON.parse('{"widget":"SchemeLuubComponent","image":"","area":"right","areas":["left","right"],"label_area":"left","label_areas":["left","right","top","bottom"],"hide_on_start":{"desktop":true,"tablet":true,"mobile":true},"show_on_load":true,"styles":"","common_color":false,"background":{"type":"native","color":"rgba(0,0,0,.6)"},"active_color":{"type":"native","color":"rgb(103,58,183)"},"text_color":{"color":"rgb(255,255,255)"},"dot_background":{"type":"native","color":"rgb(92,107,117)"},"border_radius":{"topLeft":0,"topRight":0,"bottomLeft":0,"bottomRight":0},"multiple_map":false,"recursive_map":true,"margin":20,"border_size":0,"map_size":500,"dot_size":16,"special_dot_size":36,"active_dot_size":16,"active_dot_text":{"en":""},"toggle_text":{"en":""},"polyline_size":4,"polyline_bg_size":16,"polyline_color":{"color":"rgb(255,255,255)"},"polyline_bg_color":{"color":"rgba(0,75,136,.3)"},"dots":[],"uniq_dots":true,"icons_enable":true,"labels_fit":false,"dot_icon":{"prefix":"fas","iconName":"circle","icon":[512,512,[],"f111","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"]},"special_dot_icon":{"prefix":"fas","iconName":"map-marker","icon":[384,512,[],"f041","M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0z"]},"active_dot_icon":{"prefix":"","iconName":""},"toggle_text_font":{"family":"Exo","align":"left","size":14,"line_height":21,"italic":false,"bold":false,"underline":false,"color":""},"dots_font":{"family":"Exo","align":"left","size":16,"line_height":24,"italic":false,"bold":false,"underline":false,"color":""}}');var e=s(4537),g=s(354),x=s(4827),C=s(2001),M=s(6101),P=s(6369);const O=["dragZoom"];function w(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.close())}),e._UZ(1,"sh-icon",5),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("icon",t.icons[0])}}function k(i,c){if(1&i&&(e.O4$(),e.TgZ(0,"g",16),e._UZ(1,"line",17)(2,"line",18),e.qZA()),2&i){const t=c.$implicit,n=c.index;e.oxw();const o=e.MAs(12),a=e.oxw();e.xp6(1),e.uIk("x1",t.x1*o.params.width)("y1",t.y1*o.params.height)("x2",t.x2*o.params.width)("y2",t.y2*o.params.height),e.xp6(1),e.ekj("active",a.activeList.includes(a.lines.length-n)),e.uIk("x1",t.x1*o.params.width)("y1",t.y1*o.params.height)("x2",t.x2*o.params.width)("y2",t.y2*o.params.height)}}function y(i,c){if(1&i&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.Udp("left",t.pos.x,"%")("top",t.pos.y,"%"),e.uIk("data-id",t.pano.id),e.xp6(1),e.Oqu(n.i18n.t(t.name)?n.i18n.t(t.name):n.i18n.t(n.scheme.active_dot_text))}}function S(i,c){if(1&i){const t=e.EpF();e.O4$(),e.kcU(),e.ynx(0),e.TgZ(1,"span",19),e.NdJ("cdkDragStarted",function(o){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.onDragStart(o,r.pos))})("cdkDragMoved",function(o){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.onDrag(o,r.pos))})("click",function(){const a=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.goToPano(a))}),e._UZ(2,"sh-icon",5),e.qZA(),e.YNc(3,y,2,6,"span",20),e.BQk()}if(2&i){const t=c.$implicit,n=e.oxw(2);e.xp6(1),e.Udp("left",t.pos.x,"%")("top",t.pos.y,"%"),e.ekj("active",n.activePano.id==t.pano.id)("special",t.special),e.Q6J("cdkDragDisabled",!n.editorMode),e.uIk("data-id",t.pano.id),e.xp6(1),e.Q6J("icon",n.activePano.id==t.pano.id&&n.scheme.active_dot_icon&&n.scheme.active_dot_icon.icon?n.scheme.active_dot_icon:t.icon?t.icon:t.special?n.scheme.special_dot_icon:n.scheme.dot_icon),e.xp6(1),e.Q6J("ngIf",n.i18n.t(t.name)||n.i18n.t(n.scheme.active_dot_text)&&n.activePano.id==t.pano.id)}}function L(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",1,2)(2,"div",3)(3,"button",4),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(1),a=e.oxw();return e.KtG(a.fullscreen(o))}),e._UZ(4,"sh-icon",5),e.qZA(),e.YNc(5,w,2,1,"button",6),e.qZA(),e.TgZ(6,"div",7)(7,"button",8),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(12);return e.KtG(o.zoomIn())}),e._UZ(8,"sh-icon",5),e.qZA(),e.TgZ(9,"button",9),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(12);return e.KtG(o.zoomOut())}),e._UZ(10,"sh-icon",5),e.qZA()(),e.TgZ(11,"sh-drag-zoom",10,11),e.NdJ("afterInit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onPanosChange())})("onZoom",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onZoom())}),e.O4$(),e.TgZ(13,"svg",12),e.YNc(14,k,3,10,"g",13),e.qZA(),e.YNc(15,S,4,12,"ng-container",14),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("icon",t.fullscreenMode?t.icons[2]:t.icons[1]),e.xp6(1),e.Q6J("ngIf",!t.fullscreenMode),e.xp6(3),e.Q6J("icon",t.icons[3]),e.xp6(2),e.Q6J("icon",t.icons[4]),e.xp6(1),e.Q6J("imgSrc",t.map.image)("zoom",1),e.xp6(3),e.Q6J("ngForOf",t.lines),e.xp6(1),e.Q6J("ngForOf",t.dots)}}let z=(()=>{class i{constructor(t,n,o,a){this.schemeService=t,this.viewerService=n,this.i18n=o,this.platformId=a,this.onPanoClick=new e.vpe,this.icons=[{prefix:"fal",iconName:"times",icon:[320,512,[],"f00d","M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"]},{prefix:"fal",iconName:"expand-alt",icon:[448,512,[],"f424","M198.829 275.515l5.656 5.656c4.686 4.686 4.686 12.284 0 16.971L54.627 448H116c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12H12c-6.627 0-12-5.373-12-12V364c0-6.627 5.373-12 12-12h8c6.627 0 12 5.373 12 12v61.373l149.858-149.858c4.687-4.687 12.285-4.687 16.971 0zM436 32H332c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h61.373L243.515 213.858c-4.686 4.686-4.686 12.284 0 16.971l5.656 5.656c4.686 4.686 12.284 4.686 16.971 0L416 86.627V148c0 6.627 5.373 12 12 12h8c6.627 0 12-5.373 12-12V44c0-6.627-5.373-12-12-12z"]},{prefix:"fal",iconName:"compress-alt",icon:[448,512,[],"f422","M9.171 476.485l-5.656-5.656c-4.686-4.686-4.686-12.284 0-16.971L169.373 288H108c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h100c8.837 0 16 7.163 16 16v100c0 6.627-5.373 12-12 12h-8c-6.627 0-12-5.373-12-12v-61.373L26.142 476.485c-4.687 4.687-12.285 4.687-16.971 0zM240 256h100c6.627 0 12-5.373 12-12v-8c0-6.627-5.373-12-12-12h-61.373L444.485 58.142c4.686-4.686 4.686-12.284 0-16.971l-5.656-5.656c-4.686-4.686-12.284-4.686-16.971 0L256 201.373V140c0-6.627-5.373-12-12-12h-8c-6.627 0-12 5.373-12 12v100c0 8.837 7.163 16 16 16z"]},{prefix:"fal",iconName:"plus",icon:[384,512,[],"f067","M376 232H216V72c0-4.42-3.58-8-8-8h-32c-4.42 0-8 3.58-8 8v160H8c-4.42 0-8 3.58-8 8v32c0 4.42 3.58 8 8 8h160v160c0 4.42 3.58 8 8 8h32c4.42 0 8-3.58 8-8V280h160c4.42 0 8-3.58 8-8v-32c0-4.42-3.58-8-8-8z"]},{prefix:"fal",iconName:"minus",icon:[384,512,[],"f068","M376 232H8c-4.42 0-8 3.58-8 8v32c0 4.42 3.58 8 8 8h368c4.42 0 8-3.58 8-8v-32c0-4.42-3.58-8-8-8z"]}],this.fullscreenMode=!1,this.lines=[],this.dots=[],this._markerDrag=!1,this._markerDragStartingPos={x:0,y:0},this.activeList=[]}get scheme(){return this.schemeService.scheme}get activePano(){return this.viewerService.active}get editorMode(){return this.viewerService.editor}fullscreen(t){this.viewerService.toggleFullScreenFor(t)}onFullScreenChange(){this.fullscreenMode=this.viewerService.checkFullscreen()}close(){this.schemeService.show=!1}onZoom(){}_recursivePushDots(t){!t||t.forEach(n=>{this.dots.push(n),n.children?.length&&this._recursivePushDots(n.children)})}_recursivePushLines(t){t.forEach((n,o)=>{if(n.children&&n.children.length){let r=n.children[0];this.lines.push({x1:n.pos.x/100,y1:n.pos.y/100,x2:r.pos.x/100,y2:r.pos.y/100}),this._recursivePushLines(n.children)}if(!t[o+1])return;let a=t[o+1];this.lines.push({x1:n.pos.x/100,y1:n.pos.y/100,x2:a.pos.x/100,y2:a.pos.y/100})})}updateDots(){this.dots=[],this._recursivePushDots(this.map.dots)}updateLines(){this.lines=[],this.map?.dots&&(this._recursivePushLines(this.map.dots),this.lines=this.lines.reverse())}onDragStart(t,n){this._markerDrag=!0,this.dragZoom.disableDragging=!0,this._markerDragStartingPos={x:this.dragZoom.params.width*n.x/100,y:this.dragZoom.params.height*n.y/100}}onDrag(t,n){this.dragZoom.disableDragging=!0,t.source.reset(),n.x=parseFloat((100*(this._markerDragStartingPos.x+t.distance.x)/this.dragZoom.params.width).toFixed(2)),n.y=parseFloat((100*(this._markerDragStartingPos.y+t.distance.y)/this.dragZoom.params.height).toFixed(2)),this.updateLines()}scrollToMarker(t){this.dragZoom.setPosition(t)}activeListUpdate(t,n){let o;if(!t)return o;for(let a=t.length-1;a>=0;a--)t[a].pano.id==n&&(o=t[a]),!o&&t[a].children?.length&&(o=this.activeListUpdate(t[a].children,n)),o&&this.activeList.push(this.dots.findIndex(r=>r.pano&&r.pano.id==t[a].pano.id));return o}goToPano(t){this._markerDrag?this._markerDrag=!1:this.onPanoClick.emit(t)}onPanosChange(){this.updateDots(),this.updateLines(),this.onActivePanoChange()}onActivePanoChange(){this.activeList=[];let t=this.activeListUpdate(this.map.dots,this.viewerService.active.id);t&&this.scrollToMarker(t.pos)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.p),e.Y36(C.a),e.Y36(M.T),e.Y36(e.Lbi))},i.\u0275cmp=e.Xpm({type:i,selectors:[["wdg-scheme-luub-map"]],viewQuery:function(t,n){if(1&t&&e.Gf(O,5),2&t){let o;e.iGM(o=e.CRH())&&(n.dragZoom=o.first)}},hostBindings:function(t,n){1&t&&e.NdJ("fullscreenchange",function(){return n.onFullScreenChange()},!1,e.evT)},inputs:{map:"map"},outputs:{onPanoClick:"onPanoClick"},decls:1,vars:1,consts:[["class","map-wrapper",4,"ngIf"],[1,"map-wrapper"],["viewport",""],[1,"action-buttons"],["mat-button","","aria-label","fullscreen",3,"click"],[3,"icon"],["mat-button","","aria-label","close",3,"click",4,"ngIf"],[1,"action-buttons","zoom-buttons"],["mat-button","","aria-label","zoom-out",3,"click"],["mat-button","","aria-label","zoom-in",3,"click"],[1,"map",3,"imgSrc","zoom","afterInit","onZoom"],["dragZoom",""],[1,"lines"],["class","line",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["mat-button","","aria-label","close",3,"click"],[1,"line"],[1,"line__wrapper"],["stroke-linecap","round",1,"line__fill"],["cdkDrag","","cdkDragBoundary",".map",1,"marker",3,"cdkDragDisabled","cdkDragStarted","cdkDragMoved","click"],["class","title",3,"left","top",4,"ngIf"],[1,"title"]],template:function(t,n){1&t&&e.YNc(0,L,16,8,"div",0),2&t&&e.Q6J("ngIf",n.map)},dependencies:[l.sg,l.O5,_.Zt,m.lW,P.H,g.o],styles:["[_nghost-%COMP%]{display:contents;--zoom: 1}.map-wrapper[_ngcontent-%COMP%]{flex:1;overflow:hidden;position:relative;cursor:grab}.map-wrapper[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex;gap:10px;z-index:1;margin:var(--margin)}.map-wrapper[_ngcontent-%COMP%]   .action-buttons.zoom-buttons[_ngcontent-%COMP%]{left:0;right:initial;flex-direction:column}.map-wrapper[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:var(--background);width:50px;height:40px}.map[_ngcontent-%COMP%]   svg.lines[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.map[_ngcontent-%COMP%]   svg.lines[_ngcontent-%COMP%]   .line__wrapper[_ngcontent-%COMP%]{stroke:var(--polyline-bg-color);stroke-width:var(--polyline-bg-size)}.map[_ngcontent-%COMP%]   svg.lines[_ngcontent-%COMP%]   .line__fill[_ngcontent-%COMP%]{stroke:var(--polyline-color);stroke-width:var(--polyline-size)}.map[_ngcontent-%COMP%]   svg.lines[_ngcontent-%COMP%]   .line__fill.active[_ngcontent-%COMP%]{stroke:var(--active-color)}.map[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:absolute;top:-2px;left:50%;background:var(--background);color:var(--text-color);padding:2px 6px;border-radius:2px;transform:translate(-50%,calc(-100% - var(--dot-size) / 2 - 2px));white-space:nowrap;z-index:1}.map[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-50%);line-height:0;background:transparent;width:var(--dot-size);height:var(--dot-size);color:var(--dot-background)}.map[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]  .mat-button-wrapper{padding:0;width:100%;height:100%;line-height:0;display:flex;align-items:center;justify-content:center;pointer-events:none}.map[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]   sh-icon[_ngcontent-%COMP%]{width:100%;height:100%;max-width:100%;max-height:100%}.map[_ngcontent-%COMP%]   .marker.special[_ngcontent-%COMP%]{width:var(--special-dot-size);min-width:var(--special-dot-size);height:var(--special-dot-size);min-height:var(--special-dot-size)}.map[_ngcontent-%COMP%]   .marker.special[_ngcontent-%COMP%] + .title[_ngcontent-%COMP%]{transform:translate(-50%,calc(-100% - var(--special-dot-size) / 2 - 2px))}.map[_ngcontent-%COMP%]   .marker.active[_ngcontent-%COMP%]{color:var(--active-color)}.map[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:100%;max-height:100%}.map[_ngcontent-%COMP%]   .marker.active[_ngcontent-%COMP%], .map[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]:hover{transition:transform .2s ease;transform:translate(-50%,-50%) scale(1.1)}.map[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]:hover{cursor:pointer}.map.has-active-icon[_ngcontent-%COMP%]   .marker.active[_ngcontent-%COMP%]{width:var(--active-dot-size);min-width:var(--active-dot-size);height:var(--active-dot-size);min-height:var(--active-dot-size)}.map.has-active-icon[_ngcontent-%COMP%]   .marker.active[_ngcontent-%COMP%] + .title[_ngcontent-%COMP%]{transform:translate(-50%,calc(-100% - var(--active-dot-size) / 2 - 2px))}"]}),i})();var T=s(7239);const Z=["mapbox"];function J(i,c){if(1&i&&(e._UZ(0,"code",2),e.ALo(1,"safe")),2&i){const t=e.oxw();e.Q6J("innerHTML",e.xi3(1,1,t.styles,"html"),e.oJD)}}function N(i,c){if(1&i&&(e.TgZ(0,"span",11),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.i18n.t(t.scheme.toggle_text))}}function I(i,c){1&i&&e.GkF(0)}function D(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"wdg-scheme-luub-map",12,13),e.NdJ("onPanoClick",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.goToPano(o))}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("map",t.scheme)}}function F(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){const a=e.CHM(t).index,r=e.oxw(3);return e.KtG(r.activate(a))}),e._uU(1),e.qZA()}if(2&i){const t=c.$implicit,n=c.index,o=e.oxw(3);e.ekj("active",o.schemeService.multipleMapIndex==n),e.xp6(1),e.hij(" ",o.i18n.t(t.title)," ")}}function A(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"wdg-scheme-luub-map",12,13),e.NdJ("onPanoClick",function(o){e.CHM(t);const a=e.oxw(4);return e.KtG(a.goToPano(o))}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("map",t)}}function H(i,c){if(1&i&&(e.ynx(0),e.YNc(1,A,2,1,"wdg-scheme-luub-map",18),e.BQk()),2&i){const t=c.index,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.schemeService.multipleMapIndex==t)}}function Q(i,c){if(1&i&&(e.TgZ(0,"div",14),e.YNc(1,F,2,3,"button",15),e.qZA(),e.YNc(2,H,2,1,"ng-container",16)),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.scheme.multiple_map_data),e.xp6(1),e.Q6J("ngForOf",t.scheme.multiple_map_data)}}const G=function(i,c){return[i,c]};function Y(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"button",4),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.open())}),e._UZ(2,"sh-icon",5),e.YNc(3,N,2,1,"span",6),e.qZA(),e.TgZ(4,"div",7),e.YNc(5,I,1,0,"ng-container",8),e.YNc(6,D,2,1,"ng-template",null,9,e.W1O),e.YNc(8,Q,3,2,"ng-template",null,10,e.W1O),e.qZA()()}if(2&i){const t=e.MAs(7),n=e.MAs(9),o=e.oxw();e.ekj("hide",!o.show)("editor-mode",o.editorMode),e.Q6J("ngClass",e.WLB(10,G,o.scheme.area,"label_"+o.scheme.label_area)),e.xp6(2),e.Q6J("icon",o.icons[0]),e.xp6(1),e.Q6J("ngIf",o.i18n.t(o.scheme.toggle_text)),e.xp6(2),e.Q6J("ngIf",null==o.scheme.multiple_map_data)("ngIfThen",t)("ngIfElse",n)}}let U=(()=>{class i extends v.G{constructor(){super(...arguments),this.default_options=b,this.icons=[{prefix:"fas",iconName:"map",icon:[576,512,[],"f279","M0 117.66v346.32c0 11.32 11.43 19.06 21.94 14.86L160 416V32L20.12 87.95A32.006 32.006 0 0 0 0 117.66zM192 416l192 64V96L192 32v384zM554.06 33.16L416 96v384l139.88-55.95A31.996 31.996 0 0 0 576 394.34V48.02c0-11.32-11.43-19.06-21.94-14.86z"]}]}clickout(t){!this.elRef.nativeElement.contains(t.target)&&this.viewerService.viewerDataService.overlay.nativeElement.contains(t.target)&&"map"!=t.target?.getAttribute("aria-label")&&this.schemeService.show&&(this.schemeService.show=!1)}open(){this.schemeService.show=!0}onMapSizeChange(t){super.onMapSizeChange(t),this.mapbox?.dragZoom.updateParams()}onMarginChange(t){super.onMarginChange(t),this.mapbox?.dragZoom.updateParams()}onBorderSizeChange(t){super.onBorderSizeChange(t),this.mapbox?.dragZoom.updateParams()}onActivePanoChange(t){super.onActivePanoChange(t),this.mapbox?.onActivePanoChange()}onPanosChange(t){super.onPanosChange(t),this.mapbox?.onPanosChange()}activate(t){this.schemeService.multipleMapIndex=t}goToPano(t){if(!t.pano||this.activePano.id==t.pano.id)return;this.viewerService.goToPano(t.pano.id,{theta:t.theta,phi:t.phi}),this.mapbox.fullscreenMode?(this.viewerService.closeFullscreen(),setTimeout(()=>{this.schemeService.show=!1},100)):this.schemeService.show=!1;let n=this.statsService.getWidget(this.scheme.widget||"");this.statsService.send({plugin:n.name,type:n.key,details:t.pano.id})}}return i.\u0275fac=function(){let c;return function(n){return(c||(c=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["wdg-scheme-luub"]],viewQuery:function(t,n){if(1&t&&e.Gf(Z,5),2&t){let o;e.iGM(o=e.CRH())&&(n.mapbox=o.first)}},hostBindings:function(t,n){1&t&&e.NdJ("click",function(a){return n.clickout(a)},!1,e.evT)},features:[e.qOj],decls:2,vars:2,consts:[[3,"innerHTML",4,"ngIf"],["class","widget scheme scheme-luub",3,"ngClass","hide","editor-mode",4,"ngIf"],[3,"innerHTML"],[1,"widget","scheme","scheme-luub",3,"ngClass"],["mat-button","",1,"open",3,"click"],[3,"icon"],["class","text",4,"ngIf"],[1,"wrapper"],[4,"ngIf","ngIfThen","ngIfElse"],["singleMap",""],["multiMap",""],[1,"text"],[3,"map","onPanoClick"],["mapbox",""],[1,"labels"],["mat-button","",3,"active","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["mat-button","",3,"click"],[3,"map","onPanoClick",4,"ngIf"]],template:function(t,n){1&t&&(e.YNc(0,J,2,4,"code",0),e.YNc(1,Y,10,13,"div",1)),2&t&&(e.Q6J("ngIf",n.styles),e.xp6(1),e.Q6J("ngIf",n.widgetInit&&n.scheme&&n.visible))},dependencies:[l.mk,l.sg,l.O5,m.lW,g.o,z,T.y],styles:["[_nghost-%COMP%]{--dots-style-font-size: 16px;--dots-style-line-height: 24px}.scheme-luub[_ngcontent-%COMP%]{position:absolute;z-index:10;display:inline-block;opacity:1;box-shadow:0 5px 10px #0003;-webkit-user-select:none;user-select:none;background:var(--background);color:var(--text-color);margin:var(--margin);padding:var(--padding);border-radius:var(--border-radius-top-left) var(--border-radius-top-right) var(--border-radius-bottom-right) var(--border-radius-bottom-left);box-sizing:border-box;height:100%;width:var(--size);max-height:calc(100% - var(--margin) * 2);max-width:calc(100% - var(--margin) * 2);transition:transform .2s ease-in}.scheme-luub[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;overflow:hidden;border-radius:inherit}.scheme-luub[_ngcontent-%COMP%]   button.open[_ngcontent-%COMP%]{position:absolute;top:0;background:var(--background);padding:2px 18px;border-radius:inherit;visibility:hidden;opacity:0}.scheme-luub[_ngcontent-%COMP%]   button.open[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-left:6px}.scheme-luub.hide[_ngcontent-%COMP%]{transition:transform .2s ease-out}.scheme-luub.hide[_ngcontent-%COMP%]   button.open[_ngcontent-%COMP%]{transition:opacity .3s ease;visibility:visible;opacity:1}.scheme-luub.left[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.scheme-luub.left[_ngcontent-%COMP%]   button.open[_ngcontent-%COMP%]{left:100%;border-top-left-radius:0;border-bottom-left-radius:0}.scheme-luub.left.hide[_ngcontent-%COMP%]{transform:translate(calc(-100% - var(--margin)))}.scheme-luub.right[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.scheme-luub.right[_ngcontent-%COMP%]   button.open[_ngcontent-%COMP%]{right:100%;border-top-right-radius:0;border-bottom-right-radius:0}.scheme-luub.right.hide[_ngcontent-%COMP%]{transform:translate(calc(100% + var(--margin)))}.scheme-luub[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]{display:flex}.scheme-luub[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:var(--labels-fit);border-radius:0;padding:0 20px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.scheme-luub[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0000001a}.scheme-luub[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--active-color)}.scheme-luub.label_left[_ngcontent-%COMP%]{flex-direction:row}.scheme-luub.label_left[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]{flex-direction:column}.scheme-luub.label_right[_ngcontent-%COMP%]{flex-direction:row}.scheme-luub.label_right[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]{flex-direction:column;height:100%;order:2}.scheme-luub.label_top[_ngcontent-%COMP%]{flex-direction:column}.scheme-luub.label_top[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]{flex-direction:row}.scheme-luub.label_bottom[_ngcontent-%COMP%]{flex-direction:column}.scheme-luub.label_bottom[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]{flex-direction:row;order:2}.scheme-luub.editor-mode[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]{cursor:move}button.open[_ngcontent-%COMP%]   span.text[_ngcontent-%COMP%]{font-style:var(--toggle-text-style-font-style);font-weight:var(--toggle-text-style-font-weight);-webkit-text-decoration:var(--toggle-text-style-text-decoration);text-decoration:var(--toggle-text-style-text-decoration);font-size:var(--toggle-text-style-font-size);font-family:var(--toggle-text-style-font-family);color:var(--toggle-text-style-color);text-align:var(--toggle-text-style-text-align);line-height:var(--toggle-text-style-line-height)}wdg-scheme-luub-map[_ngcontent-%COMP%]     .map .title{font-style:var(--dots-style--font-style);font-weight:var(--dots-style-font-weight);-webkit-text-decoration:var(--dots-style-text-decoration);text-decoration:var(--dots-style-text-decoration);font-size:var(--dots-style-font-size);font-family:var(--dots-style-font-family);color:var(--dots-style-color);text-align:var(--dots-style-text-align);line-height:var(--dots-style-line-height)}code[_ngcontent-%COMP%]{display:none}"]}),i})(),E=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i,bootstrap:[U]}),i.\u0275inj=e.cJS({imports:[l.ez,_._t,m.ot,f.a,d.Q,h.D]}),i})()}}]);