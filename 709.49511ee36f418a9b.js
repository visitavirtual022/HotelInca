(self.webpackChunktourmkr_download=self.webpackChunktourmkr_download||[]).push([[709],{3845:function(V){V.exports=function(U){var s={};function y(M){if(s[M])return s[M].exports;var u=s[M]={i:M,l:!1,exports:{}};return U[M].call(u.exports,u,u.exports,y),u.l=!0,u.exports}return y.m=U,y.c=s,y.d=function(M,u,l){y.o(M,u)||Object.defineProperty(M,u,{enumerable:!0,get:l})},y.r=function(M){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})},y.t=function(M,u){if(1&u&&(M=y(M)),8&u||4&u&&"object"==typeof M&&M&&M.__esModule)return M;var l=Object.create(null);if(y.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:M}),2&u&&"string"!=typeof M)for(var c in M)y.d(l,c,function(i){return M[i]}.bind(null,c));return l},y.n=function(M){var u=M&&M.__esModule?function(){return M.default}:function(){return M};return y.d(u,"a",u),u},y.o=function(M,u){return Object.prototype.hasOwnProperty.call(M,u)},y.p="",y(y.s=90)}({17:function(U,s,y){"use strict";s.__esModule=!0,s.default=void 0;var M=y(18),u=function(){function l(){}return l.getFirstMatch=function(c,i){var a=i.match(c);return a&&a.length>0&&a[1]||""},l.getSecondMatch=function(c,i){var a=i.match(c);return a&&a.length>1&&a[2]||""},l.matchAndReturnConst=function(c,i,a){if(c.test(i))return a},l.getWindowsVersionName=function(c){switch(c){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},l.getMacOSVersionName=function(c){var i=c.split(".").splice(0,2).map(function(a){return parseInt(a,10)||0});if(i.push(0),10===i[0])switch(i[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},l.getAndroidVersionName=function(c){var i=c.split(".").splice(0,2).map(function(a){return parseInt(a,10)||0});if(i.push(0),!(1===i[0]&&i[1]<5))return 1===i[0]&&i[1]<6?"Cupcake":1===i[0]&&i[1]>=6?"Donut":2===i[0]&&i[1]<2?"Eclair":2===i[0]&&2===i[1]?"Froyo":2===i[0]&&i[1]>2?"Gingerbread":3===i[0]?"Honeycomb":4===i[0]&&i[1]<1?"Ice Cream Sandwich":4===i[0]&&i[1]<4?"Jelly Bean":4===i[0]&&i[1]>=4?"KitKat":5===i[0]?"Lollipop":6===i[0]?"Marshmallow":7===i[0]?"Nougat":8===i[0]?"Oreo":9===i[0]?"Pie":void 0},l.getVersionPrecision=function(c){return c.split(".").length},l.compareVersions=function(c,i,a){void 0===a&&(a=!1);var h=l.getVersionPrecision(c),A=l.getVersionPrecision(i),_=Math.max(h,A),v=0,E=l.map([c,i],function(C){var z=_-l.getVersionPrecision(C),B=C+new Array(z+1).join(".0");return l.map(B.split("."),function(D){return new Array(20-D.length).join("0")+D}).reverse()});for(a&&(v=_-Math.min(h,A)),_-=1;_>=v;){if(E[0][_]>E[1][_])return 1;if(E[0][_]===E[1][_]){if(_===v)return 0;_-=1}else if(E[0][_]<E[1][_])return-1}},l.map=function(c,i){var a,h=[];if(Array.prototype.map)return Array.prototype.map.call(c,i);for(a=0;a<c.length;a+=1)h.push(i(c[a]));return h},l.getBrowserAlias=function(c){return M.BROWSER_ALIASES_MAP[c]},l.getBrowserTypeByAlias=function(c){return M.BROWSER_MAP[c]||""},l}();s.default=u,U.exports=s.default},18:function(U,s,y){"use strict";s.__esModule=!0,s.ENGINE_MAP=s.OS_MAP=s.PLATFORMS_MAP=s.BROWSER_MAP=s.BROWSER_ALIASES_MAP=void 0,s.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},s.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},s.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},s.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},s.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(U,s,y){"use strict";s.__esModule=!0,s.default=void 0;var M,u=(M=y(91))&&M.__esModule?M:{default:M},l=y(18);function c(a,h){for(var A=0;A<h.length;A++){var _=h[A];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(a,_.key,_)}}var i=function(){function a(){}var h,_;return a.getParser=function(v,E){if(void 0===E&&(E=!1),"string"!=typeof v)throw new Error("UserAgent should be a string");return new u.default(v,E)},a.parse=function(v){return new u.default(v).getResult()},h=a,_=[{key:"BROWSER_MAP",get:function(){return l.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return l.ENGINE_MAP}},{key:"OS_MAP",get:function(){return l.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return l.PLATFORMS_MAP}}],null&&c(h.prototype,null),_&&c(h,_),a}();s.default=i,U.exports=s.default},91:function(U,s,y){"use strict";s.__esModule=!0,s.default=void 0;var M=a(y(92)),u=a(y(93)),l=a(y(94)),c=a(y(95)),i=a(y(17));function a(A){return A&&A.__esModule?A:{default:A}}var h=function(){function A(v,E){if(void 0===E&&(E=!1),null==v||""===v)throw new Error("UserAgent parameter can't be empty");this._ua=v,this.parsedResult={},!0!==E&&this.parse()}var _=A.prototype;return _.getUA=function(){return this._ua},_.test=function(v){return v.test(this._ua)},_.parseBrowser=function(){var v=this;this.parsedResult.browser={};var E=M.default.find(function(C){if("function"==typeof C.test)return C.test(v);if(C.test instanceof Array)return C.test.some(function(z){return v.test(z)});throw new Error("Browser's test function is not valid")});return E&&(this.parsedResult.browser=E.describe(this.getUA())),this.parsedResult.browser},_.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},_.getBrowserName=function(v){return v?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},_.getBrowserVersion=function(){return this.getBrowser().version},_.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},_.parseOS=function(){var v=this;this.parsedResult.os={};var E=u.default.find(function(C){if("function"==typeof C.test)return C.test(v);if(C.test instanceof Array)return C.test.some(function(z){return v.test(z)});throw new Error("Browser's test function is not valid")});return E&&(this.parsedResult.os=E.describe(this.getUA())),this.parsedResult.os},_.getOSName=function(v){var E=this.getOS().name;return v?String(E).toLowerCase()||"":E||""},_.getOSVersion=function(){return this.getOS().version},_.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},_.getPlatformType=function(v){void 0===v&&(v=!1);var E=this.getPlatform().type;return v?String(E).toLowerCase()||"":E||""},_.parsePlatform=function(){var v=this;this.parsedResult.platform={};var E=l.default.find(function(C){if("function"==typeof C.test)return C.test(v);if(C.test instanceof Array)return C.test.some(function(z){return v.test(z)});throw new Error("Browser's test function is not valid")});return E&&(this.parsedResult.platform=E.describe(this.getUA())),this.parsedResult.platform},_.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},_.getEngineName=function(v){return v?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},_.parseEngine=function(){var v=this;this.parsedResult.engine={};var E=c.default.find(function(C){if("function"==typeof C.test)return C.test(v);if(C.test instanceof Array)return C.test.some(function(z){return v.test(z)});throw new Error("Browser's test function is not valid")});return E&&(this.parsedResult.engine=E.describe(this.getUA())),this.parsedResult.engine},_.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},_.getResult=function(){return Object.assign({},this.parsedResult)},_.satisfies=function(v){var E=this,C={},z=0,B={},D=0;if(Object.keys(v).forEach(function(T){var S=v[T];"string"==typeof S?(B[T]=S,D+=1):"object"==typeof S&&(C[T]=S,z+=1)}),z>0){var p=Object.keys(C),L=p.find(function(T){return E.isOS(T)});if(L){var R=this.satisfies(C[L]);if(void 0!==R)return R}var H=p.find(function(T){return E.isPlatform(T)});if(H){var w=this.satisfies(C[H]);if(void 0!==w)return w}}if(D>0){var d=Object.keys(B).find(function(T){return E.isBrowser(T,!0)});if(void 0!==d)return this.compareVersion(B[d])}},_.isBrowser=function(v,E){void 0===E&&(E=!1);var C=this.getBrowserName().toLowerCase(),z=v.toLowerCase(),B=i.default.getBrowserTypeByAlias(z);return E&&B&&(z=B.toLowerCase()),z===C},_.compareVersion=function(v){var E=[0],C=v,z=!1,B=this.getBrowserVersion();if("string"==typeof B)return">"===v[0]||"<"===v[0]?(C=v.substr(1),"="===v[1]?(z=!0,C=v.substr(2)):E=[],E.push(">"===v[0]?1:-1)):"="===v[0]?C=v.substr(1):"~"===v[0]&&(z=!0,C=v.substr(1)),E.indexOf(i.default.compareVersions(B,C,z))>-1},_.isOS=function(v){return this.getOSName(!0)===String(v).toLowerCase()},_.isPlatform=function(v){return this.getPlatformType(!0)===String(v).toLowerCase()},_.isEngine=function(v){return this.getEngineName(!0)===String(v).toLowerCase()},_.is=function(v){return this.isBrowser(v)||this.isOS(v)||this.isPlatform(v)},_.some=function(v){var E=this;return void 0===v&&(v=[]),v.some(function(C){return E.is(C)})},A}();s.default=h,U.exports=s.default},92:function(U,s,y){"use strict";s.__esModule=!0,s.default=void 0;var M,u=(M=y(17))&&M.__esModule?M:{default:M},l=/version\/(\d+(\.?_?\d+)+)/i;s.default=[{test:[/googlebot/i],describe:function(i){var a={name:"Googlebot"},h=u.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,i)||u.default.getFirstMatch(l,i);return h&&(a.version=h),a}},{test:[/opera/i],describe:function(i){var a={name:"Opera"},h=u.default.getFirstMatch(l,i)||u.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/opr\/|opios/i],describe:function(i){var a={name:"Opera"},h=u.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,i)||u.default.getFirstMatch(l,i);return h&&(a.version=h),a}},{test:[/SamsungBrowser/i],describe:function(i){var a={name:"Samsung Internet for Android"},h=u.default.getFirstMatch(l,i)||u.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/Whale/i],describe:function(i){var a={name:"NAVER Whale Browser"},h=u.default.getFirstMatch(l,i)||u.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/MZBrowser/i],describe:function(i){var a={name:"MZ Browser"},h=u.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,i)||u.default.getFirstMatch(l,i);return h&&(a.version=h),a}},{test:[/focus/i],describe:function(i){var a={name:"Focus"},h=u.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,i)||u.default.getFirstMatch(l,i);return h&&(a.version=h),a}},{test:[/swing/i],describe:function(i){var a={name:"Swing"},h=u.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,i)||u.default.getFirstMatch(l,i);return h&&(a.version=h),a}},{test:[/coast/i],describe:function(i){var a={name:"Opera Coast"},h=u.default.getFirstMatch(l,i)||u.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/yabrowser/i],describe:function(i){var a={name:"Yandex Browser"},h=u.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,i)||u.default.getFirstMatch(l,i);return h&&(a.version=h),a}},{test:[/ucbrowser/i],describe:function(i){var a={name:"UC Browser"},h=u.default.getFirstMatch(l,i)||u.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/Maxthon|mxios/i],describe:function(i){var a={name:"Maxthon"},h=u.default.getFirstMatch(l,i)||u.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/epiphany/i],describe:function(i){var a={name:"Epiphany"},h=u.default.getFirstMatch(l,i)||u.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/puffin/i],describe:function(i){var a={name:"Puffin"},h=u.default.getFirstMatch(l,i)||u.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/sleipnir/i],describe:function(i){var a={name:"Sleipnir"},h=u.default.getFirstMatch(l,i)||u.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/k-meleon/i],describe:function(i){var a={name:"K-Meleon"},h=u.default.getFirstMatch(l,i)||u.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/micromessenger/i],describe:function(i){var a={name:"WeChat"},h=u.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,i)||u.default.getFirstMatch(l,i);return h&&(a.version=h),a}},{test:[/qqbrowser/i],describe:function(i){var a={name:/qqbrowserlite/i.test(i)?"QQ Browser Lite":"QQ Browser"},h=u.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,i)||u.default.getFirstMatch(l,i);return h&&(a.version=h),a}},{test:[/msie|trident/i],describe:function(i){var a={name:"Internet Explorer"},h=u.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/\sedg\//i],describe:function(i){var a={name:"Microsoft Edge"},h=u.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/edg([ea]|ios)/i],describe:function(i){var a={name:"Microsoft Edge"},h=u.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/vivaldi/i],describe:function(i){var a={name:"Vivaldi"},h=u.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/seamonkey/i],describe:function(i){var a={name:"SeaMonkey"},h=u.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/sailfish/i],describe:function(i){var a={name:"Sailfish"},h=u.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,i);return h&&(a.version=h),a}},{test:[/silk/i],describe:function(i){var a={name:"Amazon Silk"},h=u.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/phantom/i],describe:function(i){var a={name:"PhantomJS"},h=u.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/slimerjs/i],describe:function(i){var a={name:"SlimerJS"},h=u.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(i){var a={name:"BlackBerry"},h=u.default.getFirstMatch(l,i)||u.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/(web|hpw)[o0]s/i],describe:function(i){var a={name:"WebOS Browser"},h=u.default.getFirstMatch(l,i)||u.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/bada/i],describe:function(i){var a={name:"Bada"},h=u.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/tizen/i],describe:function(i){var a={name:"Tizen"},h=u.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,i)||u.default.getFirstMatch(l,i);return h&&(a.version=h),a}},{test:[/qupzilla/i],describe:function(i){var a={name:"QupZilla"},h=u.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,i)||u.default.getFirstMatch(l,i);return h&&(a.version=h),a}},{test:[/firefox|iceweasel|fxios/i],describe:function(i){var a={name:"Firefox"},h=u.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/chromium/i],describe:function(i){var a={name:"Chromium"},h=u.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,i)||u.default.getFirstMatch(l,i);return h&&(a.version=h),a}},{test:[/chrome|crios|crmo/i],describe:function(i){var a={name:"Chrome"},h=u.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/GSA/i],describe:function(i){var a={name:"Google Search"},h=u.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:function(i){var a=!i.test(/like android/i),h=i.test(/android/i);return a&&h},describe:function(i){var a={name:"Android Browser"},h=u.default.getFirstMatch(l,i);return h&&(a.version=h),a}},{test:[/playstation 4/i],describe:function(i){var a={name:"PlayStation 4"},h=u.default.getFirstMatch(l,i);return h&&(a.version=h),a}},{test:[/safari|applewebkit/i],describe:function(i){var a={name:"Safari"},h=u.default.getFirstMatch(l,i);return h&&(a.version=h),a}},{test:[/.*/i],describe:function(i){var a=-1!==i.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:u.default.getFirstMatch(a,i),version:u.default.getSecondMatch(a,i)}}}],U.exports=s.default},93:function(U,s,y){"use strict";s.__esModule=!0,s.default=void 0;var M,u=(M=y(17))&&M.__esModule?M:{default:M},l=y(18);s.default=[{test:[/Roku\/DVP/],describe:function(i){var a=u.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,i);return{name:l.OS_MAP.Roku,version:a}}},{test:[/windows phone/i],describe:function(i){var a=u.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,i);return{name:l.OS_MAP.WindowsPhone,version:a}}},{test:[/windows/i],describe:function(i){var a=u.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,i),h=u.default.getWindowsVersionName(a);return{name:l.OS_MAP.Windows,version:a,versionName:h}}},{test:[/macintosh/i],describe:function(i){var a=u.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,i).replace(/[_\s]/g,"."),h=u.default.getMacOSVersionName(a),A={name:l.OS_MAP.MacOS,version:a};return h&&(A.versionName=h),A}},{test:[/(ipod|iphone|ipad)/i],describe:function(i){var a=u.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,i).replace(/[_\s]/g,".");return{name:l.OS_MAP.iOS,version:a}}},{test:function(i){var a=!i.test(/like android/i),h=i.test(/android/i);return a&&h},describe:function(i){var a=u.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,i),h=u.default.getAndroidVersionName(a),A={name:l.OS_MAP.Android,version:a};return h&&(A.versionName=h),A}},{test:[/(web|hpw)[o0]s/i],describe:function(i){var a=u.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,i),h={name:l.OS_MAP.WebOS};return a&&a.length&&(h.version=a),h}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(i){var a=u.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,i)||u.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,i)||u.default.getFirstMatch(/\bbb(\d+)/i,i);return{name:l.OS_MAP.BlackBerry,version:a}}},{test:[/bada/i],describe:function(i){var a=u.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,i);return{name:l.OS_MAP.Bada,version:a}}},{test:[/tizen/i],describe:function(i){var a=u.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,i);return{name:l.OS_MAP.Tizen,version:a}}},{test:[/linux/i],describe:function(){return{name:l.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:l.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(i){var a=u.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,i);return{name:l.OS_MAP.PlayStation4,version:a}}}],U.exports=s.default},94:function(U,s,y){"use strict";s.__esModule=!0,s.default=void 0;var M,u=(M=y(17))&&M.__esModule?M:{default:M},l=y(18);s.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(i){var a=u.default.getFirstMatch(/(can-l01)/i,i)&&"Nova",h={type:l.PLATFORMS_MAP.mobile,vendor:"Huawei"};return a&&(h.model=a),h}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:l.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:l.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:l.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:l.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:l.PLATFORMS_MAP.tablet}}},{test:function(i){var a=i.test(/ipod|iphone/i),h=i.test(/like (ipod|iphone)/i);return a&&!h},describe:function(i){var a=u.default.getFirstMatch(/(ipod|iphone)/i,i);return{type:l.PLATFORMS_MAP.mobile,vendor:"Apple",model:a}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:l.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:l.PLATFORMS_MAP.mobile}}},{test:function(i){return"blackberry"===i.getBrowserName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(i){return"bada"===i.getBrowserName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.mobile}}},{test:function(i){return"windows phone"===i.getBrowserName()},describe:function(){return{type:l.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(i){var a=Number(String(i.getOSVersion()).split(".")[0]);return"android"===i.getOSName(!0)&&a>=3},describe:function(){return{type:l.PLATFORMS_MAP.tablet}}},{test:function(i){return"android"===i.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.mobile}}},{test:function(i){return"macos"===i.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(i){return"windows"===i.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.desktop}}},{test:function(i){return"linux"===i.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.desktop}}},{test:function(i){return"playstation 4"===i.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.tv}}},{test:function(i){return"roku"===i.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.tv}}}],U.exports=s.default},95:function(U,s,y){"use strict";s.__esModule=!0,s.default=void 0;var M,u=(M=y(17))&&M.__esModule?M:{default:M},l=y(18);s.default=[{test:function(i){return"microsoft edge"===i.getBrowserName(!0)},describe:function(i){if(/\sedg\//i.test(i))return{name:l.ENGINE_MAP.Blink};var a=u.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,i);return{name:l.ENGINE_MAP.EdgeHTML,version:a}}},{test:[/trident/i],describe:function(i){var a={name:l.ENGINE_MAP.Trident},h=u.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:function(i){return i.test(/presto/i)},describe:function(i){var a={name:l.ENGINE_MAP.Presto},h=u.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:function(i){var a=i.test(/gecko/i),h=i.test(/like gecko/i);return a&&!h},describe:function(i){var a={name:l.ENGINE_MAP.Gecko},h=u.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:l.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(i){var a={name:l.ENGINE_MAP.WebKit},h=u.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,i);return h&&(a.version=h),a}}],U.exports=s.default}})},1524:(V,U,s)=>{var y;!function(M,u,l,c){"use strict";var i=["","webkit","moz","MS","ms","o"],a=u.createElement("div"),A=Math.round,_=Math.abs,v=Date.now;function E(P,F,G){return setTimeout(L(P,G),F)}function C(P,F,G){return!!Array.isArray(P)&&(z(P,G[F],G),!0)}function z(P,F,G){var $;if(P)if(P.forEach)P.forEach(F,G);else if(P.length!==c)for($=0;$<P.length;)F.call(G,P[$],$,P),$++;else for($ in P)P.hasOwnProperty($)&&F.call(G,P[$],$,P)}function B(P,F,G){for(var $=Object.keys(F),it=0;it<$.length;)(!G||G&&P[$[it]]===c)&&(P[$[it]]=F[$[it]]),it++;return P}function D(P,F){return B(P,F,!0)}function p(P,F,G){var it,$=F.prototype;(it=P.prototype=Object.create($)).constructor=P,it._super=$,G&&B(it,G)}function L(P,F){return function(){return P.apply(F,arguments)}}function R(P,F){return"function"==typeof P?P.apply(F&&F[0]||c,F):P}function H(P,F){return P===c?F:P}function w(P,F,G){z(I(F),function($){P.addEventListener($,G,!1)})}function d(P,F,G){z(I(F),function($){P.removeEventListener($,G,!1)})}function T(P,F){for(;P;){if(P==F)return!0;P=P.parentNode}return!1}function S(P,F){return P.indexOf(F)>-1}function I(P){return P.trim().split(/\s+/g)}function O(P,F,G){if(P.indexOf&&!G)return P.indexOf(F);for(var $=0;$<P.length;){if(G&&P[$][G]==F||!G&&P[$]===F)return $;$++}return-1}function Y(P){return Array.prototype.slice.call(P,0)}function W(P,F,G){for(var $=[],it=[],ht=0;ht<P.length;){var mt=F?P[ht][F]:P[ht];O(it,mt)<0&&$.push(P[ht]),it[ht]=mt,ht++}return G&&($=F?$.sort(function(Ot,Vt){return Ot[F]>Vt[F]}):$.sort()),$}function X(P,F){for(var G,$,it=F[0].toUpperCase()+F.slice(1),ht=0;ht<i.length;){if(($=(G=i[ht])?G+it:F)in P)return $;ht++}return c}var J=1;function et(P){var F=P.ownerDocument;return F.defaultView||F.parentWindow}var ct="ontouchstart"in M,ut=X(M,"PointerEvent")!==c,pt=ct&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),dt="touch",Pt="mouse",Pe=["x","y"],ne=["clientX","clientY"];function zt(P,F){var G=this;this.manager=P,this.callback=F,this.element=P.element,this.target=P.options.inputTarget,this.domHandler=function($){R(P.options.enable,[P])&&G.handler($)},this.init()}function ke(P,F,G){var $=G.pointers.length,it=G.changedPointers.length,ht=1&F&&$-it==0,mt=12&F&&$-it==0;G.isFirst=!!ht,G.isFinal=!!mt,ht&&(P.session={}),G.eventType=F,function Ke(P,F){var G=P.session,$=F.pointers,it=$.length;G.firstInput||(G.firstInput=ve(F)),it>1&&!G.firstMultiple?G.firstMultiple=ve(F):1===it&&(G.firstMultiple=!1);var ht=G.firstInput,mt=G.firstMultiple,Rt=mt?mt.center:ht.center,Ot=F.center=Ce($);F.timeStamp=v(),F.deltaTime=F.timeStamp-ht.timeStamp,F.angle=fe(Rt,Ot),F.distance=se(Rt,Ot),function Ze(P,F){var G=F.center,$=P.offsetDelta||{},it=P.prevDelta||{},ht=P.prevInput||{};(1===F.eventType||4===ht.eventType)&&(it=P.prevDelta={x:ht.deltaX||0,y:ht.deltaY||0},$=P.offsetDelta={x:G.x,y:G.y}),F.deltaX=it.x+(G.x-$.x),F.deltaY=it.y+(G.y-$.y)}(G,F),F.offsetDirection=Le(F.deltaX,F.deltaY),F.scale=mt?function be(P,F){return se(F[0],F[1],ne)/se(P[0],P[1],ne)}(mt.pointers,$):1,F.rotation=mt?function Je(P,F){return fe(F[1],F[0],ne)-fe(P[1],P[0],ne)}(mt.pointers,$):0,function Qe(P,F){var it,ht,mt,Rt,G=P.lastInterval||F,$=F.timeStamp-G.timeStamp;if(8!=F.eventType&&($>25||G.velocity===c)){var Ot=G.deltaX-F.deltaX,Vt=G.deltaY-F.deltaY,Jt=function $e(P,F,G){return{x:F/P||0,y:G/P||0}}($,Ot,Vt);ht=Jt.x,mt=Jt.y,it=_(Jt.x)>_(Jt.y)?Jt.x:Jt.y,Rt=Le(Ot,Vt),P.lastInterval=F}else it=G.velocity,ht=G.velocityX,mt=G.velocityY,Rt=G.direction;F.velocity=it,F.velocityX=ht,F.velocityY=mt,F.direction=Rt}(G,F);var Vt=P.element;T(F.srcEvent.target,Vt)&&(Vt=F.srcEvent.target),F.target=Vt}(P,G),P.emit("hammer.input",G),P.recognize(G),P.session.prevInput=G}function ve(P){for(var F=[],G=0;G<P.pointers.length;)F[G]={clientX:A(P.pointers[G].clientX),clientY:A(P.pointers[G].clientY)},G++;return{timeStamp:v(),pointers:F,center:Ce(F),deltaX:P.deltaX,deltaY:P.deltaY}}function Ce(P){var F=P.length;if(1===F)return{x:A(P[0].clientX),y:A(P[0].clientY)};for(var G=0,$=0,it=0;it<F;)G+=P[it].clientX,$+=P[it].clientY,it++;return{x:A(G/F),y:A($/F)}}function Le(P,F){return P===F?1:_(P)>=_(F)?P>0?2:4:F>0?8:16}function se(P,F,G){G||(G=Pe);var $=F[G[0]]-P[G[0]],it=F[G[1]]-P[G[1]];return Math.sqrt($*$+it*it)}function fe(P,F,G){return G||(G=Pe),180*Math.atan2(F[G[1]]-P[G[1]],F[G[0]]-P[G[0]])/Math.PI}zt.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(et(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(et(this.element),this.evWin,this.domHandler)}};var qe={mousedown:1,mousemove:2,mouseup:4},tr="mousedown",er="mousemove mouseup";function ae(){this.evEl=tr,this.evWin=er,this.allow=!0,this.pressed=!1,zt.apply(this,arguments)}p(ae,zt,{handler:function(F){var G=qe[F.type];1&G&&0===F.button&&(this.pressed=!0),2&G&&1!==F.which&&(G=4),this.pressed&&this.allow&&(4&G&&(this.pressed=!1),this.callback(this.manager,G,{pointers:[F],changedPointers:[F],pointerType:Pt,srcEvent:F}))}});var rr={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},ir={2:dt,3:"pen",4:Pt,5:"kinect"},Ae="pointerdown",Re="pointermove pointerup pointercancel";function ue(){this.evEl=Ae,this.evWin=Re,zt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}M.MSPointerEvent&&(Ae="MSPointerDown",Re="MSPointerMove MSPointerUp MSPointerCancel"),p(ue,zt,{handler:function(F){var G=this.store,$=!1,it=F.type.toLowerCase().replace("ms",""),ht=rr[it],mt=ir[F.pointerType]||F.pointerType,Rt=mt==dt,Ot=O(G,F.pointerId,"pointerId");1&ht&&(0===F.button||Rt)?Ot<0&&(G.push(F),Ot=G.length-1):12&ht&&($=!0),!(Ot<0)&&(G[Ot]=F,this.callback(this.manager,ht,{pointers:G,changedPointers:[F],pointerType:mt,srcEvent:F}),$&&G.splice(Ot,1))}});var nr={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Oe="touchstart",sr="touchstart touchmove touchend touchcancel";function Ie(){this.evTarget=Oe,this.evWin=sr,this.started=!1,zt.apply(this,arguments)}function ar(P,F){var G=Y(P.touches),$=Y(P.changedTouches);return 12&F&&(G=W(G.concat($),"identifier",!0)),[G,$]}p(Ie,zt,{handler:function(F){var G=nr[F.type];if(1===G&&(this.started=!0),this.started){var $=ar.call(this,F,G);12&G&&$[0].length-$[1].length==0&&(this.started=!1),this.callback(this.manager,G,{pointers:$[0],changedPointers:$[1],pointerType:dt,srcEvent:F})}}});var or={touchstart:1,touchmove:2,touchend:4,touchcancel:8},hr="touchstart touchmove touchend touchcancel";function oe(){this.evTarget=hr,this.targetIds={},zt.apply(this,arguments)}function lr(P,F){var G=Y(P.touches),$=this.targetIds;if(3&F&&1===G.length)return $[G[0].identifier]=!0,[G,G];var it,ht,mt=Y(P.changedTouches),Rt=[],Ot=this.target;if(ht=G.filter(function(Vt){return T(Vt.target,Ot)}),1===F)for(it=0;it<ht.length;)$[ht[it].identifier]=!0,it++;for(it=0;it<mt.length;)$[mt[it].identifier]&&Rt.push(mt[it]),12&F&&delete $[mt[it].identifier],it++;return Rt.length?[W(ht.concat(Rt),"identifier",!0),Rt]:void 0}function de(){zt.apply(this,arguments);var P=L(this.handler,this);this.touch=new oe(this.manager,P),this.mouse=new ae(this.manager,P)}p(oe,zt,{handler:function(F){var G=or[F.type],$=lr.call(this,F,G);!$||this.callback(this.manager,G,{pointers:$[0],changedPointers:$[1],pointerType:dt,srcEvent:F})}}),p(de,zt,{handler:function(F,G,$){var ht=$.pointerType==Pt;if($.pointerType==dt)this.mouse.allow=!1;else if(ht&&!this.mouse.allow)return;12&G&&(this.mouse.allow=!0),this.callback(F,G,$)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ze=X(a.style,"touchAction"),De=ze!==c,Fe="compute",pe="manipulation",Qt="none",te="pan-x",ee="pan-y";function me(P,F){this.manager=P,this.set(F)}function Wt(P){this.id=function tt(){return J++}(),this.manager=null,this.options=D(P||{},this.defaults),this.options.enable=H(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Be(P){return 16==P?"down":8==P?"up":2==P?"left":4==P?"right":""}function le(P,F){var G=F.manager;return G?G.get(P):P}function Ht(){Wt.apply(this,arguments)}function ie(){Ht.apply(this,arguments),this.pX=null,this.pY=null}function ye(){Ht.apply(this,arguments)}function ge(){Wt.apply(this,arguments),this._timer=null,this._input=null}function _e(){Ht.apply(this,arguments)}function we(){Ht.apply(this,arguments)}function ce(){Wt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Zt(P,F){return(F=F||{}).recognizers=H(F.recognizers,Zt.defaults.preset),new Me(P,F)}function Me(P,F){this.options=D(F=F||{},Zt.defaults),this.options.inputTarget=this.options.inputTarget||P,this.handlers={},this.session={},this.recognizers=[],this.element=P,this.input=function je(P){return new(P.options.inputClass||(ut?ue:pt?oe:ct?de:ae))(P,ke)}(this),this.touchAction=new me(this,this.options.touchAction),We(this,!0),z(F.recognizers,function(G){var $=this.add(new G[0](G[1]));G[2]&&$.recognizeWith(G[2]),G[3]&&$.requireFailure(G[3])},this)}function We(P,F){var G=P.element;z(P.options.cssProps,function($,it){G.style[X(G.style,it)]=F?$:""})}me.prototype={set:function(P){P==Fe&&(P=this.compute()),De&&(this.manager.element.style[ze]=P),this.actions=P.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var P=[];return z(this.manager.recognizers,function(F){R(F.options.enable,[F])&&(P=P.concat(F.getTouchAction()))}),function cr(P){if(S(P,Qt))return Qt;var F=S(P,te),G=S(P,ee);return F&&G?te+" "+ee:F||G?F?te:ee:S(P,pe)?pe:"auto"}(P.join(" "))},preventDefaults:function(P){if(!De){var F=P.srcEvent,G=P.offsetDirection;if(this.manager.session.prevented)return void F.preventDefault();var $=this.actions,it=S($,Qt),ht=S($,ee),mt=S($,te);if(it||ht&&6&G||mt&&24&G)return this.preventSrc(F)}},preventSrc:function(P){this.manager.session.prevented=!0,P.preventDefault()}},Wt.prototype={defaults:{},set:function(P){return B(this.options,P),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(P){if(C(P,"recognizeWith",this))return this;var F=this.simultaneous;return F[(P=le(P,this)).id]||(F[P.id]=P,P.recognizeWith(this)),this},dropRecognizeWith:function(P){return C(P,"dropRecognizeWith",this)||(P=le(P,this),delete this.simultaneous[P.id]),this},requireFailure:function(P){if(C(P,"requireFailure",this))return this;var F=this.requireFail;return-1===O(F,P=le(P,this))&&(F.push(P),P.requireFailure(this)),this},dropRequireFailure:function(P){if(C(P,"dropRequireFailure",this))return this;P=le(P,this);var F=O(this.requireFail,P);return F>-1&&this.requireFail.splice(F,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(P){return!!this.simultaneous[P.id]},emit:function(P){var F=this,G=this.state;function $(it){F.manager.emit(F.options.event+(it?function vr(P){return 16&P?"cancel":8&P?"end":4&P?"move":2&P?"start":""}(G):""),P)}G<8&&$(!0),$(),G>=8&&$(!0)},tryEmit:function(P){if(this.canEmit())return this.emit(P);this.state=32},canEmit:function(){for(var P=0;P<this.requireFail.length;){if(!(33&this.requireFail[P].state))return!1;P++}return!0},recognize:function(P){var F=B({},P);if(!R(this.options.enable,[this,F]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(F),30&this.state&&this.tryEmit(F)},process:function(P){},getTouchAction:function(){},reset:function(){}},p(Ht,Wt,{defaults:{pointers:1},attrTest:function(P){var F=this.options.pointers;return 0===F||P.pointers.length===F},process:function(P){var F=this.state,G=P.eventType,$=6&F,it=this.attrTest(P);return $&&(8&G||!it)?16|F:$||it?4&G?8|F:2&F?4|F:2:32}}),p(ie,Ht,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var P=this.options.direction,F=[];return 6&P&&F.push(ee),24&P&&F.push(te),F},directionTest:function(P){var F=this.options,G=!0,$=P.distance,it=P.direction,ht=P.deltaX,mt=P.deltaY;return it&F.direction||(6&F.direction?(it=0===ht?1:ht<0?2:4,G=ht!=this.pX,$=Math.abs(P.deltaX)):(it=0===mt?1:mt<0?8:16,G=mt!=this.pY,$=Math.abs(P.deltaY))),P.direction=it,G&&$>F.threshold&&it&F.direction},attrTest:function(P){return Ht.prototype.attrTest.call(this,P)&&(2&this.state||!(2&this.state)&&this.directionTest(P))},emit:function(P){this.pX=P.deltaX,this.pY=P.deltaY;var F=Be(P.direction);F&&this.manager.emit(this.options.event+F,P),this._super.emit.call(this,P)}}),p(ye,Ht,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Qt]},attrTest:function(P){return this._super.attrTest.call(this,P)&&(Math.abs(P.scale-1)>this.options.threshold||2&this.state)},emit:function(P){this._super.emit.call(this,P),1!==P.scale&&this.manager.emit(this.options.event+(P.scale<1?"in":"out"),P)}}),p(ge,Wt,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return["auto"]},process:function(P){var F=this.options,G=P.pointers.length===F.pointers,$=P.distance<F.threshold,it=P.deltaTime>F.time;if(this._input=P,!$||!G||12&P.eventType&&!it)this.reset();else if(1&P.eventType)this.reset(),this._timer=E(function(){this.state=8,this.tryEmit()},F.time,this);else if(4&P.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(P){8===this.state&&(P&&4&P.eventType?this.manager.emit(this.options.event+"up",P):(this._input.timeStamp=v(),this.manager.emit(this.options.event,this._input)))}}),p(_e,Ht,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Qt]},attrTest:function(P){return this._super.attrTest.call(this,P)&&(Math.abs(P.rotation)>this.options.threshold||2&this.state)}}),p(we,Ht,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:30,pointers:1},getTouchAction:function(){return ie.prototype.getTouchAction.call(this)},attrTest:function(P){var G,F=this.options.direction;return 30&F?G=P.velocity:6&F?G=P.velocityX:24&F&&(G=P.velocityY),this._super.attrTest.call(this,P)&&F&P.direction&&P.distance>this.options.threshold&&_(G)>this.options.velocity&&4&P.eventType},emit:function(P){var F=Be(P.direction);F&&this.manager.emit(this.options.event+F,P),this.manager.emit(this.options.event,P)}}),p(ce,Wt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[pe]},process:function(P){var F=this.options,G=P.pointers.length===F.pointers,$=P.distance<F.threshold,it=P.deltaTime<F.time;if(this.reset(),1&P.eventType&&0===this.count)return this.failTimeout();if($&&it&&G){if(4!=P.eventType)return this.failTimeout();var ht=!this.pTime||P.timeStamp-this.pTime<F.interval,mt=!this.pCenter||se(this.pCenter,P.center)<F.posThreshold;if(this.pTime=P.timeStamp,this.pCenter=P.center,mt&&ht?this.count+=1:this.count=1,this._input=P,0==this.count%F.taps)return this.hasRequireFailures()?(this._timer=E(function(){this.state=8,this.tryEmit()},F.interval,this),2):8}return 32},failTimeout:function(){return this._timer=E(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Zt.VERSION="2.0.4",Zt.defaults={domEvents:!1,touchAction:Fe,enable:!0,inputTarget:null,inputClass:null,preset:[[_e,{enable:!1}],[ye,{enable:!1},["rotate"]],[we,{direction:6}],[ie,{direction:6},["swipe"]],[ce],[ce,{event:"doubletap",taps:2},["tap"]],[ge]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Me.prototype={set:function(P){return B(this.options,P),P.touchAction&&this.touchAction.update(),P.inputTarget&&(this.input.destroy(),this.input.target=P.inputTarget,this.input.init()),this},stop:function(P){this.session.stopped=P?2:1},recognize:function(P){var F=this.session;if(!F.stopped){this.touchAction.preventDefaults(P);var G,$=this.recognizers,it=F.curRecognizer;(!it||it&&8&it.state)&&(it=F.curRecognizer=null);for(var ht=0;ht<$.length;)G=$[ht],2===F.stopped||it&&G!=it&&!G.canRecognizeWith(it)?G.reset():G.recognize(P),!it&&14&G.state&&(it=F.curRecognizer=G),ht++}},get:function(P){if(P instanceof Wt)return P;for(var F=this.recognizers,G=0;G<F.length;G++)if(F[G].options.event==P)return F[G];return null},add:function(P){if(C(P,"add",this))return this;var F=this.get(P.options.event);return F&&this.remove(F),this.recognizers.push(P),P.manager=this,this.touchAction.update(),P},remove:function(P){if(C(P,"remove",this))return this;var F=this.recognizers;return P=this.get(P),F.splice(O(F,P),1),this.touchAction.update(),this},on:function(P,F){var G=this.handlers;return z(I(P),function($){G[$]=G[$]||[],G[$].push(F)}),this},off:function(P,F){var G=this.handlers;return z(I(P),function($){F?G[$].splice(O(G[$],F),1):delete G[$]}),this},emit:function(P,F){this.options.domEvents&&function ur(P,F){var G=u.createEvent("Event");G.initEvent(P,!0,!0),G.gesture=F,F.target.dispatchEvent(G)}(P,F);var G=this.handlers[P]&&this.handlers[P].slice();if(G&&G.length){F.type=P,F.preventDefault=function(){F.srcEvent.preventDefault()};for(var $=0;$<G.length;)G[$](F),$++}},destroy:function(){this.element&&We(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},B(Zt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Me,Input:zt,TouchAction:me,TouchInput:oe,MouseInput:ae,PointerEventInput:ue,TouchMouseInput:de,SingleTouchInput:Ie,Recognizer:Wt,AttrRecognizer:Ht,Tap:ce,Pan:ie,Swipe:we,Pinch:ye,Rotate:_e,Press:ge,on:w,off:d,each:z,merge:D,extend:B,inherit:p,bindFn:L,prefixed:X}),s.amdO?(y=function(){return Zt}.call(U,s,U,V))!==c&&(V.exports=y):V.exports?V.exports=Zt:M.Hammer=Zt}(window,document)},8452:(V,U,s)=>{"use strict";s.r(U),s.d(U,{glMatrix:()=>y,mat2:()=>M,mat2d:()=>u,mat3:()=>l,mat4:()=>c,quat:()=>h,quat2:()=>A,vec2:()=>_,vec3:()=>i,vec4:()=>a});var y={};s.r(y),s.d(y,{ARRAY_TYPE:()=>E,EPSILON:()=>v,RANDOM:()=>C,equals:()=>p,setMatrixArrayType:()=>z,toRadian:()=>D});var M={};s.r(M),s.d(M,{LDU:()=>ut,add:()=>pt,adjoint:()=>O,clone:()=>R,copy:()=>H,create:()=>L,determinant:()=>Y,equals:()=>Pt,exactEquals:()=>gt,frob:()=>ct,fromRotation:()=>tt,fromScaling:()=>et,fromValues:()=>d,identity:()=>w,invert:()=>I,mul:()=>Lt,multiply:()=>W,multiplyScalar:()=>Ct,multiplyScalarAndAdd:()=>Ut,rotate:()=>X,scale:()=>J,set:()=>T,str:()=>nt,sub:()=>bt,subtract:()=>dt,transpose:()=>S});var u={};s.r(u),s.d(u,{add:()=>Qe,clone:()=>At,copy:()=>Ft,create:()=>yt,determinant:()=>Bt,equals:()=>se,exactEquals:()=>Le,frob:()=>Ze,fromRotation:()=>zt,fromScaling:()=>je,fromTranslation:()=>ke,fromValues:()=>jt,identity:()=>Gt,invert:()=>qt,mul:()=>fe,multiply:()=>kt,multiplyScalar:()=>Ce,multiplyScalarAndAdd:()=>$e,rotate:()=>Se,scale:()=>Pe,set:()=>It,str:()=>Ke,sub:()=>Je,subtract:()=>ve,translate:()=>ne});var l={};s.r(l),s.d(l,{add:()=>pe,adjoint:()=>ue,clone:()=>tr,copy:()=>er,create:()=>be,determinant:()=>nr,equals:()=>cr,exactEquals:()=>me,frob:()=>He,fromMat2d:()=>lr,fromMat4:()=>qe,fromQuat:()=>de,fromRotation:()=>hr,fromScaling:()=>oe,fromTranslation:()=>or,fromValues:()=>ae,identity:()=>ir,invert:()=>Re,mul:()=>he,multiply:()=>Oe,multiplyScalar:()=>te,multiplyScalarAndAdd:()=>ee,normalFromMat4:()=>ze,projection:()=>De,rotate:()=>Ie,scale:()=>ar,set:()=>rr,str:()=>Fe,sub:()=>Dt,subtract:()=>Qt,translate:()=>sr,transpose:()=>Ae});var c={};s.r(c),s.d(c,{add:()=>Si,adjoint:()=>le,clone:()=>Kt,copy:()=>Yt,create:()=>$t,determinant:()=>Ht,equals:()=>bi,exactEquals:()=>Li,frob:()=>Ti,fromQuat:()=>Ot,fromQuat2:()=>G,fromRotation:()=>Me,fromRotationTranslation:()=>F,fromRotationTranslationScale:()=>mt,fromRotationTranslationScaleOrigin:()=>Rt,fromScaling:()=>Ne,fromTranslation:()=>fr,fromValues:()=>re,fromXRotation:()=>We,fromYRotation:()=>ur,fromZRotation:()=>P,frustum:()=>Vt,getRotation:()=>ht,getScaling:()=>it,getTranslation:()=>$,identity:()=>Wt,invert:()=>Be,lookAt:()=>Mi,mul:()=>Ai,multiply:()=>ie,multiplyScalar:()=>Pi,multiplyScalarAndAdd:()=>Ci,ortho:()=>wi,perspective:()=>Jt,perspectiveFromFieldOfView:()=>_i,rotate:()=>_e,rotateX:()=>we,rotateY:()=>ce,rotateZ:()=>Zt,scale:()=>ge,set:()=>Nt,str:()=>Ei,sub:()=>Ri,subtract:()=>Er,targetTo:()=>xi,translate:()=>ye,transpose:()=>vr});var i={};s.r(i),s.d(i,{add:()=>Di,angle:()=>en,bezier:()=>ki,ceil:()=>Fi,clone:()=>Oi,copy:()=>Ii,create:()=>dr,cross:()=>Ye,dist:()=>cn,distance:()=>Lr,div:()=>ln,divide:()=>Cr,dot:()=>pr,equals:()=>an,exactEquals:()=>sn,floor:()=>Hi,forEach:()=>un,fromValues:()=>xe,hermite:()=>ji,inverse:()=>Ui,len:()=>Rr,length:()=>Tr,lerp:()=>Gi,max:()=>Ni,min:()=>Bi,mul:()=>hn,multiply:()=>Pr,negate:()=>Xi,normalize:()=>Ve,random:()=>Ki,rotateX:()=>Ji,rotateY:()=>qi,rotateZ:()=>tn,round:()=>Wi,scale:()=>Vi,scaleAndAdd:()=>Yi,set:()=>zi,sqrDist:()=>vn,sqrLen:()=>fn,squaredDistance:()=>br,squaredLength:()=>Ar,str:()=>nn,sub:()=>on,subtract:()=>Sr,transformMat3:()=>Qi,transformMat4:()=>Zi,transformQuat:()=>$i,zero:()=>rn});var a={};s.r(a),s.d(a,{add:()=>Hr,ceil:()=>dn,clone:()=>Ir,copy:()=>Dr,create:()=>Or,cross:()=>xn,dist:()=>Rn,distance:()=>Yr,div:()=>An,divide:()=>Wr,dot:()=>Gr,equals:()=>Kr,exactEquals:()=>kr,floor:()=>pn,forEach:()=>Dn,fromValues:()=>zr,inverse:()=>Mn,len:()=>In,length:()=>mr,lerp:()=>jr,max:()=>yn,min:()=>mn,mul:()=>bn,multiply:()=>Nr,negate:()=>wn,normalize:()=>Ur,random:()=>En,round:()=>gn,scale:()=>Vr,scaleAndAdd:()=>_n,set:()=>Fr,sqrDist:()=>On,sqrLen:()=>zn,squaredDistance:()=>Xr,squaredLength:()=>yr,str:()=>Cn,sub:()=>Ln,subtract:()=>Br,transformMat4:()=>Tn,transformQuat:()=>Sn,zero:()=>Pn});var h={};s.r(h),s.d(h,{add:()=>Zn,calculateW:()=>Nn,clone:()=>jn,conjugate:()=>Xn,copy:()=>gr,create:()=>Xe,dot:()=>_r,equals:()=>es,exactEquals:()=>ts,exp:()=>ti,fromEuler:()=>Un,fromMat3:()=>ri,fromValues:()=>kn,getAngle:()=>Bn,getAxisAngle:()=>Hn,identity:()=>Fn,invert:()=>Yn,len:()=>Jn,length:()=>wr,lerp:()=>$n,ln:()=>ei,mul:()=>Qn,multiply:()=>Qr,normalize:()=>xr,pow:()=>Wn,random:()=>Vn,rotateX:()=>$r,rotateY:()=>Jr,rotateZ:()=>qr,rotationTo:()=>rs,scale:()=>ii,set:()=>Kn,setAxes:()=>ns,setAxisAngle:()=>Zr,slerp:()=>Ue,sqlerp:()=>is,sqrLen:()=>qn,squaredLength:()=>Mr,str:()=>Gn});var A={};s.r(A),s.d(A,{add:()=>Ps,clone:()=>as,conjugate:()=>Rs,copy:()=>si,create:()=>ss,dot:()=>oi,equals:()=>Hs,exactEquals:()=>Fs,fromMat4:()=>vs,fromRotation:()=>cs,fromRotationTranslation:()=>ni,fromRotationTranslationValues:()=>hs,fromTranslation:()=>ls,fromValues:()=>os,getDual:()=>ps,getReal:()=>ds,getTranslation:()=>gs,identity:()=>fs,invert:()=>As,len:()=>Os,length:()=>hi,lerp:()=>bs,mul:()=>Cs,multiply:()=>ai,normalize:()=>zs,rotateAroundAxis:()=>Ss,rotateByQuatAppend:()=>Es,rotateByQuatPrepend:()=>Ts,rotateX:()=>ws,rotateY:()=>Ms,rotateZ:()=>xs,scale:()=>Ls,set:()=>us,setDual:()=>ys,setReal:()=>ms,sqrLen:()=>Is,squaredLength:()=>Ge,str:()=>Ds,translate:()=>_s});var _={};s.r(_),s.d(_,{add:()=>Ys,angle:()=>ha,ceil:()=>Xs,clone:()=>Bs,copy:()=>Ws,create:()=>li,cross:()=>ta,dist:()=>ya,distance:()=>ui,div:()=>ma,divide:()=>fi,dot:()=>qs,equals:()=>fa,exactEquals:()=>va,floor:()=>Us,forEach:()=>wa,fromValues:()=>Ns,inverse:()=>$s,len:()=>ua,length:()=>pi,lerp:()=>ea,max:()=>js,min:()=>Gs,mul:()=>pa,multiply:()=>vi,negate:()=>Qs,normalize:()=>Js,random:()=>ra,rotate:()=>oa,round:()=>ks,scale:()=>Ks,scaleAndAdd:()=>Zs,set:()=>Vs,sqrDist:()=>ga,sqrLen:()=>_a,squaredDistance:()=>di,squaredLength:()=>mi,str:()=>ca,sub:()=>da,subtract:()=>ci,transformMat2:()=>ia,transformMat2d:()=>na,transformMat3:()=>sa,transformMat4:()=>aa,zero:()=>la});var v=1e-6,E=typeof Float32Array<"u"?Float32Array:Array,C=Math.random;function z(t){E=t}var B=Math.PI/180;function D(t){return t*B}function p(t,e){return Math.abs(t-e)<=v*Math.max(1,Math.abs(t),Math.abs(e))}function L(){var t=new E(4);return E!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function R(t){var e=new E(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function H(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function w(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function d(t,e,r,n){var o=new E(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o}function T(t,e,r,n,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t}function S(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function I(t,e){var r=e[0],n=e[1],o=e[2],f=e[3],m=r*f-o*n;return m?(t[0]=f*(m=1/m),t[1]=-n*m,t[2]=-o*m,t[3]=r*m,t):null}function O(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function Y(t){return t[0]*t[3]-t[2]*t[1]}function W(t,e,r){var n=e[0],o=e[1],f=e[2],m=e[3],g=r[0],x=r[1],b=r[2],N=r[3];return t[0]=n*g+f*x,t[1]=o*g+m*x,t[2]=n*b+f*N,t[3]=o*b+m*N,t}function X(t,e,r){var n=e[0],o=e[1],f=e[2],m=e[3],g=Math.sin(r),x=Math.cos(r);return t[0]=n*x+f*g,t[1]=o*x+m*g,t[2]=n*-g+f*x,t[3]=o*-g+m*x,t}function J(t,e,r){var o=e[1],f=e[2],m=e[3],g=r[0],x=r[1];return t[0]=e[0]*g,t[1]=o*g,t[2]=f*x,t[3]=m*x,t}function tt(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function et(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function nt(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function ct(t){return Math.hypot(t[0],t[1],t[2],t[3])}function ut(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function pt(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function dt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function gt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Pt(t,e){var r=t[0],n=t[1],o=t[2],f=t[3],m=e[0],g=e[1],x=e[2],b=e[3];return Math.abs(r-m)<=v*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(n-g)<=v*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-x)<=v*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(f-b)<=v*Math.max(1,Math.abs(f),Math.abs(b))}function Ct(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function Ut(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Lt=W,bt=dt;function yt(){var t=new E(6);return E!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function At(t){var e=new E(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Ft(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Gt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function jt(t,e,r,n,o,f){var m=new E(6);return m[0]=t,m[1]=e,m[2]=r,m[3]=n,m[4]=o,m[5]=f,m}function It(t,e,r,n,o,f,m){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=f,t[5]=m,t}function qt(t,e){var r=e[0],n=e[1],o=e[2],f=e[3],m=e[4],g=e[5],x=r*f-n*o;return x?(t[0]=f*(x=1/x),t[1]=-n*x,t[2]=-o*x,t[3]=r*x,t[4]=(o*g-f*m)*x,t[5]=(n*m-r*g)*x,t):null}function Bt(t){return t[0]*t[3]-t[1]*t[2]}function kt(t,e,r){var n=e[0],o=e[1],f=e[2],m=e[3],g=e[4],x=e[5],b=r[0],N=r[1],j=r[2],K=r[3],k=r[4],Q=r[5];return t[0]=n*b+f*N,t[1]=o*b+m*N,t[2]=n*j+f*K,t[3]=o*j+m*K,t[4]=n*k+f*Q+g,t[5]=o*k+m*Q+x,t}function Se(t,e,r){var n=e[0],o=e[1],f=e[2],m=e[3],g=e[4],x=e[5],b=Math.sin(r),N=Math.cos(r);return t[0]=n*N+f*b,t[1]=o*N+m*b,t[2]=n*-b+f*N,t[3]=o*-b+m*N,t[4]=g,t[5]=x,t}function Pe(t,e,r){var o=e[1],f=e[2],m=e[3],g=e[4],x=e[5],b=r[0],N=r[1];return t[0]=e[0]*b,t[1]=o*b,t[2]=f*N,t[3]=m*N,t[4]=g,t[5]=x,t}function ne(t,e,r){var n=e[0],o=e[1],f=e[2],m=e[3],g=e[4],x=e[5],b=r[0],N=r[1];return t[0]=n,t[1]=o,t[2]=f,t[3]=m,t[4]=n*b+f*N+g,t[5]=o*b+m*N+x,t}function zt(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function je(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function ke(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function Ke(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function Ze(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function Qe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function ve(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function Ce(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function $e(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function Le(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function se(t,e){var r=t[0],n=t[1],o=t[2],f=t[3],m=t[4],g=t[5],x=e[0],b=e[1],N=e[2],j=e[3],K=e[4],k=e[5];return Math.abs(r-x)<=v*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(n-b)<=v*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(o-N)<=v*Math.max(1,Math.abs(o),Math.abs(N))&&Math.abs(f-j)<=v*Math.max(1,Math.abs(f),Math.abs(j))&&Math.abs(m-K)<=v*Math.max(1,Math.abs(m),Math.abs(K))&&Math.abs(g-k)<=v*Math.max(1,Math.abs(g),Math.abs(k))}var fe=kt,Je=ve;function be(){var t=new E(9);return E!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function qe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function tr(t){var e=new E(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function er(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function ae(t,e,r,n,o,f,m,g,x){var b=new E(9);return b[0]=t,b[1]=e,b[2]=r,b[3]=n,b[4]=o,b[5]=f,b[6]=m,b[7]=g,b[8]=x,b}function rr(t,e,r,n,o,f,m,g,x,b){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=f,t[5]=m,t[6]=g,t[7]=x,t[8]=b,t}function ir(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ae(t,e){if(t===e){var r=e[1],n=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Re(t,e){var r=e[0],n=e[1],o=e[2],f=e[3],m=e[4],g=e[5],x=e[6],b=e[7],N=e[8],j=N*m-g*b,K=-N*f+g*x,k=b*f-m*x,Q=r*j+n*K+o*k;return Q?(t[0]=j*(Q=1/Q),t[1]=(-N*n+o*b)*Q,t[2]=(g*n-o*m)*Q,t[3]=K*Q,t[4]=(N*r-o*x)*Q,t[5]=(-g*r+o*f)*Q,t[6]=k*Q,t[7]=(-b*r+n*x)*Q,t[8]=(m*r-n*f)*Q,t):null}function ue(t,e){var r=e[0],n=e[1],o=e[2],f=e[3],m=e[4],g=e[5],x=e[6],b=e[7],N=e[8];return t[0]=m*N-g*b,t[1]=o*b-n*N,t[2]=n*g-o*m,t[3]=g*x-f*N,t[4]=r*N-o*x,t[5]=o*f-r*g,t[6]=f*b-m*x,t[7]=n*x-r*b,t[8]=r*m-n*f,t}function nr(t){var o=t[3],f=t[4],m=t[5],g=t[6],x=t[7],b=t[8];return t[0]*(b*f-m*x)+t[1]*(-b*o+m*g)+t[2]*(x*o-f*g)}function Oe(t,e,r){var n=e[0],o=e[1],f=e[2],m=e[3],g=e[4],x=e[5],b=e[6],N=e[7],j=e[8],K=r[0],k=r[1],Q=r[2],q=r[3],Z=r[4],rt=r[5],ot=r[6],st=r[7],at=r[8];return t[0]=K*n+k*m+Q*b,t[1]=K*o+k*g+Q*N,t[2]=K*f+k*x+Q*j,t[3]=q*n+Z*m+rt*b,t[4]=q*o+Z*g+rt*N,t[5]=q*f+Z*x+rt*j,t[6]=ot*n+st*m+at*b,t[7]=ot*o+st*g+at*N,t[8]=ot*f+st*x+at*j,t}function sr(t,e,r){var n=e[0],o=e[1],f=e[2],m=e[3],g=e[4],x=e[5],b=e[6],N=e[7],j=e[8],K=r[0],k=r[1];return t[0]=n,t[1]=o,t[2]=f,t[3]=m,t[4]=g,t[5]=x,t[6]=K*n+k*m+b,t[7]=K*o+k*g+N,t[8]=K*f+k*x+j,t}function Ie(t,e,r){var n=e[0],o=e[1],f=e[2],m=e[3],g=e[4],x=e[5],b=e[6],N=e[7],j=e[8],K=Math.sin(r),k=Math.cos(r);return t[0]=k*n+K*m,t[1]=k*o+K*g,t[2]=k*f+K*x,t[3]=k*m-K*n,t[4]=k*g-K*o,t[5]=k*x-K*f,t[6]=b,t[7]=N,t[8]=j,t}function ar(t,e,r){var n=r[0],o=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function or(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function hr(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function oe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function lr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function de(t,e){var r=e[0],n=e[1],o=e[2],f=e[3],m=r+r,g=n+n,x=o+o,b=r*m,N=n*m,j=n*g,K=o*m,k=o*g,Q=o*x,q=f*m,Z=f*g,rt=f*x;return t[0]=1-j-Q,t[3]=N-rt,t[6]=K+Z,t[1]=N+rt,t[4]=1-b-Q,t[7]=k-q,t[2]=K-Z,t[5]=k+q,t[8]=1-b-j,t}function ze(t,e){var r=e[0],n=e[1],o=e[2],f=e[3],m=e[4],g=e[5],x=e[6],b=e[7],N=e[8],j=e[9],K=e[10],k=e[11],Q=e[12],q=e[13],Z=e[14],rt=e[15],ot=r*g-n*m,st=r*x-o*m,at=r*b-f*m,vt=n*x-o*g,lt=n*b-f*g,Et=o*b-f*x,wt=N*q-j*Q,Mt=N*Z-K*Q,_t=N*rt-k*Q,Tt=j*Z-K*q,xt=j*rt-k*q,St=K*rt-k*Z,ft=ot*St-st*xt+at*Tt+vt*_t-lt*Mt+Et*wt;return ft?(t[0]=(g*St-x*xt+b*Tt)*(ft=1/ft),t[1]=(x*_t-m*St-b*Mt)*ft,t[2]=(m*xt-g*_t+b*wt)*ft,t[3]=(o*xt-n*St-f*Tt)*ft,t[4]=(r*St-o*_t+f*Mt)*ft,t[5]=(n*_t-r*xt-f*wt)*ft,t[6]=(q*Et-Z*lt+rt*vt)*ft,t[7]=(Z*at-Q*Et-rt*st)*ft,t[8]=(Q*lt-q*at+rt*ot)*ft,t):null}function De(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Fe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function He(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function pe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function Qt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function te(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function ee(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function me(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function cr(t,e){var r=t[0],n=t[1],o=t[2],f=t[3],m=t[4],g=t[5],x=t[6],b=t[7],N=t[8],j=e[0],K=e[1],k=e[2],Q=e[3],q=e[4],Z=e[5],rt=e[6],ot=e[7],st=e[8];return Math.abs(r-j)<=v*Math.max(1,Math.abs(r),Math.abs(j))&&Math.abs(n-K)<=v*Math.max(1,Math.abs(n),Math.abs(K))&&Math.abs(o-k)<=v*Math.max(1,Math.abs(o),Math.abs(k))&&Math.abs(f-Q)<=v*Math.max(1,Math.abs(f),Math.abs(Q))&&Math.abs(m-q)<=v*Math.max(1,Math.abs(m),Math.abs(q))&&Math.abs(g-Z)<=v*Math.max(1,Math.abs(g),Math.abs(Z))&&Math.abs(x-rt)<=v*Math.max(1,Math.abs(x),Math.abs(rt))&&Math.abs(b-ot)<=v*Math.max(1,Math.abs(b),Math.abs(ot))&&Math.abs(N-st)<=v*Math.max(1,Math.abs(N),Math.abs(st))}var he=Oe,Dt=Qt;function $t(){var t=new E(16);return E!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Kt(t){var e=new E(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function re(t,e,r,n,o,f,m,g,x,b,N,j,K,k,Q,q){var Z=new E(16);return Z[0]=t,Z[1]=e,Z[2]=r,Z[3]=n,Z[4]=o,Z[5]=f,Z[6]=m,Z[7]=g,Z[8]=x,Z[9]=b,Z[10]=N,Z[11]=j,Z[12]=K,Z[13]=k,Z[14]=Q,Z[15]=q,Z}function Nt(t,e,r,n,o,f,m,g,x,b,N,j,K,k,Q,q,Z){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=f,t[5]=m,t[6]=g,t[7]=x,t[8]=b,t[9]=N,t[10]=j,t[11]=K,t[12]=k,t[13]=Q,t[14]=q,t[15]=Z,t}function Wt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function vr(t,e){if(t===e){var r=e[1],n=e[2],o=e[3],f=e[6],m=e[7],g=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=f,t[11]=e[14],t[12]=o,t[13]=m,t[14]=g}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Be(t,e){var r=e[0],n=e[1],o=e[2],f=e[3],m=e[4],g=e[5],x=e[6],b=e[7],N=e[8],j=e[9],K=e[10],k=e[11],Q=e[12],q=e[13],Z=e[14],rt=e[15],ot=r*g-n*m,st=r*x-o*m,at=r*b-f*m,vt=n*x-o*g,lt=n*b-f*g,Et=o*b-f*x,wt=N*q-j*Q,Mt=N*Z-K*Q,_t=N*rt-k*Q,Tt=j*Z-K*q,xt=j*rt-k*q,St=K*rt-k*Z,ft=ot*St-st*xt+at*Tt+vt*_t-lt*Mt+Et*wt;return ft?(t[0]=(g*St-x*xt+b*Tt)*(ft=1/ft),t[1]=(o*xt-n*St-f*Tt)*ft,t[2]=(q*Et-Z*lt+rt*vt)*ft,t[3]=(K*lt-j*Et-k*vt)*ft,t[4]=(x*_t-m*St-b*Mt)*ft,t[5]=(r*St-o*_t+f*Mt)*ft,t[6]=(Z*at-Q*Et-rt*st)*ft,t[7]=(N*Et-K*at+k*st)*ft,t[8]=(m*xt-g*_t+b*wt)*ft,t[9]=(n*_t-r*xt-f*wt)*ft,t[10]=(Q*lt-q*at+rt*ot)*ft,t[11]=(j*at-N*lt-k*ot)*ft,t[12]=(g*Mt-m*Tt-x*wt)*ft,t[13]=(r*Tt-n*Mt+o*wt)*ft,t[14]=(q*st-Q*vt-Z*ot)*ft,t[15]=(N*vt-j*st+K*ot)*ft,t):null}function le(t,e){var r=e[0],n=e[1],o=e[2],f=e[3],m=e[4],g=e[5],x=e[6],b=e[7],N=e[8],j=e[9],K=e[10],k=e[11],Q=e[12],q=e[13],Z=e[14],rt=e[15];return t[0]=g*(K*rt-k*Z)-j*(x*rt-b*Z)+q*(x*k-b*K),t[1]=-(n*(K*rt-k*Z)-j*(o*rt-f*Z)+q*(o*k-f*K)),t[2]=n*(x*rt-b*Z)-g*(o*rt-f*Z)+q*(o*b-f*x),t[3]=-(n*(x*k-b*K)-g*(o*k-f*K)+j*(o*b-f*x)),t[4]=-(m*(K*rt-k*Z)-N*(x*rt-b*Z)+Q*(x*k-b*K)),t[5]=r*(K*rt-k*Z)-N*(o*rt-f*Z)+Q*(o*k-f*K),t[6]=-(r*(x*rt-b*Z)-m*(o*rt-f*Z)+Q*(o*b-f*x)),t[7]=r*(x*k-b*K)-m*(o*k-f*K)+N*(o*b-f*x),t[8]=m*(j*rt-k*q)-N*(g*rt-b*q)+Q*(g*k-b*j),t[9]=-(r*(j*rt-k*q)-N*(n*rt-f*q)+Q*(n*k-f*j)),t[10]=r*(g*rt-b*q)-m*(n*rt-f*q)+Q*(n*b-f*g),t[11]=-(r*(g*k-b*j)-m*(n*k-f*j)+N*(n*b-f*g)),t[12]=-(m*(j*Z-K*q)-N*(g*Z-x*q)+Q*(g*K-x*j)),t[13]=r*(j*Z-K*q)-N*(n*Z-o*q)+Q*(n*K-o*j),t[14]=-(r*(g*Z-x*q)-m*(n*Z-o*q)+Q*(n*x-o*g)),t[15]=r*(g*K-x*j)-m*(n*K-o*j)+N*(n*x-o*g),t}function Ht(t){var e=t[0],r=t[1],n=t[2],o=t[3],f=t[4],m=t[5],g=t[6],x=t[7],b=t[8],N=t[9],j=t[10],K=t[11],k=t[12],Q=t[13],q=t[14],Z=t[15];return(e*m-r*f)*(j*Z-K*q)-(e*g-n*f)*(N*Z-K*Q)+(e*x-o*f)*(N*q-j*Q)+(r*g-n*m)*(b*Z-K*k)-(r*x-o*m)*(b*q-j*k)+(n*x-o*g)*(b*Q-N*k)}function ie(t,e,r){var n=e[0],o=e[1],f=e[2],m=e[3],g=e[4],x=e[5],b=e[6],N=e[7],j=e[8],K=e[9],k=e[10],Q=e[11],q=e[12],Z=e[13],rt=e[14],ot=e[15],st=r[0],at=r[1],vt=r[2],lt=r[3];return t[0]=st*n+at*g+vt*j+lt*q,t[1]=st*o+at*x+vt*K+lt*Z,t[2]=st*f+at*b+vt*k+lt*rt,t[3]=st*m+at*N+vt*Q+lt*ot,t[4]=(st=r[4])*n+(at=r[5])*g+(vt=r[6])*j+(lt=r[7])*q,t[5]=st*o+at*x+vt*K+lt*Z,t[6]=st*f+at*b+vt*k+lt*rt,t[7]=st*m+at*N+vt*Q+lt*ot,t[8]=(st=r[8])*n+(at=r[9])*g+(vt=r[10])*j+(lt=r[11])*q,t[9]=st*o+at*x+vt*K+lt*Z,t[10]=st*f+at*b+vt*k+lt*rt,t[11]=st*m+at*N+vt*Q+lt*ot,t[12]=(st=r[12])*n+(at=r[13])*g+(vt=r[14])*j+(lt=r[15])*q,t[13]=st*o+at*x+vt*K+lt*Z,t[14]=st*f+at*b+vt*k+lt*rt,t[15]=st*m+at*N+vt*Q+lt*ot,t}function ye(t,e,r){var m,g,x,b,N,j,K,k,Q,q,Z,rt,n=r[0],o=r[1],f=r[2];return e===t?(t[12]=e[0]*n+e[4]*o+e[8]*f+e[12],t[13]=e[1]*n+e[5]*o+e[9]*f+e[13],t[14]=e[2]*n+e[6]*o+e[10]*f+e[14],t[15]=e[3]*n+e[7]*o+e[11]*f+e[15]):(g=e[1],x=e[2],b=e[3],N=e[4],j=e[5],K=e[6],k=e[7],Q=e[8],q=e[9],Z=e[10],rt=e[11],t[0]=m=e[0],t[1]=g,t[2]=x,t[3]=b,t[4]=N,t[5]=j,t[6]=K,t[7]=k,t[8]=Q,t[9]=q,t[10]=Z,t[11]=rt,t[12]=m*n+N*o+Q*f+e[12],t[13]=g*n+j*o+q*f+e[13],t[14]=x*n+K*o+Z*f+e[14],t[15]=b*n+k*o+rt*f+e[15]),t}function ge(t,e,r){var n=r[0],o=r[1],f=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*f,t[9]=e[9]*f,t[10]=e[10]*f,t[11]=e[11]*f,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function _e(t,e,r,n){var x,b,N,j,K,k,Q,q,Z,rt,ot,st,at,vt,lt,Et,wt,Mt,_t,Tt,xt,St,ft,Xt,o=n[0],f=n[1],m=n[2],g=Math.hypot(o,f,m);return g<v?null:(o*=g=1/g,f*=g,m*=g,x=Math.sin(r),b=Math.cos(r),K=e[1],k=e[2],Q=e[3],Z=e[5],rt=e[6],ot=e[7],at=e[9],vt=e[10],lt=e[11],_t=o*f*(N=1-b)-m*x,Tt=f*f*N+b,xt=m*f*N+o*x,St=o*m*N+f*x,ft=f*m*N-o*x,Xt=m*m*N+b,t[0]=(j=e[0])*(Et=o*o*N+b)+(q=e[4])*(wt=f*o*N+m*x)+(st=e[8])*(Mt=m*o*N-f*x),t[1]=K*Et+Z*wt+at*Mt,t[2]=k*Et+rt*wt+vt*Mt,t[3]=Q*Et+ot*wt+lt*Mt,t[4]=j*_t+q*Tt+st*xt,t[5]=K*_t+Z*Tt+at*xt,t[6]=k*_t+rt*Tt+vt*xt,t[7]=Q*_t+ot*Tt+lt*xt,t[8]=j*St+q*ft+st*Xt,t[9]=K*St+Z*ft+at*Xt,t[10]=k*St+rt*ft+vt*Xt,t[11]=Q*St+ot*ft+lt*Xt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function we(t,e,r){var n=Math.sin(r),o=Math.cos(r),f=e[4],m=e[5],g=e[6],x=e[7],b=e[8],N=e[9],j=e[10],K=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=f*o+b*n,t[5]=m*o+N*n,t[6]=g*o+j*n,t[7]=x*o+K*n,t[8]=b*o-f*n,t[9]=N*o-m*n,t[10]=j*o-g*n,t[11]=K*o-x*n,t}function ce(t,e,r){var n=Math.sin(r),o=Math.cos(r),f=e[0],m=e[1],g=e[2],x=e[3],b=e[8],N=e[9],j=e[10],K=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=f*o-b*n,t[1]=m*o-N*n,t[2]=g*o-j*n,t[3]=x*o-K*n,t[8]=f*n+b*o,t[9]=m*n+N*o,t[10]=g*n+j*o,t[11]=x*n+K*o,t}function Zt(t,e,r){var n=Math.sin(r),o=Math.cos(r),f=e[0],m=e[1],g=e[2],x=e[3],b=e[4],N=e[5],j=e[6],K=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=f*o+b*n,t[1]=m*o+N*n,t[2]=g*o+j*n,t[3]=x*o+K*n,t[4]=b*o-f*n,t[5]=N*o-m*n,t[6]=j*o-g*n,t[7]=K*o-x*n,t}function fr(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Ne(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Me(t,e,r){var g,x,b,n=r[0],o=r[1],f=r[2],m=Math.hypot(n,o,f);return m<v?null:(n*=m=1/m,o*=m,f*=m,g=Math.sin(e),x=Math.cos(e),t[0]=n*n*(b=1-x)+x,t[1]=o*n*b+f*g,t[2]=f*n*b-o*g,t[3]=0,t[4]=n*o*b-f*g,t[5]=o*o*b+x,t[6]=f*o*b+n*g,t[7]=0,t[8]=n*f*b+o*g,t[9]=o*f*b-n*g,t[10]=f*f*b+x,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function We(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ur(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function F(t,e,r){var n=e[0],o=e[1],f=e[2],m=e[3],g=n+n,x=o+o,b=f+f,N=n*g,j=n*x,K=n*b,k=o*x,Q=o*b,q=f*b,Z=m*g,rt=m*x,ot=m*b;return t[0]=1-(k+q),t[1]=j+ot,t[2]=K-rt,t[3]=0,t[4]=j-ot,t[5]=1-(N+q),t[6]=Q+Z,t[7]=0,t[8]=K+rt,t[9]=Q-Z,t[10]=1-(N+k),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function G(t,e){var r=new E(3),n=-e[0],o=-e[1],f=-e[2],m=e[3],g=e[4],x=e[5],b=e[6],N=e[7],j=n*n+o*o+f*f+m*m;return j>0?(r[0]=2*(g*m+N*n+x*f-b*o)/j,r[1]=2*(x*m+N*o+b*n-g*f)/j,r[2]=2*(b*m+N*f+g*o-x*n)/j):(r[0]=2*(g*m+N*n+x*f-b*o),r[1]=2*(x*m+N*o+b*n-g*f),r[2]=2*(b*m+N*f+g*o-x*n)),F(t,e,r),t}function $(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function it(t,e){var f=e[4],m=e[5],g=e[6],x=e[8],b=e[9],N=e[10];return t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(f,m,g),t[2]=Math.hypot(x,b,N),t}function ht(t,e){var r=new E(3);it(r,e);var n=1/r[0],o=1/r[1],f=1/r[2],m=e[0]*n,g=e[1]*o,x=e[2]*f,b=e[4]*n,N=e[5]*o,j=e[6]*f,K=e[8]*n,k=e[9]*o,Q=e[10]*f,q=m+N+Q,Z=0;return q>0?(Z=2*Math.sqrt(q+1),t[3]=.25*Z,t[0]=(j-k)/Z,t[1]=(K-x)/Z,t[2]=(g-b)/Z):m>N&&m>Q?(Z=2*Math.sqrt(1+m-N-Q),t[3]=(j-k)/Z,t[0]=.25*Z,t[1]=(g+b)/Z,t[2]=(K+x)/Z):N>Q?(Z=2*Math.sqrt(1+N-m-Q),t[3]=(K-x)/Z,t[0]=(g+b)/Z,t[1]=.25*Z,t[2]=(j+k)/Z):(Z=2*Math.sqrt(1+Q-m-N),t[3]=(g-b)/Z,t[0]=(K+x)/Z,t[1]=(j+k)/Z,t[2]=.25*Z),t}function mt(t,e,r,n){var o=e[0],f=e[1],m=e[2],g=e[3],x=o+o,b=f+f,N=m+m,j=o*x,K=o*b,k=o*N,Q=f*b,q=f*N,Z=m*N,rt=g*x,ot=g*b,st=g*N,at=n[0],vt=n[1],lt=n[2];return t[0]=(1-(Q+Z))*at,t[1]=(K+st)*at,t[2]=(k-ot)*at,t[3]=0,t[4]=(K-st)*vt,t[5]=(1-(j+Z))*vt,t[6]=(q+rt)*vt,t[7]=0,t[8]=(k+ot)*lt,t[9]=(q-rt)*lt,t[10]=(1-(j+Q))*lt,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function Rt(t,e,r,n,o){var f=e[0],m=e[1],g=e[2],x=e[3],b=f+f,N=m+m,j=g+g,K=f*b,k=f*N,Q=f*j,q=m*N,Z=m*j,rt=g*j,ot=x*b,st=x*N,at=x*j,vt=n[0],lt=n[1],Et=n[2],wt=o[0],Mt=o[1],_t=o[2],Tt=(1-(q+rt))*vt,xt=(k+at)*vt,St=(Q-st)*vt,ft=(k-at)*lt,Xt=(1-(K+rt))*lt,Ee=(Z+ot)*lt,Te=(Q+st)*Et,yi=(Z-ot)*Et,gi=(1-(K+q))*Et;return t[0]=Tt,t[1]=xt,t[2]=St,t[3]=0,t[4]=ft,t[5]=Xt,t[6]=Ee,t[7]=0,t[8]=Te,t[9]=yi,t[10]=gi,t[11]=0,t[12]=r[0]+wt-(Tt*wt+ft*Mt+Te*_t),t[13]=r[1]+Mt-(xt*wt+Xt*Mt+yi*_t),t[14]=r[2]+_t-(St*wt+Ee*Mt+gi*_t),t[15]=1,t}function Ot(t,e){var r=e[0],n=e[1],o=e[2],f=e[3],m=r+r,g=n+n,x=o+o,b=r*m,N=n*m,j=n*g,K=o*m,k=o*g,Q=o*x,q=f*m,Z=f*g,rt=f*x;return t[0]=1-j-Q,t[1]=N+rt,t[2]=K-Z,t[3]=0,t[4]=N-rt,t[5]=1-b-Q,t[6]=k+q,t[7]=0,t[8]=K+Z,t[9]=k-q,t[10]=1-b-j,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Vt(t,e,r,n,o,f,m){var g=1/(r-e),x=1/(o-n),b=1/(f-m);return t[0]=2*f*g,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*f*x,t[6]=0,t[7]=0,t[8]=(r+e)*g,t[9]=(o+n)*x,t[10]=(m+f)*b,t[11]=-1,t[12]=0,t[13]=0,t[14]=m*f*2*b,t[15]=0,t}function Jt(t,e,r,n,o){var m,f=1/Math.tan(e/2);return t[0]=f/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(t[10]=(o+n)*(m=1/(n-o)),t[14]=2*o*n*m):(t[10]=-1,t[14]=-2*n),t}function _i(t,e,r,n){var o=Math.tan(e.upDegrees*Math.PI/180),f=Math.tan(e.downDegrees*Math.PI/180),m=Math.tan(e.leftDegrees*Math.PI/180),g=Math.tan(e.rightDegrees*Math.PI/180),x=2/(m+g),b=2/(o+f);return t[0]=x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=b,t[6]=0,t[7]=0,t[8]=-(m-g)*x*.5,t[9]=(o-f)*b*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function wi(t,e,r,n,o,f,m){var g=1/(e-r),x=1/(n-o),b=1/(f-m);return t[0]=-2*g,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*x,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*b,t[11]=0,t[12]=(e+r)*g,t[13]=(o+n)*x,t[14]=(m+f)*b,t[15]=1,t}function Mi(t,e,r,n){var o,f,m,g,x,b,N,j,K,k,Q=e[0],q=e[1],Z=e[2],rt=n[0],ot=n[1],st=n[2],at=r[0],vt=r[1],lt=r[2];return Math.abs(Q-at)<v&&Math.abs(q-vt)<v&&Math.abs(Z-lt)<v?Wt(t):(N=Q-at,j=q-vt,K=Z-lt,o=ot*(K*=k=1/Math.hypot(N,j,K))-st*(j*=k),f=st*(N*=k)-rt*K,m=rt*j-ot*N,(k=Math.hypot(o,f,m))?(o*=k=1/k,f*=k,m*=k):(o=0,f=0,m=0),g=j*m-K*f,x=K*o-N*m,b=N*f-j*o,(k=Math.hypot(g,x,b))?(g*=k=1/k,x*=k,b*=k):(g=0,x=0,b=0),t[0]=o,t[1]=g,t[2]=N,t[3]=0,t[4]=f,t[5]=x,t[6]=j,t[7]=0,t[8]=m,t[9]=b,t[10]=K,t[11]=0,t[12]=-(o*Q+f*q+m*Z),t[13]=-(g*Q+x*q+b*Z),t[14]=-(N*Q+j*q+K*Z),t[15]=1,t)}function xi(t,e,r,n){var o=e[0],f=e[1],m=e[2],g=n[0],x=n[1],b=n[2],N=o-r[0],j=f-r[1],K=m-r[2],k=N*N+j*j+K*K;k>0&&(N*=k=1/Math.sqrt(k),j*=k,K*=k);var Q=x*K-b*j,q=b*N-g*K,Z=g*j-x*N;return(k=Q*Q+q*q+Z*Z)>0&&(Q*=k=1/Math.sqrt(k),q*=k,Z*=k),t[0]=Q,t[1]=q,t[2]=Z,t[3]=0,t[4]=j*Z-K*q,t[5]=K*Q-N*Z,t[6]=N*q-j*Q,t[7]=0,t[8]=N,t[9]=j,t[10]=K,t[11]=0,t[12]=o,t[13]=f,t[14]=m,t[15]=1,t}function Ei(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Ti(t){return Math.hypot(t[0],t[1],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Si(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Er(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function Pi(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function Ci(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function Li(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function bi(t,e){var r=t[0],n=t[1],o=t[2],f=t[3],m=t[4],g=t[5],x=t[6],b=t[7],N=t[8],j=t[9],K=t[10],k=t[11],Q=t[12],q=t[13],Z=t[14],rt=t[15],ot=e[0],st=e[1],at=e[2],vt=e[3],lt=e[4],Et=e[5],wt=e[6],Mt=e[7],_t=e[8],Tt=e[9],xt=e[10],St=e[11],ft=e[12],Xt=e[13],Ee=e[14],Te=e[15];return Math.abs(r-ot)<=v*Math.max(1,Math.abs(r),Math.abs(ot))&&Math.abs(n-st)<=v*Math.max(1,Math.abs(n),Math.abs(st))&&Math.abs(o-at)<=v*Math.max(1,Math.abs(o),Math.abs(at))&&Math.abs(f-vt)<=v*Math.max(1,Math.abs(f),Math.abs(vt))&&Math.abs(m-lt)<=v*Math.max(1,Math.abs(m),Math.abs(lt))&&Math.abs(g-Et)<=v*Math.max(1,Math.abs(g),Math.abs(Et))&&Math.abs(x-wt)<=v*Math.max(1,Math.abs(x),Math.abs(wt))&&Math.abs(b-Mt)<=v*Math.max(1,Math.abs(b),Math.abs(Mt))&&Math.abs(N-_t)<=v*Math.max(1,Math.abs(N),Math.abs(_t))&&Math.abs(j-Tt)<=v*Math.max(1,Math.abs(j),Math.abs(Tt))&&Math.abs(K-xt)<=v*Math.max(1,Math.abs(K),Math.abs(xt))&&Math.abs(k-St)<=v*Math.max(1,Math.abs(k),Math.abs(St))&&Math.abs(Q-ft)<=v*Math.max(1,Math.abs(Q),Math.abs(ft))&&Math.abs(q-Xt)<=v*Math.max(1,Math.abs(q),Math.abs(Xt))&&Math.abs(Z-Ee)<=v*Math.max(1,Math.abs(Z),Math.abs(Ee))&&Math.abs(rt-Te)<=v*Math.max(1,Math.abs(rt),Math.abs(Te))}var Ai=ie,Ri=Er;function dr(){var t=new E(3);return E!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Oi(t){var e=new E(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Tr(t){return Math.hypot(t[0],t[1],t[2])}function xe(t,e,r){var n=new E(3);return n[0]=t,n[1]=e,n[2]=r,n}function Ii(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function zi(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function Di(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Sr(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function Pr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function Cr(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function Fi(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Hi(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Bi(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function Ni(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function Wi(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Vi(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function Yi(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function Lr(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])}function br(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return r*r+n*n+o*o}function Ar(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function Xi(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Ui(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Ve(t,e){var r=e[0],n=e[1],o=e[2],f=r*r+n*n+o*o;return f>0&&(f=1/Math.sqrt(f)),t[0]=e[0]*f,t[1]=e[1]*f,t[2]=e[2]*f,t}function pr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ye(t,e,r){var n=e[0],o=e[1],f=e[2],m=r[0],g=r[1],x=r[2];return t[0]=o*x-f*g,t[1]=f*m-n*x,t[2]=n*g-o*m,t}function Gi(t,e,r,n){var o=e[0],f=e[1],m=e[2];return t[0]=o+n*(r[0]-o),t[1]=f+n*(r[1]-f),t[2]=m+n*(r[2]-m),t}function ji(t,e,r,n,o,f){var m=f*f,g=m*(2*f-3)+1,x=m*(f-2)+f,b=m*(f-1),N=m*(3-2*f);return t[0]=e[0]*g+r[0]*x+n[0]*b+o[0]*N,t[1]=e[1]*g+r[1]*x+n[1]*b+o[1]*N,t[2]=e[2]*g+r[2]*x+n[2]*b+o[2]*N,t}function ki(t,e,r,n,o,f){var m=1-f,g=m*m,x=f*f,b=g*m,N=3*f*g,j=3*x*m,K=x*f;return t[0]=e[0]*b+r[0]*N+n[0]*j+o[0]*K,t[1]=e[1]*b+r[1]*N+n[1]*j+o[1]*K,t[2]=e[2]*b+r[2]*N+n[2]*j+o[2]*K,t}function Ki(t,e){e=e||1;var r=2*C()*Math.PI,n=2*C()-1,o=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=n*e,t}function Zi(t,e,r){var n=e[0],o=e[1],f=e[2],m=r[3]*n+r[7]*o+r[11]*f+r[15];return t[0]=(r[0]*n+r[4]*o+r[8]*f+r[12])/(m=m||1),t[1]=(r[1]*n+r[5]*o+r[9]*f+r[13])/m,t[2]=(r[2]*n+r[6]*o+r[10]*f+r[14])/m,t}function Qi(t,e,r){var n=e[0],o=e[1],f=e[2];return t[0]=n*r[0]+o*r[3]+f*r[6],t[1]=n*r[1]+o*r[4]+f*r[7],t[2]=n*r[2]+o*r[5]+f*r[8],t}function $i(t,e,r){var n=r[0],o=r[1],f=r[2],g=e[0],x=e[1],b=e[2],N=o*b-f*x,j=f*g-n*b,K=n*x-o*g,k=o*K-f*j,Q=f*N-n*K,q=n*j-o*N,Z=2*r[3];return j*=Z,K*=Z,Q*=2,q*=2,t[0]=g+(N*=Z)+(k*=2),t[1]=x+j+Q,t[2]=b+K+q,t}function Ji(t,e,r,n){var o=[],f=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],f[0]=o[0],f[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),f[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=f[0]+r[0],t[1]=f[1]+r[1],t[2]=f[2]+r[2],t}function qi(t,e,r,n){var o=[],f=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],f[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),f[1]=o[1],f[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=f[0]+r[0],t[1]=f[1]+r[1],t[2]=f[2]+r[2],t}function tn(t,e,r,n){var o=[],f=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],f[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),f[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),f[2]=o[2],t[0]=f[0]+r[0],t[1]=f[1]+r[1],t[2]=f[2]+r[2],t}function en(t,e){var r=xe(t[0],t[1],t[2]),n=xe(e[0],e[1],e[2]);Ve(r,r),Ve(n,n);var o=pr(r,n);return o>1?0:o<-1?Math.PI:Math.acos(o)}function rn(t){return t[0]=0,t[1]=0,t[2]=0,t}function nn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function sn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function an(t,e){var r=t[0],n=t[1],o=t[2],f=e[0],m=e[1],g=e[2];return Math.abs(r-f)<=v*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-m)<=v*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(o-g)<=v*Math.max(1,Math.abs(o),Math.abs(g))}var t,on=Sr,hn=Pr,ln=Cr,cn=Lr,vn=br,Rr=Tr,fn=Ar,un=(t=dr(),function(e,r,n,o,f,m){var g,x;for(r||(r=3),n||(n=0),x=o?Math.min(o*r+n,e.length):e.length,g=n;g<x;g+=r)t[0]=e[g],t[1]=e[g+1],t[2]=e[g+2],f(t,t,m),e[g]=t[0],e[g+1]=t[1],e[g+2]=t[2];return e});function Or(){var t=new E(4);return E!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Ir(t){var e=new E(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function zr(t,e,r,n){var o=new E(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o}function Dr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Fr(t,e,r,n,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t}function Hr(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function Br(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function Nr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function Wr(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function dn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function pn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function mn(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function yn(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function gn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Vr(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function _n(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function Yr(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3])}function Xr(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2],f=e[3]-t[3];return r*r+n*n+o*o+f*f}function mr(t){return Math.hypot(t[0],t[1],t[2],t[3])}function yr(t){var e=t[0],r=t[1],n=t[2],o=t[3];return e*e+r*r+n*n+o*o}function wn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function Mn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Ur(t,e){var r=e[0],n=e[1],o=e[2],f=e[3],m=r*r+n*n+o*o+f*f;return m>0&&(m=1/Math.sqrt(m)),t[0]=r*m,t[1]=n*m,t[2]=o*m,t[3]=f*m,t}function Gr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function xn(t,e,r,n){var o=r[0]*n[1]-r[1]*n[0],f=r[0]*n[2]-r[2]*n[0],m=r[0]*n[3]-r[3]*n[0],g=r[1]*n[2]-r[2]*n[1],x=r[1]*n[3]-r[3]*n[1],b=r[2]*n[3]-r[3]*n[2],N=e[0],j=e[1],K=e[2],k=e[3];return t[0]=j*b-K*x+k*g,t[1]=-N*b+K*m-k*f,t[2]=N*x-j*m+k*o,t[3]=-N*g+j*f-K*o,t}function jr(t,e,r,n){var o=e[0],f=e[1],m=e[2],g=e[3];return t[0]=o+n*(r[0]-o),t[1]=f+n*(r[1]-f),t[2]=m+n*(r[2]-m),t[3]=g+n*(r[3]-g),t}function En(t,e){var r,n,o,f,m,g;e=e||1;do{m=(r=2*C()-1)*r+(n=2*C()-1)*n}while(m>=1);do{g=(o=2*C()-1)*o+(f=2*C()-1)*f}while(g>=1);var x=Math.sqrt((1-m)/g);return t[0]=e*r,t[1]=e*n,t[2]=e*o*x,t[3]=e*f*x,t}function Tn(t,e,r){var n=e[0],o=e[1],f=e[2],m=e[3];return t[0]=r[0]*n+r[4]*o+r[8]*f+r[12]*m,t[1]=r[1]*n+r[5]*o+r[9]*f+r[13]*m,t[2]=r[2]*n+r[6]*o+r[10]*f+r[14]*m,t[3]=r[3]*n+r[7]*o+r[11]*f+r[15]*m,t}function Sn(t,e,r){var n=e[0],o=e[1],f=e[2],m=r[0],g=r[1],x=r[2],b=r[3],N=b*n+g*f-x*o,j=b*o+x*n-m*f,K=b*f+m*o-g*n,k=-m*n-g*o-x*f;return t[0]=N*b+k*-m+j*-x-K*-g,t[1]=j*b+k*-g+K*-m-N*-x,t[2]=K*b+k*-x+N*-g-j*-m,t[3]=e[3],t}function Pn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function Cn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function kr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Kr(t,e){var r=t[0],n=t[1],o=t[2],f=t[3],m=e[0],g=e[1],x=e[2],b=e[3];return Math.abs(r-m)<=v*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(n-g)<=v*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-x)<=v*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(f-b)<=v*Math.max(1,Math.abs(f),Math.abs(b))}var Ln=Br,bn=Nr,An=Wr,Rn=Yr,On=Xr,In=mr,zn=yr,Dn=function(){var t=Or();return function(e,r,n,o,f,m){var g,x;for(r||(r=4),n||(n=0),x=o?Math.min(o*r+n,e.length):e.length,g=n;g<x;g+=r)t[0]=e[g],t[1]=e[g+1],t[2]=e[g+2],t[3]=e[g+3],f(t,t,m),e[g]=t[0],e[g+1]=t[1],e[g+2]=t[2],e[g+3]=t[3];return e}}();function Xe(){var t=new E(4);return E!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Fn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Zr(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function Hn(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>v?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function Bn(t,e){var r=_r(t,e);return Math.acos(2*r*r-1)}function Qr(t,e,r){var n=e[0],o=e[1],f=e[2],m=e[3],g=r[0],x=r[1],b=r[2],N=r[3];return t[0]=n*N+m*g+o*b-f*x,t[1]=o*N+m*x+f*g-n*b,t[2]=f*N+m*b+n*x-o*g,t[3]=m*N-n*g-o*x-f*b,t}function $r(t,e,r){r*=.5;var n=e[0],o=e[1],f=e[2],m=e[3],g=Math.sin(r),x=Math.cos(r);return t[0]=n*x+m*g,t[1]=o*x+f*g,t[2]=f*x-o*g,t[3]=m*x-n*g,t}function Jr(t,e,r){r*=.5;var n=e[0],o=e[1],f=e[2],m=e[3],g=Math.sin(r),x=Math.cos(r);return t[0]=n*x-f*g,t[1]=o*x+m*g,t[2]=f*x+n*g,t[3]=m*x-o*g,t}function qr(t,e,r){r*=.5;var n=e[0],o=e[1],f=e[2],m=e[3],g=Math.sin(r),x=Math.cos(r);return t[0]=n*x+o*g,t[1]=o*x-n*g,t[2]=f*x+m*g,t[3]=m*x-f*g,t}function Nn(t,e){var r=e[0],n=e[1],o=e[2];return t[0]=r,t[1]=n,t[2]=o,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-o*o)),t}function ti(t,e){var r=e[0],n=e[1],o=e[2],f=e[3],m=Math.sqrt(r*r+n*n+o*o),g=Math.exp(f),x=m>0?g*Math.sin(m)/m:0;return t[0]=r*x,t[1]=n*x,t[2]=o*x,t[3]=g*Math.cos(m),t}function ei(t,e){var r=e[0],n=e[1],o=e[2],f=e[3],m=Math.sqrt(r*r+n*n+o*o),g=m>0?Math.atan2(m,f)/m:0;return t[0]=r*g,t[1]=n*g,t[2]=o*g,t[3]=.5*Math.log(r*r+n*n+o*o+f*f),t}function Wn(t,e,r){return ei(t,e),ii(t,t,r),ti(t,t),t}function Ue(t,e,r,n){var K,k,Q,q,Z,o=e[0],f=e[1],m=e[2],g=e[3],x=r[0],b=r[1],N=r[2],j=r[3];return(k=o*x+f*b+m*N+g*j)<0&&(k=-k,x=-x,b=-b,N=-N,j=-j),1-k>v?(K=Math.acos(k),Q=Math.sin(K),q=Math.sin((1-n)*K)/Q,Z=Math.sin(n*K)/Q):(q=1-n,Z=n),t[0]=q*o+Z*x,t[1]=q*f+Z*b,t[2]=q*m+Z*N,t[3]=q*g+Z*j,t}function Vn(t){var e=C(),r=C(),n=C(),o=Math.sqrt(1-e),f=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*r),t[1]=o*Math.cos(2*Math.PI*r),t[2]=f*Math.sin(2*Math.PI*n),t[3]=f*Math.cos(2*Math.PI*n),t}function Yn(t,e){var r=e[0],n=e[1],o=e[2],f=e[3],m=r*r+n*n+o*o+f*f,g=m?1/m:0;return t[0]=-r*g,t[1]=-n*g,t[2]=-o*g,t[3]=f*g,t}function Xn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function ri(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,t[0]=(e[5]-e[7])*(n=.5/n),t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var f=(o+1)%3,m=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*f+f]-e[3*m+m]+1),t[o]=.5*n,t[3]=(e[3*f+m]-e[3*m+f])*(n=.5/n),t[f]=(e[3*f+o]+e[3*o+f])*n,t[m]=(e[3*m+o]+e[3*o+m])*n}return t}function Un(t,e,r,n){var o=.5*Math.PI/180;e*=o,r*=o,n*=o;var f=Math.sin(e),m=Math.cos(e),g=Math.sin(r),x=Math.cos(r),b=Math.sin(n),N=Math.cos(n);return t[0]=f*x*N-m*g*b,t[1]=m*g*N+f*x*b,t[2]=m*x*b-f*g*N,t[3]=m*x*N+f*g*b,t}function Gn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var jn=Ir,kn=zr,gr=Dr,Kn=Fr,Zn=Hr,Qn=Qr,ii=Vr,_r=Gr,$n=jr,wr=mr,Jn=wr,Mr=yr,qn=Mr,xr=Ur,ts=kr,es=Kr,rs=function(){var t=dr(),e=xe(1,0,0),r=xe(0,1,0);return function(n,o,f){var m=pr(o,f);return m<-.999999?(Ye(t,e,o),Rr(t)<1e-6&&Ye(t,r,o),Ve(t,t),Zr(n,t,Math.PI),n):m>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(Ye(t,o,f),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+m,xr(n,n))}}(),is=function(){var t=Xe(),e=Xe();return function(r,n,o,f,m,g){return Ue(t,n,m,g),Ue(e,o,f,g),Ue(r,t,e,2*g*(1-g)),r}}(),ns=function(){var t=be();return function(e,r,n,o){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=o[0],t[4]=o[1],t[7]=o[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],xr(e,ri(e,t))}}();function ss(){var t=new E(8);return E!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function as(t){var e=new E(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function os(t,e,r,n,o,f,m,g){var x=new E(8);return x[0]=t,x[1]=e,x[2]=r,x[3]=n,x[4]=o,x[5]=f,x[6]=m,x[7]=g,x}function hs(t,e,r,n,o,f,m){var g=new E(8);g[0]=t,g[1]=e,g[2]=r,g[3]=n;var x=.5*o,b=.5*f,N=.5*m;return g[4]=x*n+b*r-N*e,g[5]=b*n+N*t-x*r,g[6]=N*n+x*e-b*t,g[7]=-x*t-b*e-N*r,g}function ni(t,e,r){var n=.5*r[0],o=.5*r[1],f=.5*r[2],m=e[0],g=e[1],x=e[2],b=e[3];return t[0]=m,t[1]=g,t[2]=x,t[3]=b,t[4]=n*b+o*x-f*g,t[5]=o*b+f*m-n*x,t[6]=f*b+n*g-o*m,t[7]=-n*m-o*g-f*x,t}function ls(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function cs(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function vs(t,e){var r=Xe();ht(r,e);var n=new E(3);return $(n,e),ni(t,r,n),t}function si(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function fs(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function us(t,e,r,n,o,f,m,g,x){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=f,t[5]=m,t[6]=g,t[7]=x,t}var ds=gr;function ps(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var ms=gr;function ys(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function gs(t,e){var r=e[4],n=e[5],o=e[6],f=e[7],m=-e[0],g=-e[1],x=-e[2],b=e[3];return t[0]=2*(r*b+f*m+n*x-o*g),t[1]=2*(n*b+f*g+o*m-r*x),t[2]=2*(o*b+f*x+r*g-n*m),t}function _s(t,e,r){var n=e[0],o=e[1],f=e[2],m=e[3],g=.5*r[0],x=.5*r[1],b=.5*r[2],N=e[4],j=e[5],K=e[6],k=e[7];return t[0]=n,t[1]=o,t[2]=f,t[3]=m,t[4]=m*g+o*b-f*x+N,t[5]=m*x+f*g-n*b+j,t[6]=m*b+n*x-o*g+K,t[7]=-n*g-o*x-f*b+k,t}function ws(t,e,r){var n=-e[0],o=-e[1],f=-e[2],m=e[3],g=e[4],x=e[5],b=e[6],N=e[7],j=g*m+N*n+x*f-b*o,K=x*m+N*o+b*n-g*f,k=b*m+N*f+g*o-x*n,Q=N*m-g*n-x*o-b*f;return $r(t,e,r),t[4]=j*(m=t[3])+Q*(n=t[0])+K*(f=t[2])-k*(o=t[1]),t[5]=K*m+Q*o+k*n-j*f,t[6]=k*m+Q*f+j*o-K*n,t[7]=Q*m-j*n-K*o-k*f,t}function Ms(t,e,r){var n=-e[0],o=-e[1],f=-e[2],m=e[3],g=e[4],x=e[5],b=e[6],N=e[7],j=g*m+N*n+x*f-b*o,K=x*m+N*o+b*n-g*f,k=b*m+N*f+g*o-x*n,Q=N*m-g*n-x*o-b*f;return Jr(t,e,r),t[4]=j*(m=t[3])+Q*(n=t[0])+K*(f=t[2])-k*(o=t[1]),t[5]=K*m+Q*o+k*n-j*f,t[6]=k*m+Q*f+j*o-K*n,t[7]=Q*m-j*n-K*o-k*f,t}function xs(t,e,r){var n=-e[0],o=-e[1],f=-e[2],m=e[3],g=e[4],x=e[5],b=e[6],N=e[7],j=g*m+N*n+x*f-b*o,K=x*m+N*o+b*n-g*f,k=b*m+N*f+g*o-x*n,Q=N*m-g*n-x*o-b*f;return qr(t,e,r),t[4]=j*(m=t[3])+Q*(n=t[0])+K*(f=t[2])-k*(o=t[1]),t[5]=K*m+Q*o+k*n-j*f,t[6]=k*m+Q*f+j*o-K*n,t[7]=Q*m-j*n-K*o-k*f,t}function Es(t,e,r){var n=r[0],o=r[1],f=r[2],m=r[3],g=e[0],x=e[1],b=e[2],N=e[3];return t[0]=g*m+N*n+x*f-b*o,t[1]=x*m+N*o+b*n-g*f,t[2]=b*m+N*f+g*o-x*n,t[3]=N*m-g*n-x*o-b*f,t[4]=(g=e[4])*m+(N=e[7])*n+(x=e[5])*f-(b=e[6])*o,t[5]=x*m+N*o+b*n-g*f,t[6]=b*m+N*f+g*o-x*n,t[7]=N*m-g*n-x*o-b*f,t}function Ts(t,e,r){var n=e[0],o=e[1],f=e[2],m=e[3],g=r[0],x=r[1],b=r[2],N=r[3];return t[0]=n*N+m*g+o*b-f*x,t[1]=o*N+m*x+f*g-n*b,t[2]=f*N+m*b+n*x-o*g,t[3]=m*N-n*g-o*x-f*b,t[4]=n*(N=r[7])+m*(g=r[4])+o*(b=r[6])-f*(x=r[5]),t[5]=o*N+m*x+f*g-n*b,t[6]=f*N+m*b+n*x-o*g,t[7]=m*N-n*g-o*x-f*b,t}function Ss(t,e,r,n){if(Math.abs(n)<v)return si(t,e);var o=Math.hypot(r[0],r[1],r[2]);n*=.5;var f=Math.sin(n),m=f*r[0]/o,g=f*r[1]/o,x=f*r[2]/o,b=Math.cos(n),N=e[0],j=e[1],K=e[2],k=e[3];t[0]=N*b+k*m+j*x-K*g,t[1]=j*b+k*g+K*m-N*x,t[2]=K*b+k*x+N*g-j*m,t[3]=k*b-N*m-j*g-K*x;var Q=e[4],q=e[5],Z=e[6],rt=e[7];return t[4]=Q*b+rt*m+q*x-Z*g,t[5]=q*b+rt*g+Z*m-Q*x,t[6]=Z*b+rt*x+Q*g-q*m,t[7]=rt*b-Q*m-q*g-Z*x,t}function Ps(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function ai(t,e,r){var n=e[0],o=e[1],f=e[2],m=e[3],g=r[4],x=r[5],b=r[6],N=r[7],j=e[4],K=e[5],k=e[6],Q=e[7],q=r[0],Z=r[1],rt=r[2],ot=r[3];return t[0]=n*ot+m*q+o*rt-f*Z,t[1]=o*ot+m*Z+f*q-n*rt,t[2]=f*ot+m*rt+n*Z-o*q,t[3]=m*ot-n*q-o*Z-f*rt,t[4]=n*N+m*g+o*b-f*x+j*ot+Q*q+K*rt-k*Z,t[5]=o*N+m*x+f*g-n*b+K*ot+Q*Z+k*q-j*rt,t[6]=f*N+m*b+n*x-o*g+k*ot+Q*rt+j*Z-K*q,t[7]=m*N-n*g-o*x-f*b+Q*ot-j*q-K*Z-k*rt,t}var Cs=ai;function Ls(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}var oi=_r;function bs(t,e,r,n){var o=1-n;return oi(e,r)<0&&(n=-n),t[0]=e[0]*o+r[0]*n,t[1]=e[1]*o+r[1]*n,t[2]=e[2]*o+r[2]*n,t[3]=e[3]*o+r[3]*n,t[4]=e[4]*o+r[4]*n,t[5]=e[5]*o+r[5]*n,t[6]=e[6]*o+r[6]*n,t[7]=e[7]*o+r[7]*n,t}function As(t,e){var r=Ge(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function Rs(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var hi=wr,Os=hi,Ge=Mr,Is=Ge;function zs(t,e){var r=Ge(e);if(r>0){r=Math.sqrt(r);var n=e[0]/r,o=e[1]/r,f=e[2]/r,m=e[3]/r,g=e[4],x=e[5],b=e[6],N=e[7],j=n*g+o*x+f*b+m*N;t[0]=n,t[1]=o,t[2]=f,t[3]=m,t[4]=(g-n*j)/r,t[5]=(x-o*j)/r,t[6]=(b-f*j)/r,t[7]=(N-m*j)/r}return t}function Ds(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Fs(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function Hs(t,e){var r=t[0],n=t[1],o=t[2],f=t[3],m=t[4],g=t[5],x=t[6],b=t[7],N=e[0],j=e[1],K=e[2],k=e[3],Q=e[4],q=e[5],Z=e[6],rt=e[7];return Math.abs(r-N)<=v*Math.max(1,Math.abs(r),Math.abs(N))&&Math.abs(n-j)<=v*Math.max(1,Math.abs(n),Math.abs(j))&&Math.abs(o-K)<=v*Math.max(1,Math.abs(o),Math.abs(K))&&Math.abs(f-k)<=v*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(m-Q)<=v*Math.max(1,Math.abs(m),Math.abs(Q))&&Math.abs(g-q)<=v*Math.max(1,Math.abs(g),Math.abs(q))&&Math.abs(x-Z)<=v*Math.max(1,Math.abs(x),Math.abs(Z))&&Math.abs(b-rt)<=v*Math.max(1,Math.abs(b),Math.abs(rt))}function li(){var t=new E(2);return E!=Float32Array&&(t[0]=0,t[1]=0),t}function Bs(t){var e=new E(2);return e[0]=t[0],e[1]=t[1],e}function Ns(t,e){var r=new E(2);return r[0]=t,r[1]=e,r}function Ws(t,e){return t[0]=e[0],t[1]=e[1],t}function Vs(t,e,r){return t[0]=e,t[1]=r,t}function Ys(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function ci(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function vi(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function fi(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function Xs(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function Us(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Gs(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function js(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function ks(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Ks(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function Zs(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function ui(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1])}function di(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function pi(t){return Math.hypot(t[0],t[1])}function mi(t){var e=t[0],r=t[1];return e*e+r*r}function Qs(t,e){return t[0]=-e[0],t[1]=-e[1],t}function $s(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Js(t,e){var r=e[0],n=e[1],o=r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t}function qs(t,e){return t[0]*e[0]+t[1]*e[1]}function ta(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function ea(t,e,r,n){var o=e[0],f=e[1];return t[0]=o+n*(r[0]-o),t[1]=f+n*(r[1]-f),t}function ra(t,e){e=e||1;var r=2*C()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function ia(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[2]*o,t[1]=r[1]*n+r[3]*o,t}function na(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[2]*o+r[4],t[1]=r[1]*n+r[3]*o+r[5],t}function sa(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[3]*o+r[6],t[1]=r[1]*n+r[4]*o+r[7],t}function aa(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[4]*o+r[12],t[1]=r[1]*n+r[5]*o+r[13],t}function oa(t,e,r,n){var o=e[0]-r[0],f=e[1]-r[1],m=Math.sin(n),g=Math.cos(n);return t[0]=o*g-f*m+r[0],t[1]=o*m+f*g+r[1],t}function ha(t,e){var r=t[0],n=t[1],o=e[0],f=e[1],m=r*r+n*n;m>0&&(m=1/Math.sqrt(m));var g=o*o+f*f;g>0&&(g=1/Math.sqrt(g));var x=(r*o+n*f)*m*g;return x>1?0:x<-1?Math.PI:Math.acos(x)}function la(t){return t[0]=0,t[1]=0,t}function ca(t){return"vec2("+t[0]+", "+t[1]+")"}function va(t,e){return t[0]===e[0]&&t[1]===e[1]}function fa(t,e){var r=t[0],n=t[1],o=e[0],f=e[1];return Math.abs(r-o)<=v*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-f)<=v*Math.max(1,Math.abs(n),Math.abs(f))}var ua=pi,da=ci,pa=vi,ma=fi,ya=ui,ga=di,_a=mi,wa=function(){var t=li();return function(e,r,n,o,f,m){var g,x;for(r||(r=2),n||(n=0),x=o?Math.min(o*r+n,e.length):e.length,g=n;g<x;g+=r)t[0]=e[g],t[1]=e[g+1],f(t,t,m),e[g]=t[0],e[g+1]=t[1];return e}}()},2513:(V,U,s)=>{"use strict";var y=s(8843),M=s(7767),u=s(4576),l=s(1936).setTransform,c=s(6873);function i(a,h,A,_,v){if((v=v||{}).perspective=v.perspective||{},v.perspective.extraTransforms=null!=v.perspective.extraTransforms?v.perspective.extraTransforms:"",(v.perspective.radius||v.perspective.extraTransforms)&&!M())throw new Error("CSS transforms on hotspots are not supported on this browser");this._domElement=a,this._parentDomElement=h,this._view=A,this._coords={},this._perspective={},this.setPosition(_),this._parentDomElement.appendChild(this._domElement),this.setPerspective(v.perspective),this._visible=!0,this._position={x:0,y:0}}y(i),i.prototype.destroy=function(){this._parentDomElement.removeChild(this._domElement),c(this)},i.prototype.domElement=function(){return this._domElement},i.prototype.position=function(){return this._coords},i.prototype.setPosition=function(a){for(var h in a)this._coords[h]=a[h];this._update()},i.prototype.perspective=function(){return this._perspective},i.prototype.setPerspective=function(a){for(var h in a)this._perspective[h]=a[h];this._update()},i.prototype.show=function(){this._visible||(this._visible=!0,this._update())},i.prototype.hide=function(){this._visible&&(this._visible=!1,this._update())},i.prototype._update=function(){var _,v,a=this._domElement,h=this._coords,A=this._position,E=!1;if(this._visible){var C=this._view;this._perspective.radius?(E=!0,this._setEmbeddedPosition(C,h)):(C.coordinatesToScreen(h,A),v=A.y,null!=(_=A.x)&&null!=v&&(E=!0,this._setPosition(_,v)))}E?(a.style.display="block",a.style.position="absolute"):(a.style.display="none",a.style.position="")},i.prototype._setEmbeddedPosition=function(a,h){var A=a.coordinatesToPerspectiveTransform(h,this._perspective.radius,this._perspective.extraTransforms);l(this._domElement,A)},i.prototype._setPosition=function(a,h){u(this._domElement,a,h,this._perspective.extraTransforms)},V.exports=i},2523:(V,U,s)=>{"use strict";var y=s(8843),M=s(2513),u=s(1045),l=s(5819),c=s(4576),i=s(1936).setAbsolute,a=s(1936).setOverflowHidden,h=s(1936).setOverflowVisible,A=s(1936).setNullSize,_=s(1936).setPixelSize,v=s(1936).setWithVendorPrefix("pointer-events"),E=s(6873);function C(z,B,D,p,L){L=L||{},this._parentDomElement=z,this._stage=B,this._view=D,this._renderLoop=p,this._hotspots=[],this._visible=!0,this._rect=L.rect,this._visibilityOrRectChanged=!0,this._stageWidth=null,this._stageHeight=null,this._tmpRect={},this._hotspotContainerWrapper=document.createElement("div"),i(this._hotspotContainerWrapper),v(this._hotspotContainerWrapper,"none"),this._parentDomElement.appendChild(this._hotspotContainerWrapper),this._hotspotContainer=document.createElement("div"),i(this._hotspotContainer),v(this._hotspotContainer,"all"),this._hotspotContainerWrapper.appendChild(this._hotspotContainer),this._updateHandler=this._update.bind(this),this._renderLoop.addEventListener("afterRender",this._updateHandler)}y(C),C.prototype.destroy=function(){for(;this._hotspots.length;)this.destroyHotspot(this._hotspots[0]);this._parentDomElement.removeChild(this._hotspotContainerWrapper),this._renderLoop.removeEventListener("afterRender",this._updateHandler),E(this)},C.prototype.domElement=function(){return this._hotspotContainer},C.prototype.setRect=function(z){z&&!l()&&typeof console<"u"&&console.warn("Using a rect effect is not fully supported on this browser. Hotspots may not be shown."),this._rect=z,this._visibilityOrRectChanged=!0},C.prototype.rect=function(){return this._rect},C.prototype.createHotspot=function(z,B,D){var p=new M(z,this._hotspotContainer,this._view,B=B||{},D);return this._hotspots.push(p),p._update(),this.emit("hotspotsChange"),p},C.prototype.hasHotspot=function(z){return this._hotspots.indexOf(z)>=0},C.prototype.listHotspots=function(){return[].concat(this._hotspots)},C.prototype.destroyHotspot=function(z){var B=this._hotspots.indexOf(z);if(B<0)throw new Error("No such hotspot");this._hotspots.splice(B,1),z.destroy(),this.emit("hotspotsChange")},C.prototype.hide=function(){this._visible&&(this._visible=!1,this._visibilityOrRectChanged=!0,this._update())},C.prototype.show=function(){this._visible||(this._visible=!0,this._visibilityOrRectChanged=!0,this._update())},C.prototype._update=function(){var z=this._hotspotContainerWrapper,B=this._stage.width(),D=this._stage.height(),p=this._tmpRect;if(this._visibilityOrRectChanged||this._rect&&(B!==this._stageWidth||D!==this._stageHeight)){var L=this._visible&&!(this._rect&&!l());z.style.display=L?"block":"none",L&&(this._rect?(u(B,D,this._rect,p),c(z,B*p.x,D*p.y),_(z,B*p.width,D*p.height),a(z)):(c(z,0,0),A(z),h(z))),this._stageWidth=B,this._stageHeight=D,this._visibilityOrRectChanged=!1}for(var R=0;R<this._hotspots.length;R++)this._hotspots[R]._update()},V.exports=C},3268:(V,U,s)=>{"use strict";var y=s(8843),M=s(2544),u=s(6873);function l(c,i,a,h,A){A=A||{};var _=this;this._source=c,this._geometry=i,this._view=a,this._textureStore=h,this._effects=A.effects||{},this._fixedLevelIndex=null,this._viewChangeHandler=function(){_.emit("viewChange",_.view())},this._view.addEventListener("change",this._viewChangeHandler),this._textureStoreChangeHandler=function(){_.emit("textureStoreChange",_.textureStore())},this._textureStore.addEventListener("textureLoad",this._textureStoreChangeHandler),this._textureStore.addEventListener("textureError",this._textureStoreChangeHandler),this._textureStore.addEventListener("textureInvalid",this._textureStoreChangeHandler)}y(l),l.prototype.destroy=function(){this._view.removeEventListener("change",this._viewChangeHandler),this._textureStore.removeEventListener("textureLoad",this._textureStoreChangeHandler),this._textureStore.removeEventListener("textureError",this._textureStoreChangeHandler),this._textureStore.removeEventListener("textureInvalid",this._textureStoreChangeHandler),u(this)},l.prototype.source=function(){return this._source},l.prototype.geometry=function(){return this._geometry},l.prototype.view=function(){return this._view},l.prototype.textureStore=function(){return this._textureStore},l.prototype.effects=function(){return this._effects},l.prototype.setEffects=function(c){this._effects=c,this.emit("effectsChange",this._effects)},l.prototype.mergeEffects=function(c){M(this._effects,c),this.emit("effectsChange",this._effects)},l.prototype.fixedLevel=function(){return this._fixedLevelIndex},l.prototype.setFixedLevel=function(c){if(c!==this._fixedLevelIndex){if(null!=c&&(c>=this._geometry.levelList.length||c<0))throw new Error("Level index out of range: "+c);this._fixedLevelIndex=c,this.emit("fixedLevelChange",this._fixedLevelIndex)}},l.prototype._selectLevel=function(){return null!=this._fixedLevelIndex?this._geometry.levelList[this._fixedLevelIndex]:this._view.selectLevel(this._geometry.selectableLevelList)},l.prototype.visibleTiles=function(c){var i=this._selectLevel();return this._geometry.visibleTiles(this._view,i,c)},l.prototype.pinLevel=function(c){for(var a=this._geometry.levelTiles(this._geometry.levelList[c]),h=0;h<a.length;h++)this._textureStore.pin(a[h])},l.prototype.unpinLevel=function(c){for(var a=this._geometry.levelTiles(this._geometry.levelList[c]),h=0;h<a.length;h++)this._textureStore.unpin(a[h])},l.prototype.pinFirstLevel=function(){return this.pinLevel(0)},l.prototype.unpinFirstLevel=function(){return this.unpinLevel(0)},V.exports=l},1608:(V,U,s)=>{"use strict";function M(u){this.constructor.super_.apply(this,arguments),this.message=u}s(5946)(M,Error),V.exports=M},3340:(V,U,s)=>{"use strict";var y=s(8843),M=s(6873);function u(l){var c=this;this._stage=l,this._running=!1,this._rendering=!1,this._requestHandle=null,this._boundLoop=this._loop.bind(this),this._renderInvalidHandler=function(){c._rendering||c.renderOnNextFrame()},this._stage.addEventListener("renderInvalid",this._renderInvalidHandler)}y(u),u.prototype.destroy=function(){this.stop(),this._stage.removeEventListener("renderInvalid",this._renderInvalidHandler),M(this)},u.prototype.stage=function(){return this._stage},u.prototype.start=function(){this._running=!0,this.renderOnNextFrame()},u.prototype.stop=function(){this._requestHandle&&(window.cancelAnimationFrame(this._requestHandle),this._requestHandle=null),this._running=!1},u.prototype.renderOnNextFrame=function(){this._running&&!this._requestHandle&&(this._requestHandle=window.requestAnimationFrame(this._boundLoop))},u.prototype._loop=function(){if(!this._running)throw new Error("Render loop running while in stopped state");this._requestHandle=null,this._rendering=!0,this.emit("beforeRender"),this._rendering=!1,this._stage.render(),this.emit("afterRender")},V.exports=u},8393:(V,U,s)=>{"use strict";var y=s(3268),M=s(522),u=s(2523),l=s(8843),c=s(242),i=s(6158),a=s(4699),h=s(7802),A=s(6873);function _(v,E){this._viewer=v,this._view=E,this._layers=[],this._hotspotContainer=new u(v._controlContainer,v.stage(),this._view,v.renderLoop()),this._movement=null,this._movementStartTime=null,this._movementStep=null,this._movementParams=null,this._movementCallback=null,this._updateMovementHandler=this._updateMovement.bind(this),this._updateHotspotContainerHandler=this._updateHotspotContainer.bind(this),this._viewer.addEventListener("sceneChange",this._updateHotspotContainerHandler),this._viewChangeHandler=this.emit.bind(this,"viewChange"),this._view.addEventListener("change",this._viewChangeHandler),this._updateHotspotContainer()}l(_),_.prototype.destroy=function(){this._view.removeEventListener("change",this._viewChangeHandler),this._viewer.removeEventListener("sceneChange",this._updateHotspotContainerHandler),this._movement&&this.stopMovement(),this._hotspotContainer.destroy(),this.destroyAllLayers(),A(this)},_.prototype.hotspotContainer=function(){return this._hotspotContainer},_.prototype.layer=function(){return this._layers[0]},_.prototype.listLayers=function(){return[].concat(this._layers)},_.prototype.view=function(){return this._view},_.prototype.viewer=function(){return this._viewer},_.prototype.visible=function(){return this._viewer.scene()===this},_.prototype.createLayer=function(v){var E=(v=v||{}).textureStoreOpts||{},C=v.layerOpts||{},z=v.source,B=v.geometry,D=this._view,p=this._viewer.stage(),L=new M(z,p,E),R=new y(z,B,D,L,C);return this._layers.push(R),v.pinFirstLevel&&R.pinFirstLevel(),this.emit("layerChange"),R},_.prototype.destroyLayer=function(v){var E=this._layers.indexOf(v);if(E<0)throw new Error("No such layer in scene");this._layers.splice(E,1),this.emit("layerChange"),v.textureStore().destroy(),v.destroy()},_.prototype.destroyAllLayers=function(){for(;this._layers.length>0;)this.destroyLayer(this._layers[0])},_.prototype.switchTo=function(v,E){return this._viewer.switchScene(this,v,E)},_.prototype.lookTo=function(v,E,C){if(E=E||{},C=C||i,"object"!==a(v))throw new Error("Target view parameters must be an object");var B=null!=E.ease?E.ease:function(S){return(S*=2)<1?.5*S*S:-.5*(--S*(S-2)-1)},D=null!=E.controlsInterrupt&&E.controlsInterrupt,p=null!=E.transitionDuration?E.transitionDuration:1e3,L=null==E.shortest||E.shortest,R=this._view,H=R.parameters(),w={};h(w,v),h(w,H),L&&R.normalizeToClosest&&R.normalizeToClosest(w,w);var T=this._viewer.controls().enabled();D||this._viewer.controls().disable(),this.startMovement(function(){var S=!1;return function(I,O){if(O>=p&&S)return null;var Y=Math.min(O/p,1);for(var W in I){var X=H[W],J=w[W];I[W]=X+B(Y)*(J-X)}return S=O>=p,I}},function(){T&&this._viewer.controls().enable(),C()})},_.prototype.startMovement=function(v,E){var C=this._viewer.renderLoop();this._movement&&this.stopMovement();var z=v();if("function"!=typeof z)throw new Error("Bad movement");this._movement=v,this._movementStep=z,this._movementStartTime=c(),this._movementParams={},this._movementCallback=E,C.addEventListener("beforeRender",this._updateMovementHandler),C.renderOnNextFrame()},_.prototype.stopMovement=function(){var v=this._viewer.renderLoop();!this._movement||(this._movementCallback&&this._movementCallback(),v.removeEventListener("beforeRender",this._updateMovementHandler),this._movement=null,this._movementStep=null,this._movementStartTime=null,this._movementParams=null,this._movementCallback=null)},_.prototype.movement=function(){return this._movement},_.prototype._updateMovement=function(){if(!this._movement)throw new Error("Should not call update");var v=this._viewer.renderLoop(),E=this._view,C=c()-this._movementStartTime,B=this._movementParams;null==(B=(0,this._movementStep)(B=E.parameters(B),C))?this.stopMovement():(E.setParameters(B),v.renderOnNextFrame())},_.prototype._updateHotspotContainer=function(){this.visible()?this._hotspotContainer.show():this._hotspotContainer.hide()},V.exports=_},522:(V,U,s)=>{"use strict";var y=s(5242),M=s(1114),u=s(47),l=s(8843),c=s(7802),i=s(1687),a=s(3559),h=s(5946),A=s(6873),_=typeof MARZIPANODEBUG<"u"&&MARZIPANODEBUG.textureStore,E={previouslyVisibleCacheSize:512},C=0;function z(){}function B(p,L){var R=this,H=C++;R._id=H,R._store=p,R._tile=L,R._asset=null,R._texture=null,R._changeHandler=function(){p.emit("textureInvalid",L)};var w=p.source(),d=p.stage(),T=w.loadAsset.bind(w),S=d.createTexture.bind(d),I=a(i(T),S);p.emit("textureStartLoad",L),_&&console.log("loading",H,L),R._cancel=I(d,L,function(O,Y,W,X){if(R._cancel=null,O)return W&&W.destroy(),X&&X.destroy(),void(O instanceof z?(p.emit("textureCancel",L),_&&console.log("cancel",H,L)):(p.emit("textureError",L,O),_&&console.log("error",H,L)));R._texture=X,W.isDynamic()?(R._asset=W,W.addEventListener("change",R._changeHandler)):W.destroy(),p.emit("textureLoad",L),_&&console.log("load",H,L)})}function D(p,L,R){R=c(R||{},E),this._source=p,this._stage=L,this._state=0,this._delimCount=0,this._itemMap=new y,this._visible=new M,this._previouslyVisible=new u(R.previouslyVisibleCacheSize),this._pinMap=new y,this._newVisible=new M,this._noLongerVisible=[],this._visibleAgain=[],this._evicted=[]}h(z,Error),B.prototype.asset=function(){return this._asset},B.prototype.texture=function(){return this._texture},B.prototype.destroy=function(){var p=this._id,L=this._store,R=this._tile,H=this._asset,w=this._texture,d=this._cancel;d?d(new z("Texture load cancelled")):(H&&(H.removeEventListener("change",this._changeHandler),H.destroy()),w&&w.destroy(),L.emit("textureUnload",R),_&&console.log("unload",p,R),A(this))},l(B),l(D),D.prototype.destroy=function(){this.clear(),A(this)},D.prototype.stage=function(){return this._stage},D.prototype.source=function(){return this._source},D.prototype.clear=function(){var p=this;p._evicted.length=0,p._itemMap.forEach(function(L){p._evicted.push(L)}),p._evicted.forEach(function(L){p._unloadTile(L)}),p._itemMap.clear(),p._visible.clear(),p._previouslyVisible.clear(),p._pinMap.clear(),p._newVisible.clear(),p._noLongerVisible.length=0,p._visibleAgain.length=0,p._evicted.length=0},D.prototype.clearNotPinned=function(){var p=this;p._evicted.length=0,p._itemMap.forEach(function(L){p._pinMap.has(L)||p._evicted.push(L)}),p._evicted.forEach(function(L){p._unloadTile(L)}),p._visible.clear(),p._previouslyVisible.clear(),p._evicted.length=0},D.prototype.startFrame=function(){if(0!==this._state&&1!==this._state)throw new Error("TextureStore: startFrame called out of sequence");this._state=1,this._delimCount++},D.prototype.markTile=function(p){if(1!==this._state&&2!==this._state)throw new Error("TextureStore: markTile called out of sequence");this._state=2;var L=this._itemMap.get(p),R=L&&L.texture(),H=L&&L.asset();R&&H&&R.refresh(p,H),this._newVisible.add(p)},D.prototype.endFrame=function(){if(1!==this._state&&2!==this._state&&3!==this._state)throw new Error("TextureStore: endFrame called out of sequence");this._state=3,this._delimCount--,this._delimCount||(this._update(),this._state=0)},D.prototype._update=function(){var p=this;p._noLongerVisible.length=0,p._visible.forEach(function(R){p._newVisible.has(R)||p._noLongerVisible.push(R)}),p._visibleAgain.length=0,p._newVisible.forEach(function(R){p._previouslyVisible.has(R)&&p._visibleAgain.push(R)}),p._visibleAgain.forEach(function(R){p._previouslyVisible.remove(R)}),p._evicted.length=0,p._noLongerVisible.forEach(function(R){var H=p._itemMap.get(R);if(H&&H.texture()){var d=p._previouslyVisible.add(R);null!=d&&p._evicted.push(d)}else H&&p._unloadTile(R)}),p._evicted.forEach(function(R){p._pinMap.has(R)||p._unloadTile(R)}),p._newVisible.forEach(function(R){p._itemMap.get(R)||p._loadTile(R)});var L=p._visible;p._visible=p._newVisible,p._newVisible=L,p._newVisible.clear(),p._noLongerVisible.length=0,p._visibleAgain.length=0,p._evicted.length=0},D.prototype._loadTile=function(p){if(this._itemMap.has(p))throw new Error("TextureStore: loading texture already in cache");var L=new B(this,p);this._itemMap.set(p,L)},D.prototype._unloadTile=function(p){var L=this._itemMap.del(p);if(!L)throw new Error("TextureStore: unloading texture not in cache");L.destroy()},D.prototype.asset=function(p){var L=this._itemMap.get(p);return L?L.asset():null},D.prototype.texture=function(p){var L=this._itemMap.get(p);return L?L.texture():null},D.prototype.pin=function(p){var L=(this._pinMap.get(p)||0)+1;return this._pinMap.set(p,L),this._itemMap.has(p)||this._loadTile(p),L},D.prototype.unpin=function(p){var L=this._pinMap.get(p);if(!L)throw new Error("TextureStore: unpin when not pinned");return--L>0?this._pinMap.set(p,L):(this._pinMap.del(p),!this._visible.has(p)&&!this._previouslyVisible.has(p)&&this._unloadTile(p)),L},D.prototype.query=function(p){var L=this._itemMap.get(p),R=this._pinMap.get(p)||0;return{visible:this._visible.has(p),previouslyVisible:this._previouslyVisible.has(p),hasAsset:null!=L&&null!=L.asset(),hasTexture:null!=L&&null!=L.texture(),pinned:0!==R,pinCount:R}},V.exports=D},9799:(V,U,s)=>{"use strict";var y=s(1114);function M(){this._stack=[],this._visited=new y,this._vertices=null}M.prototype.search=function(u,l,c){var i=this._stack,a=this._visited,h=this._vertices,A=0;for(this._clear(),i.push(l);i.length>0;){var _=i.pop();if(!a.has(_)&&u.intersects(_.vertices(h))){a.add(_);for(var v=_.neighbors(),E=0;E<v.length;E++)i.push(v[E]);c.push(_),A++}}return this._vertices=h,this._clear(),A},M.prototype._clear=function(){this._stack.length=0,this._visited.clear()},V.exports=M},6613:(V,U,s)=>{"use strict";var y=s(8843),M=s(7802),u=s(242),l={duration:1/0};function c(i){i=M(i||{},l),this._duration=i.duration,this._startTime=null,this._handle=null,this._check=this._check.bind(this)}y(c),c.prototype.start=function(){this._startTime=u(),null==this._handle&&this._duration<1/0&&this._setup(this._duration)},c.prototype.started=function(){return null!=this._startTime},c.prototype.stop=function(){this._startTime=null,null!=this._handle&&(clearTimeout(this._handle),this._handle=null)},c.prototype._setup=function(i){this._handle=setTimeout(this._check,i)},c.prototype._teardown=function(){clearTimeout(this._handle),this._handle=null},c.prototype._check=function(){var i=u(),h=this._duration-(i-this._startTime);this._teardown(),h<=0?(this.emit("timeout"),this._startTime=null):h<1/0&&this._setup(h)},c.prototype.duration=function(){return this._duration},c.prototype.setDuration=function(i){this._duration=i,null!=this._startTime&&this._check()},V.exports=c},2025:(V,U,s)=>{"use strict";var y=s(3845),M=s(8843),u=s(3340),l=s(7708),c=s(8393),i=s(6613),a=s(5),h=s(7940),A=s(3129),_=s(444),v=s(7516),E=s(9512),C=s(133),z=s(1936).setOverflowHidden,B=s(1936).setAbsolute,D=s(1936).setFullSize,p=s(1936).setBlocking,L=s(58),R=s(6158),H=s(6873),w={webgl:a,css:h,flash:A},d=[a,h,A];function T(O,Y){var W;if(Y=Y||{},this._domElement=O,z(O),Y.stageType){if(!(W=w[Y.stageType]))throw new Error("Unknown stage type: "+Y.stageType)}else{for(var X=0;X<d.length;X++)if(d[X].supported()){W=d[X];break}if(!W)throw new Error("None of the stage types are supported")}this._stage=new W(Y.stage),C(this._stage),this._domElement.appendChild(this._stage.domElement()),this._controlContainer=document.createElement("div"),B(this._controlContainer),D(this._controlContainer),y.ios&&this._controlContainer.addEventListener("touchmove",function(tt){tt.preventDefault()});var J=document.createElement("div");B(J),D(J),p(J),this._controlContainer.appendChild(J),O.appendChild(this._controlContainer),this._size={},this.updateSize(),this._updateSizeListener=this.updateSize.bind(this),window.addEventListener("resize",this._updateSizeListener),this._renderLoop=new u(this._stage),this._controls=new l,this._controlMethods=E(this._controls,this._controlContainer,Y.controls),this._controls.attach(this._renderLoop),this._hammerManagerTouch=v.get(this._controlContainer,"touch"),this._hammerManagerMouse=v.get(this._controlContainer,"mouse"),this._dragCursor=new _(this._controls,"mouseViewDrag",O,Y.cursors&&Y.cursors.drag||{}),this._renderLoop.start(),this._scenes=[],this._currentScene=null,this._replacedScene=null,this._cancelCurrentTween=null,this._layerChangeHandler=this._updateSceneLayers.bind(this),this._viewChangeHandler=this.emit.bind(this,"viewChange"),this._idleTimer=new i,this._idleTimer.start(),this._resetIdleTimerHandler=this._resetIdleTimer.bind(this),this.addEventListener("viewChange",this._resetIdleTimerHandler),this._triggerIdleTimerHandler=this._triggerIdleTimer.bind(this),this._idleTimer.addEventListener("timeout",this._triggerIdleTimerHandler),this._stopMovementHandler=this.stopMovement.bind(this),this._controls.addEventListener("active",this._stopMovementHandler),this.addEventListener("sceneChange",this._stopMovementHandler),this._idleMovement=null}function I(O,Y,W){Y.listLayers().forEach(function(J){J.mergeEffects({opacity:O})}),Y._hotspotContainer.domElement().style.opacity=O}M(T),T.prototype.destroy=function(){for(var O in window.removeEventListener("resize",this._updateSizeListener),this._currentScene&&this._removeSceneEventListeners(this._currentScene),this._replacedScene&&this._removeSceneEventListeners(this._replacedScene),this._dragCursor.destroy(),this._controlMethods)this._controlMethods[O].destroy();for(;this._scenes.length;)this.destroyScene(this._scenes[0]);this._domElement.removeChild(this._stage.domElement()),this._stage.destroy(),this._renderLoop.destroy(),this._controls.destroy(),this._controls=null,this._cancelCurrentTween&&this._cancelCurrentTween(),H(this)},T.prototype.updateSize=function(){var O=this._size;O.width=this._domElement.clientWidth,O.height=this._domElement.clientHeight,this._stage.setSize(O)},T.prototype.stage=function(){return this._stage},T.prototype.renderLoop=function(){return this._renderLoop},T.prototype.controls=function(){return this._controls},T.prototype.domElement=function(){return this._domElement},T.prototype.createScene=function(O){var Y=this.createEmptyScene({view:(O=O||{}).view});return Y.createLayer({source:O.source,geometry:O.geometry,pinFirstLevel:O.pinFirstLevel,textureStoreOpts:O.textureStoreOpts,layerOpts:O.layerOpts}),Y},T.prototype.createEmptyScene=function(O){var Y=new c(this,(O=O||{}).view);return this._scenes.push(Y),Y},T.prototype._updateSceneLayers=function(){var O,Y,X=this._currentScene,J=this._replacedScene,tt=this._stage.listLayers(),et=[];if(J&&(et=et.concat(J.listLayers())),X&&(et=et.concat(X.listLayers())),1!==Math.abs(tt.length-et.length))throw new Error("Stage and scene out of sync");if(et.length<tt.length)for(O=0;O<tt.length;O++)if(et.indexOf(Y=tt[O])<0){this._removeLayerFromStage(Y);break}if(et.length>tt.length)for(O=0;O<et.length;O++)tt.indexOf(Y=et[O])<0&&this._addLayerToStage(Y,O)},T.prototype._addLayerToStage=function(O,Y){O.pinFirstLevel(),this._stage.addLayer(O,Y)},T.prototype._removeLayerFromStage=function(O){this._stage.removeLayer(O),O.unpinFirstLevel(),O.textureStore().clearNotPinned()},T.prototype._addSceneEventListeners=function(O){O.addEventListener("layerChange",this._layerChangeHandler),O.addEventListener("viewChange",this._viewChangeHandler)},T.prototype._removeSceneEventListeners=function(O){O.removeEventListener("layerChange",this._layerChangeHandler),O.removeEventListener("viewChange",this._viewChangeHandler)},T.prototype.destroyScene=function(O){var W,X,Y=this._scenes.indexOf(O);if(Y<0)throw new Error("No such scene in viewer");if(this._currentScene===O){for(this._removeSceneEventListeners(O),X=O.listLayers(),W=0;W<X.length;W++)this._removeLayerFromStage(X[W]);this._cancelCurrentTween&&(this._cancelCurrentTween(),this._cancelCurrentTween=null),this._currentScene=null,this.emit("sceneChange")}if(this._replacedScene===O){for(this._removeSceneEventListeners(O),X=O.listLayers(),W=0;W<X.length;W++)this._removeLayerFromStage(X[W]);this._replacedScene=null}this._scenes.splice(Y,1),O.destroy()},T.prototype.destroyAllScenes=function(){for(;this._scenes.length>0;)this.destroyScene(this._scenes[0])},T.prototype.hasScene=function(O){return this._scenes.indexOf(O)>=0},T.prototype.listScenes=function(){return[].concat(this._scenes)},T.prototype.scene=function(){return this._currentScene},T.prototype.view=function(){var O=this._currentScene;return O?O.view():null},T.prototype.lookTo=function(O,Y,W){var X=this._currentScene;X&&X.lookTo(O,Y,W)},T.prototype.startMovement=function(O,Y){var W=this._currentScene;!W||W.startMovement(O,Y)},T.prototype.stopMovement=function(){var O=this._currentScene;!O||O.stopMovement()},T.prototype.movement=function(){var O=this._currentScene;if(O)return O.movement()},T.prototype.setIdleMovement=function(O,Y){this._idleTimer.setDuration(O),this._idleMovement=Y},T.prototype.breakIdleMovement=function(){this.stopMovement(),this._resetIdleTimer()},T.prototype._resetIdleTimer=function(){this._idleTimer.start()},T.prototype._triggerIdleTimer=function(){var O=this._idleMovement;!O||this.startMovement(O)},T.prototype.switchScene=function(O,Y,W){var X=this;Y=Y||{},W=W||R;var J=this._stage,tt=this._currentScene;if(tt!==O){if(this._scenes.indexOf(O)<0)throw new Error("No such scene in viewer");this._cancelCurrentTween&&(this._cancelCurrentTween(),this._cancelCurrentTween=null);var et=tt?tt.listLayers():[],nt=O.listLayers(),ct=J.listLayers();if(tt&&(ct.length!==et.length||ct.length>1&&ct[0]!=et[0]))throw new Error("Stage not in sync with viewer");for(var ut=null!=Y.transitionDuration?Y.transitionDuration:1e3,pt=null!=Y.transitionUpdate?Y.transitionUpdate:I,dt=0;dt<nt.length;dt++)this._addLayerToStage(nt[dt]);this._cancelCurrentTween=L(ut,function gt(Ct){pt(Ct,O,tt)},function Pt(){if(X._replacedScene){X._removeSceneEventListeners(X._replacedScene),et=X._replacedScene.listLayers();for(var Ct=0;Ct<et.length;Ct++)X._removeLayerFromStage(et[Ct]);X._replacedScene=null}X._cancelCurrentTween=null,W()}),this._currentScene=O,this._replacedScene=tt,this.emit("sceneChange"),this.emit("viewChange"),this._addSceneEventListeners(O)}else W()},V.exports=T},3587:(V,U,s)=>{"use strict";var y=s(2120),M=s(5946),u=s(8843),l=s(6873);function c(i){this.constructor.super_.call(this,i),this._timestamp=0}M(c,y),u(c),c.prototype.destroy=function(){l(this)},c.prototype.timestamp=function(){return this._timestamp},c.prototype.isDynamic=function(){return!0},c.prototype.markDirty=function(){this._timestamp++,this.emit("change")},V.exports=c},484:(V,U,s)=>{"use strict";var y=s(8843),M=s(6873);function u(l,c){this._flashElement=l,this._imageId=c}y(u),u.prototype.destroy=function(){this._flashElement.unloadImage(this._imageId),M(this)},u.prototype.element=function(){return this._imageId},u.prototype.width=function(){return 0},u.prototype.height=function(){return 0},u.prototype.timestamp=function(){return 0},u.prototype.isDynamic=function(){return!1},V.exports=u},2120:(V,U,s)=>{"use strict";var y=s(3573),M=s(8843),u=s(6873),l={HTMLImageElement:["naturalWidth","naturalHeight"],HTMLCanvasElement:["width","height"],ImageBitmap:["width","height"]};function c(i){var a=!1;for(var h in l)if(y[h]&&i instanceof y[h]){a=!0,this._widthProp=l[h][0],this._heightProp=l[h][1];break}if(!a)throw new Error("Unsupported pixel source");this._element=i}M(c),c.prototype.destroy=function(){u(this)},c.prototype.element=function(){return this._element},c.prototype.width=function(){return this._element[this._widthProp]},c.prototype.height=function(){return this._element[this._heightProp]},c.prototype.timestamp=function(){return 0},c.prototype.isDynamic=function(){return!1},V.exports=c},2847:(V,U,s)=>{"use strict";var y=s(7802),u=.01,l={yawSpeed:.1,pitchSpeed:.1,fovSpeed:.1,yawAccel:u,pitchAccel:u,fovAccel:u,targetPitch:0,targetFov:null};V.exports=function c(i){var a=(i=y(i||{},l)).yawSpeed,h=i.pitchSpeed,A=i.fovSpeed,_=i.yawAccel,v=i.pitchAccel,E=i.fovAccel,C=i.targetPitch,z=i.targetFov;return function(){var T,I,O,D=0,p=0,L=0,R=0,H=0,w=0,d=0;return function(W,X){if(T=(X-D)/1e3,H=Math.min(p+T*_,a),W.yaw=W.yaw+H*T,null!=C&&W.pitch!==C){var J=.5*L*L/v;w=Math.abs(C-W.pitch)>J?Math.min(L+T*v,h):Math.max(L-T*v,0),I=w*T,C<W.pitch&&(W.pitch=Math.max(C,W.pitch-I)),C>W.pitch&&(W.pitch=Math.min(C,W.pitch+I))}if(null!=z&&W.fov!==C){var tt=.5*R*R/E;d=Math.abs(z-W.fov)>tt?Math.min(R+T*E,A):Math.max(R-T*E,0),O=d*T,z<W.fov&&(W.fov=Math.max(z,W.fov-O)),z>W.fov&&(W.fov=Math.min(z,W.fov+O))}return D=X,p=H,L=w,R=d,W}}}},7299:(V,U,s)=>{"use strict";var y=s(4501);function M(u){if(!isFinite(u)||Math.floor(u)!==u||u<0)throw new Error("LruMap: invalid capacity");this._capacity=u,this._keys=new Array(this._capacity),this._values=new Array(this._capacity),this._start=0,this._size=0}M.prototype._index=function(u){return y(this._start+u,this._capacity)},M.prototype.get=function(u){for(var l=0;l<this._size;l++){var c=this._keys[this._index(l)];if(u.equals(c))return this._values[this._index(l)]}return null},M.prototype.set=function(u,l){if(0===this._capacity)return u;this.del(u);var c=this._size===this._capacity?this._keys[this._index(0)]:null;return this._keys[this._index(this._size)]=u,this._values[this._index(this._size)]=l,this._size<this._capacity?this._size++:this._start=this._index(1),c},M.prototype.del=function(u){for(var l=0;l<this._size;l++)if(u.equals(this._keys[this._index(l)])){for(var c=this._values[this._index(l)],i=l;i<this._size-1;i++)this._keys[this._index(i)]=this._keys[this._index(i+1)],this._values[this._index(i)]=this._values[this._index(i+1)];return this._size--,c}return null},M.prototype.has=function(u){for(var l=0;l<this._size;l++)if(u.equals(this._keys[this._index(l)]))return!0;return!1},M.prototype.size=function(){return this._size},M.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._start=0,this._size=0},M.prototype.forEach=function(u){for(var l=0,c=0;c<this._size;c++)u(this._keys[this._index(c)],this._values[this._index(c)]),l+=1;return l},V.exports=M},47:(V,U,s)=>{"use strict";var y=s(4501);function M(u){if(!isFinite(u)||Math.floor(u)!==u||u<0)throw new Error("LruSet: invalid capacity");this._capacity=u,this._elements=new Array(this._capacity),this._start=0,this._size=0}M.prototype._index=function(u){return y(this._start+u,this._capacity)},M.prototype.add=function(u){if(0===this._capacity)return u;this.remove(u);var l=this._size===this._capacity?this._elements[this._index(0)]:null;return this._elements[this._index(this._size)]=u,this._size<this._capacity?this._size++:this._start=this._index(1),l},M.prototype.remove=function(u){for(var l=0;l<this._size;l++){var c=this._elements[this._index(l)];if(u.equals(c)){for(var i=l;i<this._size-1;i++)this._elements[this._index(i)]=this._elements[this._index(i+1)];return this._size--,c}}return null},M.prototype.has=function(u){for(var l=0;l<this._size;l++)if(u.equals(this._elements[this._index(l)]))return!0;return!1},M.prototype.size=function(){return this._size},M.prototype.clear=function(){this._elements.length=0,this._start=0,this._size=0},M.prototype.forEach=function(u){for(var l=0,c=0;c<this._size;c++)u(this._elements[this._index(c)]),l+=1;return l},V.exports=M},5242:(V,U,s)=>{"use strict";var y=s(4501);function u(l){if(null!=l&&(!isFinite(l)||Math.floor(l)!==l||l<1))throw new Error("Map: invalid capacity");this._capacity=l||64,this._keyBuckets=[],this._valBuckets=[];for(var c=0;c<this._capacity;c++)this._keyBuckets.push([]),this._valBuckets.push([]);this._size=0}u.prototype.get=function(l){for(var c=y(l.hash(),this._capacity),i=this._keyBuckets[c],a=0;a<i.length;a++)if(l.equals(i[a]))return this._valBuckets[c][a];return null},u.prototype.set=function(l,c){for(var i=y(l.hash(),this._capacity),a=this._keyBuckets[i],h=this._valBuckets[i],A=0;A<a.length;A++)if(l.equals(a[A])){var v=h[A];return a[A]=l,h[A]=c,v}return a.push(l),h.push(c),this._size++,null},u.prototype.del=function(l){for(var c=y(l.hash(),this._capacity),i=this._keyBuckets[c],a=this._valBuckets[c],h=0;h<i.length;h++)if(l.equals(i[h])){for(var _=a[h],v=h;v<i.length-1;v++)i[v]=i[v+1],a[v]=a[v+1];return i.length=i.length-1,a.length=a.length-1,this._size--,_}return null},u.prototype.has=function(l){for(var c=y(l.hash(),this._capacity),i=this._keyBuckets[c],a=0;a<i.length;a++)if(l.equals(i[a]))return!0;return!1},u.prototype.size=function(){return this._size},u.prototype.clear=function(){for(var l=0;l<this._capacity;l++)this._keyBuckets[l].length=0,this._valBuckets[l].length=0;this._size=0},u.prototype.forEach=function(l){for(var c=0,i=0;i<this._capacity;i++)for(var a=this._keyBuckets[i],h=this._valBuckets[i],A=0;A<a.length;A++)l(a[A],h[A]),c+=1;return c},V.exports=u},1114:(V,U,s)=>{"use strict";var y=s(4501);function u(l){if(null!=l&&(!isFinite(l)||Math.floor(l)!==l||l<1))throw new Error("Set: invalid capacity");this._capacity=this._capacity||64,this._buckets=[];for(var c=0;c<this._capacity;c++)this._buckets.push([]);this._size=0}u.prototype.add=function(l){for(var c=y(l.hash(),this._capacity),i=this._buckets[c],a=0;a<i.length;a++){var h=i[a];if(l.equals(h))return i[a]=l,h}return i.push(l),this._size++,null},u.prototype.remove=function(l){for(var c=y(l.hash(),this._capacity),i=this._buckets[c],a=0;a<i.length;a++){var h=i[a];if(l.equals(h)){for(var A=a;A<i.length-1;A++)i[A]=i[A+1];return i.length=i.length-1,this._size--,h}}return null},u.prototype.has=function(l){for(var c=y(l.hash(),this._capacity),i=this._buckets[c],a=0;a<i.length;a++)if(l.equals(i[a]))return!0;return!1},u.prototype.size=function(){return this._size},u.prototype.clear=function(){for(var l=0;l<this._capacity;l++)this._buckets[l].length=0;this._size=0},u.prototype.forEach=function(l){for(var c=0,i=0;i<this._capacity;i++)for(var a=this._buckets[i],h=0;h<a.length;h++)l(a[h]),c+=1;return c},V.exports=u},2412:(V,U,s)=>{"use strict";var y=s(5169),M=s(4501);function u(l){this._concurrency=l&&l.concurrency||1,this._paused=l&&!!l.paused||!1,this._pool=[];for(var c=0;c<this._concurrency;c++)this._pool.push(new y(l));this._next=0}u.prototype.length=function(){for(var l=0,c=0;c<this._pool.length;c++)l+=this._pool[c].length();return l},u.prototype.push=function(l,c){var a=this._pool[this._next].push(l,c);return this._next=M(this._next+1,this._concurrency),a},u.prototype.pause=function(){if(!this._paused){this._paused=!0;for(var l=0;l<this._concurrency;l++)this._pool[l].pause()}},u.prototype.resume=function(){if(this._paused){this._paused=!1;for(var l=0;l<this._concurrency;l++)this._pool[l].resume()}},V.exports=u},5169:(V,U,s)=>{"use strict";var y=s(242);function M(l,c){this.fn=l,this.cb=c,this.cfn=null}function u(l){this._queue=[],this._delay=l&&l.delay||0,this._paused=l&&!!l.paused||!1,this._currentTask=null,this._lastFinished=null}u.prototype.length=function(){return this._queue.length},u.prototype.push=function(l,c){var i=new M(l,c),a=this._cancel.bind(this,i);return this._queue.push(i),this._next(),a},u.prototype.pause=function(){this._paused||(this._paused=!0)},u.prototype.resume=function(){this._paused&&(this._paused=!1,this._next())},u.prototype._start=function(l){if(this._currentTask)throw new Error("WorkQueue: called start while running task");this._currentTask=l;var c=this._finish.bind(this,l);if(l.cfn=l.fn(c),"function"!=typeof l.cfn)throw new Error("WorkQueue: function is not cancellable")},u.prototype._finish=function(l){var c=Array.prototype.slice.call(arguments,1);if(this._currentTask!==l)throw new Error("WorkQueue: called finish on wrong task");l.cb.apply(null,c),this._currentTask=null,this._lastFinished=y(),this._next()},u.prototype._cancel=function(l){var c=Array.prototype.slice.call(arguments,1);if(this._currentTask===l)l.cfn.apply(null,c);else{var i=this._queue.indexOf(l);i>=0&&(this._queue.splice(i,1),l.cb.apply(null,c))}},u.prototype._next=function(){if(!this._paused&&this._queue.length&&!this._currentTask){if(null!=this._lastFinished){var l=y()-this._lastFinished,c=this._delay-l;if(c>0)return void setTimeout(this._next.bind(this),c)}var i=this._queue.shift();this._start(i)}},V.exports=u},3247:(V,U,s)=>{"use strict";var y=s(8452).vec4,M=s(8452).mat4;function l(h,A,_){(function c(h,A,_){var v=A[0],E=A[1],C=A[2],z=A[3];h[0]=_[0]*v+_[1]*E+_[2]*C+_[3]*z,h[1]=_[4]*v+_[5]*E+_[6]*C+_[7]*z,h[2]=_[8]*v+_[9]*E+_[10]*C+_[11]*z,h[3]=_[12]*v+_[13]*E+_[14]*C+_[15]*z})(_,h,A.colorMatrix),y.add(_,_,A.colorOffset)}var i=y.create();V.exports={identity:function u(h){var A=h||{};return A.colorOffset=A.colorOffset||y.create(),A.colorMatrix=A.colorMatrix||M.create(),A},applyToPixel:l,applyToImageData:function a(h,A){for(var _=h.width,v=h.height,E=h.data,C=0;C<_*v;C++)y.set(i,E[4*C+0]/255,E[4*C+1]/255,E[4*C+2]/255,E[4*C+3]/255),l(i,A,i),E[4*C+0]=255*i[0],E[4*C+1]=255*i[1],E[4*C+2]=255*i[2],E[4*C+3]=255*i[3]}}},1453:(V,U,s)=>{"use strict";var y=s(8843),M=s(4809),u=s(242),l=s(6873);function c(i){i=i||{},this._methods=[],this._parameters=["x","y","axisScaledX","axisScaledY","zoom","yaw","pitch","roll"],this._now=i.nowForTesting||u,this._composedOffsets={},this._composeReturn={offsets:this._composedOffsets,changing:null}}y(c),c.prototype.add=function(i){if(!this.has(i)){var a={};this._parameters.forEach(function(_){a[_]={dynamics:new M,time:null}});var h=this._updateDynamics.bind(this,a),A={instance:i,dynamics:a,parameterDynamicsHandler:h};i.addEventListener("parameterDynamics",h),this._methods.push(A)}},c.prototype.remove=function(i){var a=this._indexOfInstance(i);if(a>=0){var h=this._methods.splice(a,1)[0];h.instance.removeEventListener("parameterDynamics",h.parameterDynamicsHandler)}},c.prototype.has=function(i){return this._indexOfInstance(i)>=0},c.prototype._indexOfInstance=function(i){for(var a=0;a<this._methods.length;a++)if(this._methods[a].instance===i)return a;return-1},c.prototype.list=function(){for(var i=[],a=0;a<this._methods.length;a++)i.push(this._methods[a].instance);return i},c.prototype._updateDynamics=function(i,a,h){var A=i[a];if(!A)throw new Error("Unknown control parameter "+a);var _=this._now();A.dynamics.update(h,(_-A.time)/1e3),A.time=_,this.emit("change")},c.prototype._resetComposedOffsets=function(){for(var i=0;i<this._parameters.length;i++)this._composedOffsets[this._parameters[i]]=0},c.prototype.offsets=function(){var i,a=!1,h=this._now();this._resetComposedOffsets();for(var A=0;A<this._methods.length;A++)for(var _=this._methods[A].dynamics,v=0;v<this._parameters.length;v++){var E=_[i=this._parameters[v]],C=E.dynamics;null!=C.offset&&(this._composedOffsets[i]+=C.offset,C.offset=null);var z=(h-E.time)/1e3,B=C.offsetFromVelocity(z);B&&(this._composedOffsets[i]+=B);var D=C.velocityAfter(z);C.velocity=D,D&&(a=!0),E.time=h}return this._composeReturn.changing=a,this._composeReturn},c.prototype.destroy=function(){for(var i=this.list(),a=0;a<i.length;a++)this.remove(i[a]);l(this)},V.exports=c},444:(V,U,s)=>{"use strict";var y=s(7802),M=s(6873),u={active:"move",inactive:"default",disabled:"default"};function l(c,i,a,h){h=y(h||{},u),this._element=a,this._controls=c,this._id=i,this._attached=!1,this._setActiveCursor=this._setCursor.bind(this,h.active),this._setInactiveCursor=this._setCursor.bind(this,h.inactive),this._setDisabledCursor=this._setCursor.bind(this,h.disabled),this._setOriginalCursor=this._setCursor.bind(this,this._element.style.cursor),this._updateAttachmentHandler=this._updateAttachment.bind(this),c.addEventListener("methodEnabled",this._updateAttachmentHandler),c.addEventListener("methodDisabled",this._updateAttachmentHandler),c.addEventListener("enabled",this._updateAttachmentHandler),c.addEventListener("disabled",this._updateAttachmentHandler),this._updateAttachment()}l.prototype.destroy=function(){this._detachFromControlMethod(this._controls.method(this._id)),this._setOriginalCursor(),this._controls.removeEventListener("methodEnabled",this._updateAttachmentHandler),this._controls.removeEventListener("methodDisabled",this._updateAttachmentHandler),this._controls.removeEventListener("enabled",this._updateAttachmentHandler),this._controls.removeEventListener("disabled",this._updateAttachmentHandler),M(this)},l.prototype._updateAttachment=function(){var c=this._controls,i=this._id;c.enabled()&&c.method(i).enabled?this._attachToControlMethod(c.method(i)):this._detachFromControlMethod(c.method(i))},l.prototype._attachToControlMethod=function(c){this._attached||(c.instance.addEventListener("active",this._setActiveCursor),c.instance.addEventListener("inactive",this._setInactiveCursor),c.active?this._setActiveCursor():this._setInactiveCursor(),this._attached=!0)},l.prototype._detachFromControlMethod=function(c){this._attached&&(c.instance.removeEventListener("active",this._setActiveCursor),c.instance.removeEventListener("inactive",this._setInactiveCursor),this._setDisabledCursor(),this._attached=!1)},l.prototype._setCursor=function(c){this._element.style.cursor=c},V.exports=l},7708:(V,U,s)=>{"use strict";var y=s(8843),M=s(1453),u=s(6873),l=typeof MARZIPANODEBUG<"u"&&MARZIPANODEBUG.controls;function c(i){i=i||{},this._methods={},this._methodGroups={},this._composer=new M,this._enabled=!i||!i.enabled||!!i.enabled,this._activeCount=0,this.updatedViews_=[],this._attachedRenderLoop=null}y(c),c.prototype.destroy=function(){this.detach(),this._composer.destroy(),u(this)},c.prototype.methods=function(){var i={};for(var a in this._methods)i[a]=this._methods[a];return i},c.prototype.method=function(i){return this._methods[i]},c.prototype.registerMethod=function(i,a,h){if(this._methods[i])throw new Error("Control method already registered with id "+i);this._methods[i]={instance:a,enabled:!1,active:!1,activeHandler:this._handleActive.bind(this,i),inactiveHandler:this._handleInactive.bind(this,i)},h&&this.enableMethod(i,a)},c.prototype.unregisterMethod=function(i){var a=this._methods[i];if(!a)throw new Error("No control method registered with id "+i);a.enabled&&this.disableMethod(i),delete this._methods[i]},c.prototype.enableMethod=function(i){var a=this._methods[i];if(!a)throw new Error("No control method registered with id "+i);a.enabled||(a.enabled=!0,a.active&&this._incrementActiveCount(),this._listen(i),this._updateComposer(),this.emit("methodEnabled",i))},c.prototype.disableMethod=function(i){var a=this._methods[i];if(!a)throw new Error("No control method registered with id "+i);!a.enabled||(a.enabled=!1,a.active&&this._decrementActiveCount(),this._unlisten(i),this._updateComposer(),this.emit("methodDisabled",i))},c.prototype.addMethodGroup=function(i,a){this._methodGroups[i]=a},c.prototype.removeMethodGroup=function(i){delete this._methodGroups[i]},c.prototype.methodGroups=function(){var i={};for(var a in this._methodGroups)i[a]=this._methodGroups[a];return i},c.prototype.enableMethodGroup=function(i){var a=this;a._methodGroups[i].forEach(function(h){a.enableMethod(h)})},c.prototype.disableMethodGroup=function(i){var a=this;a._methodGroups[i].forEach(function(h){a.disableMethod(h)})},c.prototype.enabled=function(){return this._enabled},c.prototype.enable=function(){this._enabled||(this._enabled=!0,this._activeCount>0&&this.emit("active"),this.emit("enabled"),this._updateComposer())},c.prototype.disable=function(){!this._enabled||(this._enabled=!1,this._activeCount>0&&this.emit("inactive"),this.emit("disabled"),this._updateComposer())},c.prototype.attach=function(i){this._attachedRenderLoop&&this.detach(),this._attachedRenderLoop=i,this._beforeRenderHandler=this._updateViewsWithControls.bind(this),this._changeHandler=i.renderOnNextFrame.bind(i),this._attachedRenderLoop.addEventListener("beforeRender",this._beforeRenderHandler),this._composer.addEventListener("change",this._changeHandler)},c.prototype.detach=function(){!this._attachedRenderLoop||(this._attachedRenderLoop.removeEventListener("beforeRender",this._beforeRenderHandler),this._composer.removeEventListener("change",this._changeHandler),this._beforeRenderHandler=null,this._changeHandler=null,this._attachedRenderLoop=null)},c.prototype.attached=function(){return null!=this._attachedRenderLoop},c.prototype._listen=function(i){var a=this._methods[i];if(!a)throw new Error("Bad method id");a.instance.addEventListener("active",a.activeHandler),a.instance.addEventListener("inactive",a.inactiveHandler)},c.prototype._unlisten=function(i){var a=this._methods[i];if(!a)throw new Error("Bad method id");a.instance.removeEventListener("active",a.activeHandler),a.instance.removeEventListener("inactive",a.inactiveHandler)},c.prototype._handleActive=function(i){var a=this._methods[i];if(!a)throw new Error("Bad method id");if(!a.enabled)throw new Error("Should not receive event from disabled control method");a.active||(a.active=!0,this._incrementActiveCount())},c.prototype._handleInactive=function(i){var a=this._methods[i];if(!a)throw new Error("Bad method id");if(!a.enabled)throw new Error("Should not receive event from disabled control method");a.active&&(a.active=!1,this._decrementActiveCount())},c.prototype._incrementActiveCount=function(){this._activeCount++,l&&this._checkActiveCount(),this._enabled&&1===this._activeCount&&this.emit("active")},c.prototype._decrementActiveCount=function(){this._activeCount--,l&&this._checkActiveCount(),this._enabled&&0===this._activeCount&&this.emit("inactive")},c.prototype._checkActiveCount=function(){var i=0;for(var a in this._methods){var h=this._methods[a];h.enabled&&h.active&&i++}if(i!=this._activeCount)throw new Error("Bad control state")},c.prototype._updateComposer=function(){var i=this._composer;for(var a in this._methods){var h=this._methods[a],A=this._enabled&&h.enabled;A&&!i.has(h.instance)&&i.add(h.instance),!A&&i.has(h.instance)&&i.remove(h.instance)}},c.prototype._updateViewsWithControls=function(){var i=this._composer.offsets();i.changing&&this._attachedRenderLoop.renderOnNextFrame(),this.updatedViews_.length=0;for(var a=this._attachedRenderLoop.stage().listLayers(),h=0;h<a.length;h++){var A=a[h].view();this.updatedViews_.indexOf(A)<0&&(a[h].view().updateWithControlParameters(i.offsets),this.updatedViews_.push(A))}},V.exports=c},2074:(V,U,s)=>{"use strict";var y=s(8843),M=s(4809),u=s(7516),l=s(7802),c=s(1230).maxFriction,i=s(6873),a={friction:6,maxFrictionTime:.3},h=typeof MARZIPANODEBUG<"u"&&MARZIPANODEBUG.controls;function A(v,E,C){this._element=v,this._opts=l(C||{},a),this._startEvent=null,this._lastEvent=null,this._active=!1,this._dynamics={x:new M,y:new M},this._hammer=u.get(v,E),this._hammer.on("hammer.input",this._handleHammerEvent.bind(this)),this._hammer.on("panstart",this._handleStart.bind(this)),this._hammer.on("panmove",this._handleMove.bind(this)),this._hammer.on("panend",this._handleEnd.bind(this)),this._hammer.on("pancancel",this._handleEnd.bind(this))}y(A),A.prototype.destroy=function(){this._hammer.release(),i(this)},A.prototype._handleHammerEvent=function(v){if(v.isFirst){if(h&&this._active)throw new Error("DragControlMethod active detected when already active");this._active=!0,this.emit("active")}if(v.isFinal){if(h&&!this._active)throw new Error("DragControlMethod inactive detected when already inactive");this._active=!1,this.emit("inactive")}},A.prototype._handleStart=function(v){v.preventDefault(),this._startEvent=v},A.prototype._handleMove=function(v){v.preventDefault(),this._startEvent&&(this._updateDynamicsMove(v),this.emit("parameterDynamics","axisScaledX",this._dynamics.x),this.emit("parameterDynamics","axisScaledY",this._dynamics.y))},A.prototype._handleEnd=function(v){v.preventDefault(),this._startEvent&&(this._updateDynamicsRelease(v),this.emit("parameterDynamics","axisScaledX",this._dynamics.x),this.emit("parameterDynamics","axisScaledY",this._dynamics.y)),this._startEvent=!1,this._lastEvent=!1},A.prototype._updateDynamicsMove=function(v){var E=v.deltaX,C=v.deltaY,z=this._lastEvent||this._startEvent;z&&(E-=z.deltaX,C-=z.deltaY);var B=this._element.getBoundingClientRect();E/=B.right-B.left,C/=B.bottom-B.top,this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.offset=-E,this._dynamics.y.offset=-C,this._lastEvent=v};var _=[null,null];A.prototype._updateDynamicsRelease=function(v){var E=this._element.getBoundingClientRect(),B=1e3*v.velocityX/(E.right-E.left),D=1e3*v.velocityY/(E.bottom-E.top);this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.velocity=B,this._dynamics.y.velocity=D,c(this._opts.friction,this._dynamics.x.velocity,this._dynamics.y.velocity,this._opts.maxFrictionTime,_),this._dynamics.x.friction=_[0],this._dynamics.y.friction=_[1]},V.exports=A},4809:V=>{"use strict";function U(){this.velocity=null,this.friction=null,this.offset=null}U.equals=function(y,M){return y.velocity===M.velocity&&y.friction===M.friction&&y.offset===M.offset},U.prototype.equals=function(y){return U.equals(this,y)},U.prototype.update=function(y,M){y.offset&&(this.offset=this.offset||0,this.offset+=y.offset);var u=this.offsetFromVelocity(M);u&&(this.offset=this.offset||0,this.offset+=u),this.velocity=y.velocity,this.friction=y.friction},U.prototype.reset=function(){this.velocity=null,this.friction=null,this.offset=null},U.prototype.velocityAfter=function(y){return this.velocity?this.friction?function s(y,M){return y<0?Math.min(0,y+M):y>0?Math.max(0,y-M):0}(this.velocity,this.friction*y):this.velocity:null},U.prototype.offsetFromVelocity=function(y){y=Math.min(y,this.nullVelocityTime());var M=this.velocityAfter(y);return(this.velocity+M)/2*y},U.prototype.nullVelocityTime=function(){return null==this.velocity?0:this.velocity&&!this.friction?1/0:Math.abs(this.velocity/this.friction)},V.exports=U},9041:(V,U,s)=>{"use strict";var y=s(8843),M=s(4809),u=s(6873);function l(c,i,a,h){if(!c)throw new Error("ElementPressControlMethod: element must be defined");if(!i)throw new Error("ElementPressControlMethod: parameter must be defined");if(!a)throw new Error("ElementPressControlMethod: velocity must be defined");if(!h)throw new Error("ElementPressControlMethod: friction must be defined");this._element=c,this._pressHandler=this._handlePress.bind(this),this._releaseHandler=this._handleRelease.bind(this),c.addEventListener("mousedown",this._pressHandler),c.addEventListener("mouseup",this._releaseHandler),c.addEventListener("mouseleave",this._releaseHandler),c.addEventListener("touchstart",this._pressHandler),c.addEventListener("touchmove",this._releaseHandler),c.addEventListener("touchend",this._releaseHandler),this._parameter=i,this._velocity=a,this._friction=h,this._dynamics=new M,this._pressing=!1}y(l),l.prototype.destroy=function(){this._element.removeEventListener("mousedown",this._pressHandler),this._element.removeEventListener("mouseup",this._releaseHandler),this._element.removeEventListener("mouseleave",this._releaseHandler),this._element.removeEventListener("touchstart",this._pressHandler),this._element.removeEventListener("touchmove",this._releaseHandler),this._element.removeEventListener("touchend",this._releaseHandler),u(this)},l.prototype._handlePress=function(){this._pressing=!0,this._dynamics.velocity=this._velocity,this._dynamics.friction=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("active")},l.prototype._handleRelease=function(){this._pressing&&(this._dynamics.friction=this._friction,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive")),this._pressing=!1},V.exports=l},7516:(V,U,s)=>{"use strict";var y=s(1524),M=s(3845),u=1,l="MarzipanoHammerElementId";function c(h,A){return h[l]||(h[l]=u++),A+h[l]}function i(){this._managers={},this._refCount={}}function a(h,A,_,v){this._manager=A,this._element=_,this._type=v,this._hammerGestures=h,this._eventHandlers=[]}i.prototype.get=function(h,A){var _=c(h,A);return this._managers[_]||(this._managers[_]=this._createManager(h,A),this._refCount[_]=0),this._refCount[_]++,new a(this,this._managers[_],h,A)},i.prototype._createManager=function(h,A){var _=new y.Manager(h);return"mouse"===A?_.add(new y.Pan({direction:y.DIRECTION_ALL,threshold:0})):("touch"===A||"pen"===A||"kinect"===A)&&(_.add(new y.Pan({direction:y.DIRECTION_ALL,threshold:20,pointers:1})),M.msie&&parseFloat(M.version)<10||_.add(new y.Pinch)),_},i.prototype._releaseHandle=function(h,A){var _=c(h,A);this._refCount[_]&&(this._refCount[_]--,this._refCount[_]||(this._managers[_].destroy(),delete this._managers[_],delete this._refCount[_]))},a.prototype.on=function(h,A){var _=this._type,v=function(E){_===E.pointerType&&A(E)};this._eventHandlers.push({events:h,handler:v}),this._manager.on(h,v)},a.prototype.release=function(){for(var h=0;h<this._eventHandlers.length;h++){var A=this._eventHandlers[h];this._manager.off(A.events,A.handler)}this._hammerGestures._releaseHandle(this._element,this._type),this._manager=null,this._element=null,this._type=null,this._hammerGestures=null},a.prototype.manager=function(){return this._manager},V.exports=new i},1174:(V,U,s)=>{"use strict";var y=s(8843),M=s(4809),u=s(6873);function l(c,i,a,h,A){if(!c)throw new Error("KeyControlMethod: keyCode must be defined");if(!i)throw new Error("KeyControlMethod: parameter must be defined");if(!a)throw new Error("KeyControlMethod: velocity must be defined");if(!h)throw new Error("KeyControlMethod: friction must be defined");A=A||document,this._keyCode=c,this._parameter=i,this._velocity=a,this._friction=h,this._element=A,this._keydownHandler=this._handlePress.bind(this),this._keyupHandler=this._handleRelease.bind(this),this._blurHandler=this._handleBlur.bind(this),this._element.addEventListener("keydown",this._keydownHandler),this._element.addEventListener("keyup",this._keyupHandler),window.addEventListener("blur",this._blurHandler),this._dynamics=new M,this._pressing=!1}y(l),l.prototype.destroy=function(){this._element.removeEventListener("keydown",this._keydownHandler),this._element.removeEventListener("keyup",this._keyupHandler),window.removeEventListener("blur",this._blurHandler),u(this)},l.prototype._handlePress=function(c){c.keyCode===this._keyCode&&(this._pressing=!0,this._dynamics.velocity=this._velocity,this._dynamics.friction=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("active"))},l.prototype._handleRelease=function(c){c.keyCode===this._keyCode&&(this._pressing&&(this._dynamics.friction=this._friction,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive")),this._pressing=!1)},l.prototype._handleBlur=function(){this._dynamics.velocity=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive"),this._pressing=!1},V.exports=l},131:(V,U,s)=>{"use strict";var y=s(8843),M=s(4809),u=s(7516),l=s(6873);function c(i,a,h){this._hammer=u.get(i,a),this._lastEvent=null,this._active=!1,this._dynamics=new M,this._hammer.on("pinchstart",this._handleStart.bind(this)),this._hammer.on("pinch",this._handleEvent.bind(this)),this._hammer.on("pinchend",this._handleEnd.bind(this)),this._hammer.on("pinchcancel",this._handleEnd.bind(this))}y(c),c.prototype.destroy=function(){this._hammer.release(),l(this)},c.prototype._handleStart=function(){this._active||(this._active=!0,this.emit("active"))},c.prototype._handleEnd=function(){this._lastEvent=null,this._active&&(this._active=!1,this.emit("inactive"))},c.prototype._handleEvent=function(i){var a=i.scale;this._lastEvent&&(a/=this._lastEvent.scale),this._dynamics.offset=-1*(a-1),this.emit("parameterDynamics","zoom",this._dynamics),this._lastEvent=i},V.exports=c},4016:(V,U,s)=>{"use strict";var y=s(8843),M=s(4809),u=s(7516),l=s(7802),c=s(1230).maxFriction,i=s(6873),a={speed:8,friction:6,maxFrictionTime:.3};function h(_,v,E){this._element=_,this._opts=l(E||{},a),this._active=!1,this._hammer=u.get(_,v),this._dynamics={x:new M,y:new M},this._hammer.on("panstart",this._handleStart.bind(this)),this._hammer.on("panmove",this._handleMove.bind(this)),this._hammer.on("panend",this._handleRelease.bind(this)),this._hammer.on("pancancel",this._handleRelease.bind(this))}y(h),h.prototype.destroy=function(){this._hammer.release(),i(this)},h.prototype._handleStart=function(_){_.preventDefault(),this._active||(this._active=!0,this.emit("active"))},h.prototype._handleMove=function(_){_.preventDefault(),this._updateDynamics(_,!1)},h.prototype._handleRelease=function(_){_.preventDefault(),this._updateDynamics(_,!0),this._active&&(this._active=!1,this.emit("inactive"))};var A=[null,null];h.prototype._updateDynamics=function(_,v){var E=this._element.getBoundingClientRect(),B=Math.max(E.right-E.left,E.bottom-E.top),D=_.deltaX/B*this._opts.speed,p=_.deltaY/B*this._opts.speed;this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.velocity=D,this._dynamics.y.velocity=p,v&&(c(this._opts.friction,this._dynamics.x.velocity,this._dynamics.y.velocity,this._opts.maxFrictionTime,A),this._dynamics.x.friction=A[0],this._dynamics.y.friction=A[1]),this.emit("parameterDynamics","x",this._dynamics.x),this.emit("parameterDynamics","y",this._dynamics.y)},V.exports=h},130:(V,U,s)=>{"use strict";var y=s(8843),M=s(4809),u=s(1515),l=s(7802),c=s(6873),i={frictionTime:.2,zoomDelta:.001};function a(A,_){this._opts=l(_||{},i),this._dynamics=new M,this._eventList=[],this._wheelListener=new u(A,(this._opts.frictionTime?this.withSmoothing:this.withoutSmoothing).bind(this),{passive:!1})}function h(A){return A.deltaY*(1==A.deltaMode?20:1)}y(a),a.prototype.destroy=function(){this._wheelListener.destroy(),c(this)},a.prototype.withoutSmoothing=function(A){this._dynamics.offset=h(A)*this._opts.zoomDelta,this.emit("parameterDynamics","zoom",this._dynamics),A.preventDefault(),this.emit("active"),this.emit("inactive")},a.prototype.withSmoothing=function(A){var _=A.timeStamp;for(this._eventList.push(A);this._eventList[0].timeStamp<_-1e3*this._opts.frictionTime;)this._eventList.shift(0);for(var v=0,E=0;E<this._eventList.length;E++)v+=h(this._eventList[E])*this._opts.zoomDelta/this._opts.frictionTime;this._dynamics.velocity=v,this._dynamics.friction=Math.abs(v)/this._opts.frictionTime,this.emit("parameterDynamics","zoom",this._dynamics),A.preventDefault(),this.emit("active"),this.emit("inactive")},V.exports=a},9752:(V,U,s)=>{"use strict";var y=s(8843),M=s(4809),u=s(6873);function l(c){if(!c)throw new Error("VelocityControlMethod: parameter must be defined");this._parameter=c,this._dynamics=new M}y(l),l.prototype.destroy=function(){u(this)},l.prototype.setVelocity=function(c){this._dynamics.velocity=c,this.emit("parameterDynamics",this._parameter,this._dynamics)},l.prototype.setFriction=function(c){this._dynamics.friction=c,this.emit("parameterDynamics",this._parameter,this._dynamics)},V.exports=l},1515:(V,U,s)=>{"use strict";var l,y=s(6873);function M(i,a,h){var A=c();if(h||(h={passive:!0}),"wheel"===A)this._fun=a,this._elem=i,this._elem.addEventListener("wheel",this._fun,h);else{if("mousewheel"!==A)throw new Error("Browser does not support mouse wheel events");this._fun=function u(i){return function(h){h||(h=window.event);var A={originalEvent:h,target:h.target||h.srcElement,type:"wheel",deltaMode:1,deltaX:0,deltaZ:0,timeStamp:h.timeStamp||Date.now(),preventDefault:h.preventDefault.bind(h)};return A.deltaY=-1/40*h.wheelDelta,h.wheelDeltaX&&(A.deltaX=-1/40*h.wheelDeltaX),i(A)}}(a),this._elem=i,this._elem.addEventListener("mousewheel",this._fun,h)}}function c(){return void 0!==l?l:l="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":null}M.prototype.destroy=function(){this._elem.removeEventListener(c(),this._fun),y(this)},V.exports=M},9512:(V,U,s)=>{"use strict";var y=s(7802),M=s(2074),u=s(4016),l=s(130),c=s(131),i=s(1174),a={mouseViewMode:"drag"};V.exports=function h(A,_,v){v=y(v||{},a);var E={mouseViewDrag:new M(_,"mouse"),mouseViewQtvr:new u(_,"mouse"),touchView:new M(_,"touch"),pinch:new c(_,"touch"),leftArrowKey:new i(37,"x",-.7,3),rightArrowKey:new i(39,"x",.7,3),upArrowKey:new i(38,"y",-.7,3),downArrowKey:new i(40,"y",.7,3),plusKey:new i(107,"zoom",-.7,3),minusKey:new i(109,"zoom",.7,3),wKey:new i(87,"y",-.7,3),aKey:new i(65,"x",-.7,3),sKey:new i(83,"y",.7,3),dKey:new i(68,"x",.7,3),qKey:new i(81,"roll",.7,3),eKey:new i(69,"roll",-.7,3)};!1!==v.scrollZoom&&(E.scrollZoom=new l(_));var C={arrowKeys:["leftArrowKey","rightArrowKey","upArrowKey","downArrowKey"],plusMinusKeys:["plusKey","minusKey"],wasdKeys:["wKey","aKey","sKey","dKey"],qeKeys:["qKey","eKey"]},z=["scrollZoom","touchView","pinch"];switch(v.mouseViewMode){case"drag":z.push("mouseViewDrag");break;case"qtvr":z.push("mouseViewQtvr");break;default:throw new Error("Unknown mouse view mode: "+v.mouseViewMode)}for(var B in E)A.registerMethod(B,E[B]),z.indexOf(B)>=0&&A.enableMethod(B);for(var p in C)A.addMethodGroup(p,C[p]);return E}},1230:V=>{"use strict";function s(y,M,u,l){var c=Math.atan(M/y);l[0]=u*Math.cos(c),l[1]=u*Math.sin(c)}V.exports={maxFriction:function U(y,M,u,l,c){var i=Math.sqrt(Math.pow(M,2)+Math.pow(u,2));s(M,u,y=Math.max(y,i/l),c),c[0]=Math.abs(c[0]),c[1]=Math.abs(c[1])},changeVectorNorm:s}},2363:(V,U,s)=>{"use strict";var y=s(5946),M=s(3864),u=s(9799),l=s(7299),c=s(9868),i=s(8279).makeLevelList,a=s(8279).makeSelectableLevelList,h=s(6438),A=s(5593),_=s(4699),v=s(8452).vec3,E=s(8452).vec4,z="fudlrb",B={f:{x:0,y:0},b:{x:0,y:Math.PI},l:{x:0,y:Math.PI/2},r:{x:0,y:-Math.PI/2},u:{x:Math.PI/2,y:0},d:{x:-Math.PI/2,y:0}},D=v.create();function p(W,X,J,tt){X&&v.rotateZ(W,W,D,X),J&&v.rotateX(W,W,D,J),tt&&v.rotateY(W,W,D,tt)}for(var L={},R=0;R<z.length;R++){var H=z[R],w=B[H],d=v.fromValues(0,0,-1);p(d,0,w.x,w.y),L[H]=d}var T={f:["l","r","u","d"],b:["r","l","u","d"],l:["b","f","u","d"],r:["f","b","u","d"],u:["l","r","b","f"],d:["l","r","f","b"]},S=[[0,1],[1,0],[0,-1],[-1,0]];function I(W,X,J,tt,et){this.face=W,this.x=X,this.y=J,this.z=tt,this._geometry=et,this._level=et.levelList[tt]}function O(W){if(this.constructor.super_.call(this,W),this._size=W.size,this._tileSize=W.tileSize,this._size%this._tileSize!=0)throw new Error("Level size is not multiple of tile size: "+this._size+" "+this._tileSize)}function Y(W){if("array"!==_(W))throw new Error("Level list must be an array");this.levelList=i(W,O),this.selectableLevelList=a(this.levelList);for(var X=1;X<this.levelList.length;X++)this.levelList[X]._validateWithParentLevel(this.levelList[X-1]);this._tileSearcher=new u(this),this._neighborsCache=new l(64),this._vec=E.create(),this._viewSize={}}I.prototype.rotX=function(){return B[this.face].x},I.prototype.rotY=function(){return B[this.face].y},I.prototype.centerX=function(){return(this.x+.5)/this._level.numHorizontalTiles()-.5},I.prototype.centerY=function(){return.5-(this.y+.5)/this._level.numVerticalTiles()},I.prototype.scaleX=function(){return 1/this._level.numHorizontalTiles()},I.prototype.scaleY=function(){return 1/this._level.numVerticalTiles()},I.prototype.width=function(){return this._level.tileWidth()},I.prototype.height=function(){return this._level.tileHeight()},I.prototype.levelWidth=function(){return this._level.width()},I.prototype.levelHeight=function(){return this._level.height()},I.prototype.atTopLevel=function(){return 0===this.z},I.prototype.atBottomLevel=function(){return this.z===this._geometry.levelList.length-1},I.prototype.atTopEdge=function(){return 0===this.y},I.prototype.atBottomEdge=function(){return this.y===this._level.numVerticalTiles()-1},I.prototype.atLeftEdge=function(){return 0===this.x},I.prototype.atRightEdge=function(){return this.x===this._level.numHorizontalTiles()-1},I.prototype.padTop=function(){return this.atTopEdge()&&/[fu]/.test(this.face)},I.prototype.padBottom=function(){return!this.atBottomEdge()||/[fd]/.test(this.face)},I.prototype.padLeft=function(){return this.atLeftEdge()&&/[flud]/.test(this.face)},I.prototype.padRight=function(){return!this.atRightEdge()||/[frud]/.test(this.face)},I.prototype.vertices=function(W){W||(W=[v.create(),v.create(),v.create(),v.create()]);var X=B[this.face];function J(ut,pt,dt){v.set(ut,pt,dt,-.5),p(ut,0,X.x,X.y)}var tt=this.centerX()-this.scaleX()/2,et=this.centerX()+this.scaleX()/2,nt=this.centerY()-this.scaleY()/2,ct=this.centerY()+this.scaleY()/2;return J(W[0],tt,ct),J(W[1],et,ct),J(W[2],et,nt),J(W[3],tt,nt),W},I.prototype.parent=function(){if(this.atTopLevel())return null;var X=this.z,tt=this.y,et=this._geometry,nt=et.levelList[X],ct=et.levelList[X-1];return new I(this.face,Math.floor(this.x/nt.numHorizontalTiles()*ct.numHorizontalTiles()),Math.floor(tt/nt.numVerticalTiles()*ct.numVerticalTiles()),X-1,et)},I.prototype.children=function(W){if(this.atBottomLevel())return null;var X=this.face,J=this.z,tt=this.x,et=this.y,nt=this._geometry,ct=nt.levelList[J],ut=nt.levelList[J+1],pt=ut.numHorizontalTiles()/ct.numHorizontalTiles(),dt=ut.numVerticalTiles()/ct.numVerticalTiles();W=W||[];for(var gt=0;gt<pt;gt++)for(var Pt=0;Pt<dt;Pt++)W.push(new I(X,pt*tt+gt,dt*et+Pt,J+1,nt));return W},I.prototype.neighbors=function(){var W=this._geometry,X=W._neighborsCache,J=X.get(this);if(J)return J;for(var tt=W._vec,et=this.face,nt=this.x,ct=this.y,ut=this.z,pt=this._level,dt=pt.numHorizontalTiles(),gt=pt.numVerticalTiles(),Pt=[],Ct=0;Ct<S.length;Ct++){var bt=nt+S[Ct][0],yt=ct+S[Ct][1],At=ut,Ft=et;if(bt<0||bt>=dt||yt<0||yt>=gt){var It,Gt=this.centerX(),jt=this.centerY();bt<0?(v.set(tt,-.5,jt,-.5),Ft=T[et][0]):bt>=dt?(v.set(tt,.5,jt,-.5),Ft=T[et][1]):yt<0?(v.set(tt,Gt,.5,-.5),Ft=T[et][2]):yt>=gt&&(v.set(tt,Gt,-.5,-.5),Ft=T[et][3]),p(tt,0,(It=B[et]).x,It.y),p(tt,0,-(It=B[Ft]).x,-It.y),bt=h(Math.floor((.5+tt[0])*dt),0,dt-1),yt=h(Math.floor((.5-tt[1])*gt),0,gt-1)}Pt.push(new I(Ft,bt,yt,At,W))}return X.set(this,Pt),Pt},I.prototype.hash=function(){return M(z.indexOf(this.face),this.z,this.y,this.x)},I.prototype.equals=function(W){return this.geometry===W.geometry&&this.face===W.face&&this.z===W.z&&this.y===W.y&&this.x===W.x},I.prototype.cmp=function(W){return A(this.z,W.z)||A(z.indexOf(this.face),z.indexOf(W.face))||A(this.y,W.y)||A(this.x,W.x)},I.prototype.str=function(){return"CubeTile("+tile.face+", "+tile.x+", "+tile.y+", "+tile.z+")"},y(O,c),O.prototype.width=function(){return this._size},O.prototype.height=function(){return this._size},O.prototype.tileWidth=function(){return this._tileSize},O.prototype.tileHeight=function(){return this._tileSize},O.prototype._validateWithParentLevel=function(W){var X=this.width(),J=this.height(),tt=this.tileWidth(),et=this.tileHeight(),nt=this.numHorizontalTiles(),ct=this.numVerticalTiles(),ut=W.width(),pt=W.height(),dt=W.tileWidth(),gt=W.tileHeight(),Pt=W.numHorizontalTiles(),Ct=W.numVerticalTiles();if(X%ut!=0)throw new Error("Level width must be multiple of parent level: "+X+" vs. "+ut);if(J%pt!=0)throw new Error("Level height must be multiple of parent level: "+J+" vs. "+pt);if(nt%Pt!=0)throw new Error("Number of horizontal tiles must be multiple of parent level: "+nt+" ("+X+"/"+tt+") vs. "+Pt+" ("+ut+"/"+dt+")");if(ct%Ct!=0)throw new Error("Number of vertical tiles must be multiple of parent level: "+ct+" ("+J+"/"+et+") vs. "+Ct+" ("+pt+"/"+gt+")")},Y.prototype.maxTileSize=function(){for(var W=0,X=0;X<this.levelList.length;X++){var J=this.levelList[X];W=Math.max(W,J.tileWidth,J.tileHeight)}return W},Y.prototype.levelTiles=function(W,X){var J=this.levelList.indexOf(W),tt=W.numHorizontalTiles()-1,et=W.numVerticalTiles()-1;X=X||[];for(var nt=0;nt<z.length;nt++)for(var ct=z[nt],ut=0;ut<=tt;ut++)for(var pt=0;pt<=et;pt++)X.push(new I(ct,ut,pt,J,this));return X},Y.prototype._closestTile=function(W,X){var J=this._vec;E.set(J,0,0,1,1),E.transformMat4(J,J,W.inverseProjection());var tt=1/0,et=null;for(var nt in L){var ut=1-v.dot(L[nt],J);ut<tt&&(tt=ut,et=nt)}for(var pt=Math.max(Math.abs(J[0]),Math.abs(J[1]),Math.abs(J[2]))/.5,dt=0;dt<3;dt++)J[dt]=J[dt]/pt;var gt=B[et];p(J,0,-gt.x,-gt.y);var Pt=this.levelList.indexOf(X),Ct=X.numHorizontalTiles(),Ut=X.numVerticalTiles();return new I(et,h(Math.floor((.5+J[0])*Ct),0,Ct-1),h(Math.floor((.5-J[1])*Ut),0,Ut-1),Pt,this)},Y.prototype.visibleTiles=function(W,X,J){var tt=this._viewSize,et=this._tileSearcher;if(J=J||[],W.size(tt),0===tt.width||0===tt.height)return J;var nt=this._closestTile(W,X);if(!et.search(W,nt,J))throw new Error("Starting tile is not visible");return J},Y.Tile=Y.prototype.Tile=I,Y.type=Y.prototype.type="cube",I.type=I.prototype.type="cube",V.exports=Y},7216:(V,U,s)=>{"use strict";var y=s(5946),M=s(3864),u=s(5593),l=s(8279),c=s(9868),i=s(4699);function a(_,v){this.z=_,this._geometry=v,this._level=v.levelList[_]}function h(_){this.constructor.super_.call(this,_),this._width=_.width}function A(_){if("array"!==i(_))throw new Error("Level list must be an array");this.levelList=l.makeLevelList(_,h),this.selectableLevelList=l.makeSelectableLevelList(this.levelList)}a.prototype.rotX=function(){return 0},a.prototype.rotY=function(){return 0},a.prototype.centerX=function(){return.5},a.prototype.centerY=function(){return.5},a.prototype.scaleX=function(){return 1},a.prototype.scaleY=function(){return 1},a.prototype.width=function(){return this._level.tileWidth()},a.prototype.height=function(){return this._level.tileHeight()},a.prototype.levelWidth=function(){return this._level.width()},a.prototype.levelHeight=function(){return this._level.height()},a.prototype.atTopLevel=function(){return 0===this.z},a.prototype.atBottomLevel=function(){return this.z===this._geometry.levelList.length-1},a.prototype.atTopEdge=function(){return!0},a.prototype.atBottomEdge=function(){return!0},a.prototype.atLeftEdge=function(){return!0},a.prototype.atRightEdge=function(){return!0},a.prototype.padTop=function(){return!1},a.prototype.padBottom=function(){return!1},a.prototype.padLeft=function(){return!1},a.prototype.padRight=function(){return!1},a.prototype.parent=function(){return this.atTopLevel()?null:new a(this.z-1,this._geometry)},a.prototype.children=function(_){return this.atBottomLevel()?null:((_=_||[]).push(new a(this.z+1,this._geometry)),_)},a.prototype.neighbors=function(){return[]},a.prototype.hash=function(){return M(this.z)},a.prototype.equals=function(_){return this.geometry===_.geometry&&this.z===_.z},a.prototype.cmp=function(_){return u(this.z,_.z)},a.prototype.str=function(){return"EquirectTile("+tile.z+")"},y(h,c),h.prototype.width=function(){return this._width},h.prototype.height=function(){return this._width/2},h.prototype.tileWidth=function(){return this._width},h.prototype.tileHeight=function(){return this._width/2},A.prototype.maxTileSize=function(){for(var _=0,v=0;v<this.levelList.length;v++){var E=this.levelList[v];_=Math.max(_,E.tileWidth,E.tileHeight)}return _},A.prototype.levelTiles=function(_,v){var E=this.levelList.indexOf(_);return(v=v||[]).push(new a(E,this)),v},A.prototype.visibleTiles=function(_,v,E){var C=new a(this.levelList.indexOf(v),this);(E=E||[]).length=0,E.push(C)},A.Tile=A.prototype.Tile=a,A.type=A.prototype.type="equirect",a.type=a.prototype.type="equirect",V.exports=A},4040:(V,U,s)=>{"use strict";var y=s(5946),M=s(3864),u=s(9799),l=s(7299),c=s(9868),i=s(8279).makeLevelList,a=s(8279).makeSelectableLevelList,h=s(6438),A=s(4501),_=s(5593),v=s(4699),E=s(8452).vec2,C=s(8452).vec4,B=[[0,1],[1,0],[0,-1],[-1,0]];function D(R,H,w,d){this.x=R,this.y=H,this.z=w,this._geometry=d,this._level=d.levelList[w]}function p(R){this.constructor.super_.call(this,R),this._width=R.width,this._height=R.height,this._tileWidth=R.tileWidth,this._tileHeight=R.tileHeight}function L(R){if("array"!==v(R))throw new Error("Level list must be an array");this.levelList=i(R,p),this.selectableLevelList=a(this.levelList);for(var H=1;H<this.levelList.length;H++)this.levelList[H]._validateWithParentLevel(this.levelList[H-1]);this._tileSearcher=new u(this),this._neighborsCache=new l(64),this._vec=C.create(),this._viewSize={}}D.prototype.rotX=function(){return 0},D.prototype.rotY=function(){return 0},D.prototype.centerX=function(){var R=this._level.width(),H=this._level.tileWidth();return(this.x*H+.5*this.width())/R-.5},D.prototype.centerY=function(){var R=this._level.height(),H=this._level.tileHeight();return.5-(this.y*H+.5*this.height())/R},D.prototype.scaleX=function(){var R=this._level.width();return this.width()/R},D.prototype.scaleY=function(){var R=this._level.height();return this.height()/R},D.prototype.width=function(){var R=this._level.width(),H=this._level.tileWidth();return this.atRightEdge()&&A(R,H)||H},D.prototype.height=function(){var R=this._level.height(),H=this._level.tileHeight();return this.atBottomEdge()&&A(R,H)||H},D.prototype.levelWidth=function(){return this._level.width()},D.prototype.levelHeight=function(){return this._level.height()},D.prototype.atTopLevel=function(){return 0===this.z},D.prototype.atBottomLevel=function(){return this.z===this._geometry.levelList.length-1},D.prototype.atTopEdge=function(){return 0===this.y},D.prototype.atBottomEdge=function(){return this.y===this._level.numVerticalTiles()-1},D.prototype.atLeftEdge=function(){return 0===this.x},D.prototype.atRightEdge=function(){return this.x===this._level.numHorizontalTiles()-1},D.prototype.padTop=function(){return!1},D.prototype.padBottom=function(){return!this.atBottomEdge()},D.prototype.padLeft=function(){return!1},D.prototype.padRight=function(){return!this.atRightEdge()},D.prototype.vertices=function(R){R||(R=[E.create(),E.create(),E.create(),E.create()]);var H=this.centerX()-this.scaleX()/2,w=this.centerX()+this.scaleX()/2,d=this.centerY()-this.scaleY()/2,T=this.centerY()+this.scaleY()/2;return E.set(R[0],H,T),E.set(R[1],w,T),E.set(R[2],w,d),E.set(R[3],H,d),R},D.prototype.parent=function(){if(this.atTopLevel())return null;var R=this._geometry,H=this.z-1;return new D(Math.floor(this.x/2),Math.floor(this.y/2),H,R)},D.prototype.children=function(R){if(this.atBottomLevel())return null;var H=this._geometry,w=this.z+1;return(R=R||[]).push(new D(2*this.x,2*this.y,w,H)),R.push(new D(2*this.x,2*this.y+1,w,H)),R.push(new D(2*this.x+1,2*this.y,w,H)),R.push(new D(2*this.x+1,2*this.y+1,w,H)),R},D.prototype.neighbors=function(){var R=this._geometry,H=R._neighborsCache,w=H.get(this);if(w)return w;for(var d=this.x,T=this.y,S=this.z,I=this._level,O=I.numHorizontalTiles()-1,Y=I.numVerticalTiles()-1,W=[],X=0;X<B.length;X++){var et=d+B[X][0],nt=T+B[X][1];0<=et&&et<=O&&0<=nt&&nt<=Y&&W.push(new D(et,nt,S,R))}return H.set(this,W),W},D.prototype.hash=function(){return M(this.z,this.y,this.x)},D.prototype.equals=function(R){return this.geometry===R.geometry&&this.z===R.z&&this.y===R.y&&this.x===R.x},D.prototype.cmp=function(R){return _(this.z,R.z)||_(this.y,R.y)||_(this.x,R.x)},D.prototype.str=function(){return"FlatTile("+tile.x+", "+tile.y+", "+tile.z+")"},y(p,c),p.prototype.width=function(){return this._width},p.prototype.height=function(){return this._height},p.prototype.tileWidth=function(){return this._tileWidth},p.prototype.tileHeight=function(){return this._tileHeight},p.prototype._validateWithParentLevel=function(R){var H=this.width(),w=this.height(),d=this.tileWidth(),T=this.tileHeight(),S=R.width(),I=R.height(),O=R.tileWidth(),Y=R.tileHeight();return H%S!=0?new Error("Level width must be multiple of parent level: "+H+" vs. "+S):w%I!=0?new Error("Level height must be multiple of parent level: "+w+" vs. "+I):d%O!=0?new Error("Level tile width must be multiple of parent level: "+d+" vs. "+O):T%Y!=0?new Error("Level tile height must be multiple of parent level: "+T+" vs. "+Y):void 0},L.prototype.maxTileSize=function(){for(var R=0,H=0;H<this.levelList.length;H++){var w=this.levelList[H];R=Math.max(R,w.tileWidth,w.tileHeight)}return R},L.prototype.levelTiles=function(R,H){var w=this.levelList.indexOf(R),d=R.numHorizontalTiles()-1,T=R.numVerticalTiles()-1;H||(H=[]);for(var S=0;S<=d;S++)for(var I=0;I<=T;I++)H.push(new D(S,I,w,this));return H},L.prototype._closestTile=function(R,H){var w=this._vec;C.set(w,0,0,1,1),C.transformMat4(w,w,R.inverseProjection());var d=.5+w[0],T=.5-w[1],S=this.levelList.indexOf(H),I=H.width(),O=H.height(),Y=H.tileWidth(),W=H.tileHeight(),X=H.numHorizontalTiles(),J=H.numVerticalTiles();return new D(h(Math.floor(d*I/Y),0,X-1),h(Math.floor(T*O/W),0,J-1),S,this)},L.prototype.visibleTiles=function(R,H,w){var d=this._viewSize,T=this._tileSearcher;if(w=w||[],R.size(d),0===d.width||0===d.height)return w;var S=this._closestTile(R,H);if(!T.search(R,S,w))throw new Error("Starting tile is not visible");return w},L.Tile=L.prototype.Tile=D,L.type=L.prototype.type="flat",D.type=D.prototype.type="flat",V.exports=L},9868:V=>{"use strict";function U(s){this._fallbackOnly=!!s.fallbackOnly}U.prototype.numHorizontalTiles=function(){return Math.ceil(this.width()/this.tileWidth())},U.prototype.numVerticalTiles=function(){return Math.ceil(this.height()/this.tileHeight())},U.prototype.fallbackOnly=function(){return this._fallbackOnly},V.exports=U},8279:(V,U,s)=>{"use strict";var y=s(5593);V.exports={makeLevelList:function M(l,c){for(var i=[],a=0;a<l.length;a++)i.push(new c(l[a]));return i.sort(function(h,A){return y(h.width(),A.width())}),i},makeSelectableLevelList:function u(l){for(var c=[],i=0;i<l.length;i++)l[i]._fallbackOnly||c.push(l[i]);if(!c.length)throw new Error("No selectable levels in list");return c}}},7609:(V,U,s)=>{"use strict";V.exports={WebGlStage:s(5),CssStage:s(7940),FlashStage:s(3129),WebGlCubeRenderer:s(7081),WebGlFlatRenderer:s(5391),WebGlEquirectRenderer:s(4299),CssCubeRenderer:s(7829),CssFlatRenderer:s(8869),FlashCubeRenderer:s(6429),FlashFlatRenderer:s(4308),registerDefaultRenderers:s(133),CubeGeometry:s(2363),FlatGeometry:s(4040),EquirectGeometry:s(7216),RectilinearView:s(9421),FlatView:s(5675),ImageUrlSource:s(2581),SingleAssetSource:s(6169),StaticAsset:s(2120),DynamicAsset:s(3587),TextureStore:s(522),Layer:s(3268),RenderLoop:s(3340),KeyControlMethod:s(1174),DragControlMethod:s(2074),QtvrControlMethod:s(4016),ScrollZoomControlMethod:s(130),PinchZoomControlMethod:s(131),VelocityControlMethod:s(9752),ElementPressControlMethod:s(9041),Controls:s(7708),Dynamics:s(4809),Viewer:s(2025),Scene:s(8393),Hotspot:s(2513),HotspotContainer:s(2523),colorEffects:s(3247),registerDefaultControls:s(9512),autorotate:s(2847),util:{async:s(3594),cancelize:s(779),chain:s(3559),clamp:s(6438),clearOwnProperties:s(6873),cmp:s(5593),compose:s(2800),convertFov:s(4224),decimal:s(3716),defaults:s(7802),defer:s(8792),degToRad:s(9155),delay:s(645),dom:s(1936),extend:s(2544),hash:s(3864),inherits:s(5946),mod:s(4501),noop:s(6158),now:s(242),once:s(9364),pixelRatio:s(3367),radToDeg:s(2731),real:s(1097),retry:s(1687),tween:s(58),type:s(4699)},dependencies:{bowser:s(3845),glMatrix:s(8452),eventEmitter:s(8843),hammerjs:s(1524)}}},4837:(V,U,s)=>{"use strict";var y=s(484),M=s(1608),u=s(9364);function l(c){if("flash"!==c.type)throw new Error("Stage type incompatible with loader");this._stage=c}l.prototype.loadImage=function(c,i,a){var h=this._stage,A=h.flashElement(),z=A.loadImage(c,i&&i.width||1,i&&i.height||1,i&&i.x||0,i&&i.y||0);function B(p,L){L===z&&(h.removeFlashCallbackListener("imageLoaded",B),p?a(new M("Network error: "+c)):a(null,new y(A,z)))}return a=u(a),h.addFlashCallbackListener("imageLoaded",B),function D(){A.cancelImage(z),h.removeFlashCallbackListener("imageLoaded",B),a.apply(null,arguments)}},V.exports=l},6737:(V,U,s)=>{"use strict";var y=s(2120),M=s(1608),u=s(9364);function l(c){if("webgl"!==c.type&&"css"!==c.type)throw new Error("Stage type incompatible with loader");this._stage=c}l.prototype.loadImage=function(c,i,a){var h=new Image;h.crossOrigin="anonymous";var A=i&&i.x||0,_=i&&i.y||0,v=i&&i.width||1,E=i&&i.height||1;return a=u(a),h.onload=function(){if(0===A&&0===_&&1===v&&1===E)a(null,new y(h));else{A*=h.naturalWidth,_*=h.naturalHeight,v*=h.naturalWidth,E*=h.naturalHeight;var z=document.createElement("canvas");z.width=v,z.height=E,z.getContext("2d").drawImage(h,A,_,v,E,0,0,v,E),a(null,new y(z))}},h.onerror=function(){a(new M("Network error: "+c))},h.src=c,function C(){h.onload=h.onerror=null,h.src="",a.apply(null,arguments)}},V.exports=l},2144:(V,U,s)=>{"use strict";var y=s(5242),M=s(3716),u=s(1936).setOverflowHidden,l=s(1936).setNoPointerEvents,c=s(1936).setNullTransform,i=s(1936).setTransform,a=s(6873),h=typeof MARZIPANODEBUG<"u"&&MARZIPANODEBUG.css;function A(v,E){return v.cmp(E)}function _(v,E,C){this._root=v,this._browserQuirks=E;var z=document.createElement("div");v.appendChild(z),z.style.position="absolute",u(z),l(z),this._browserQuirks.useNullTransform&&c(z),this.domElement=z,this._oldTileList=[],this._newTileList=[],this._textureMap=new y}_.prototype.destroy=function(){this._root.removeChild(this.domElement),a(this)},_.prototype.startLayer=function(v,E){var C=this.domElement,z=this._root.clientWidth,B=this._root.clientHeight;C.style.left=M(z*E.left)+"px",C.style.top=M(B*E.top)+"px",C.style.width=M(z*E.width)+"px",C.style.height=M(B*E.height)+"px";var D=1,p=v.effects();p&&null!=p.opacity&&(D=p.opacity),C.style.opacity=D,this._newTileList.length=0,this._textureMap.clear()},_.prototype.renderTile=function(v,E){this._newTileList.push(v),this._textureMap.set(v,E)},_.prototype.endLayer=function(v,E){var p,L,R,H,w,d,T,S,C=this.domElement,z=this._oldTileList,B=this._newTileList,D=this._textureMap,I=v.view();if(C.children.length!==z.length)throw new Error("DOM not in sync with tile list");for(B.sort(A),R=z[p=0],T=C.firstChild,L=0;L<B.length;L++){for(H=B[L];p<z.length&&!(R.cmp(H)>=0);)S=T.nextSibling,C.removeChild(T),T=S,R=z[++p];if(!(d=(w=D.get(H))?w._canvas:null))throw new Error("Rendering tile with missing texture");if(R&&0===R.cmp(H)){if(d!=T)throw new Error("DOM not in sync with tile list");T=T.nextSibling,R=z[++p]}else C.insertBefore(d,T);i(d,this.calculateTransform(H,w,I)),h&&d.setAttribute("data-tile",H.str())}for(;T;)S=T.nextSibling,C.removeChild(T),T=S;if(C.children.length!==B.length)throw new Error("DOM not in sync with tile list");var O=this._oldTileList;this._oldTileList=this._newTileList,this._newTileList=O},V.exports=_},7829:(V,U,s)=>{"use strict";var y=s(2363).Tile,M=s(2144),u=s(3716);function c(i,a){this.constructor.super_.call(this,i,a,y)}s(5946)(c,M),c.prototype.calculateTransform=function(i,a,h){var A=this._browserQuirks.padSize,_=this._browserQuirks.reverseLevelDepth,v=this._browserQuirks.perspectiveNudge,E="",C=_?256-i.z:i.levelWidth(),z=h.size(),D=z.height;E+="translate3d("+u(z.width/2)+"px, "+u(D/2)+"px, 0px) ";var p=.5*D/Math.tan(h.fov()/2),L=p+v;E+="perspective("+u(p)+"px) translateZ("+u(L)+"px) ";var R=-h.roll(),H=-h.pitch(),w=h.yaw();E+="rotateZ("+u(R)+"rad) rotateX("+u(H)+"rad) rotateY("+u(w)+"rad) ";var d=-i.rotX(),T=i.rotY();E+="rotateX("+u(d)+"rad) rotateY("+u(T)+"rad) ";var S=i.centerX()-i.scaleX()/2,Y=-(i.centerY()+i.scaleY()/2)*C,W=-C/2;if(E+="translate3d("+u(S*C)+"px, "+u(Y)+"px, "+u(W)+"px) ",_){var X=C*i.scaleX()/i.width(),J=C*i.scaleY()/i.height();E+="scale("+u(X)+", "+u(J)+") "}var tt=i.padLeft()?A:0,et=i.padTop()?A:0;return(0!==tt||0!==et)&&(E+="translate3d("+u(-tt)+"px, "+u(-et)+"px, 0) "),E},V.exports=c},8869:(V,U,s)=>{"use strict";var y=s(4040).Tile,M=s(2144),u=s(3716);function c(i,a){this.constructor.super_.call(this,i,a,y)}s(5946)(c,M),c.prototype.calculateTransform=function(i,a,h){var A=this._browserQuirks.padSize,_="",v=h.width(),E=h.height();_+="translateX("+u(v/2)+"px) translateY("+u(E/2)+"px) ";var C=v/h._zoomX(),z=E/h._zoomY(),B=i.centerX()-i.scaleX()/2+.5,L=(.5-i.centerY()-i.scaleY()/2)*z;_+="translateX("+u(B*C)+"px) translateY("+u(L)+"px) ";var R=-h.x()*C,H=-h.y()*z;_+="translateX("+u(R)+"px) translateY("+u(H)+"px) ";var w=i.padLeft()?A:0,d=i.padTop()?A:0;(0!==w||0!==d)&&(_+="translateX("+u(-w)+"px) translateY("+u(-d)+"px) ");var T=C/i.levelWidth(),S=z/i.levelHeight();return _+"scale("+u(T)+", "+u(S)+") "},V.exports=c},854:(V,U,s)=>{"use strict";var y=s(5242),M=s(6873);function u(c,i){return c.cmp(i)}function l(c,i,a,h){this._flashElement=c,this._layerId=i,this._quirks=a,this._tileList=[],this._textureMap=new y,this._layerCreated=!1}l.prototype.destroy=function(){this._layerCreated&&this._flashElement.destroyLayer(this._layerId),M(this)},l.prototype.startLayer=function(c,i){!this._flashElement.isReady||!this._flashElement.isReady()||(this._layerCreated||(this._flashElement.createLayer(this._layerId),this._layerCreated=!0),this._tileList.length=0,this._textureMap.clear())},l.prototype.renderTile=function(c,i){this._tileList.push(c),this._textureMap.set(c,i)},l.prototype.endLayer=function(c,i){this._flashElement.isReady&&this._flashElement.isReady()&&(this._tileList.sort(u),this._renderOnFlash(c,i))},V.exports=l},6429:(V,U,s)=>{"use strict";var y=s(854),M=s(2363).Tile,u=s(5946),l=s(2731);function c(i,a,h){this.constructor.super_.call(this,i,a,h,M),this._flashTileList=[]}u(c,y),c.prototype._renderOnFlash=function(i,a){var h=this._flashElement,A=this._layerId,_=this._quirks.padSize,v=this._tileList,E=this._textureMap,C=this._flashTileList;C.length=0;for(var z=0;z<v.length;z++){var B=v[z],D=E.get(B);if(!D)throw new Error("Rendering tile with missing texture");var p=B.padTop()?_:0,L=B.padBottom()?_:0,R=B.padLeft()?_:0,H=B.padRight()?_:0;C.push({textureId:D._textureId,face:B.face,width:B.width(),height:B.height(),centerX:B.centerX(),centerY:B.centerY(),rotX:l(B.rotX()),rotY:l(B.rotY()),levelSize:B.levelWidth(),padTop:p,padBottom:L,padLeft:R,padRight:H})}var w=this._flashElement.clientWidth,d=this._flashElement.clientHeight,T=w*a.x,S=d*a.y,I=w*a.width,O=d*a.height,Y=1,W=i.effects();W&&null!=W.opacity&&(Y=W.opacity);var X=i.view(),J=X.yaw(),tt=X.pitch(),et=X.roll(),nt=X.fov();h.drawCubeTiles(A,I,O,T,S,Y,J,tt,et,nt,C)},V.exports=c},4308:(V,U,s)=>{"use strict";var y=s(854),M=s(4040).Tile;function l(c,i,a){this.constructor.super_.call(this,c,i,a,M),this._flashTileList=[]}s(5946)(l,y),l.prototype._renderOnFlash=function(c,i){var a=this._flashElement,h=this._layerId,A=this._quirks.padSize,_=this._tileList,v=this._textureMap,E=this._flashTileList;E.length=0;for(var C=0;C<_.length;C++){var z=_[C],B=v.get(z);if(!B)throw new Error("Rendering tile with missing texture");var D=z.padTop()?A:0,p=z.padBottom()?A:0,L=z.padLeft()?A:0,R=z.padRight()?A:0;E.push({textureId:B._textureId,width:z.width(),height:z.height(),centerX:z.centerX(),centerY:z.centerY(),scaleX:z.scaleX(),scaleY:z.scaleY(),levelWidth:z.levelWidth(),levelHeight:z.levelHeight(),padTop:D,padBottom:p,padLeft:L,padRight:R})}var H=this._flashElement.clientWidth,w=this._flashElement.clientHeight,d=H*i.x,T=w*i.y,S=H*i.width,I=w*i.height,O=1,Y=c.effects();Y&&null!=Y.opacity&&(O=Y.opacity);var W=c.view(),X=W.x(),J=W.y(),tt=W._zoomX(),et=W._zoomY();a.drawFlatTiles(h,S,I,d,T,O,X,J,tt,et,E)},V.exports=l},4159:(V,U,s)=>{"use strict";var y=s(8452).mat4,M=s(8452).vec3,u=s(6873),l=s(7666),c=l.createConstantBuffers,i=l.destroyConstantBuffers,a=l.createShaderProgram,h=l.destroyShaderProgram,A=l.enableAttributes,_=l.disableAttributes,v=l.setViewport,E=l.setupPixelEffectUniforms,C=l.setDepth,z=l.setTexture,B=s(4448),D=s(4278),p=[0,1,2,0,2,3],L=[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],R=[0,0,1,0,1,1,0,1],H=["aVertexPosition","aTextureCoord"],w=["uDepth","uOpacity","uSampler","uProjMatrix","uViewportMatrix","uColorOffset","uColorMatrix"];function d(T){this.gl=T,this.projMatrix=y.create(),this.viewportMatrix=y.create(),this.translateVector=M.create(),this.scaleVector=M.create(),this.constantBuffers=c(T,p,L,R),this.shaderProgram=a(T,B,D,H,w)}d.prototype.destroy=function(){i(this.gl,this.constantBuffers),h(this.gl,this.shaderProgram),u(this)},d.prototype.startLayer=function(T,S){var I=this.gl,O=this.shaderProgram,Y=this.constantBuffers,W=this.viewportMatrix;I.useProgram(O),A(I,O),v(I,T,S,W),I.uniformMatrix4fv(O.uViewportMatrix,!1,W),I.bindBuffer(I.ARRAY_BUFFER,Y.vertexPositions),I.vertexAttribPointer(O.aVertexPosition,3,I.FLOAT,I.FALSE,0,0),I.bindBuffer(I.ARRAY_BUFFER,Y.textureCoords),I.vertexAttribPointer(O.aTextureCoord,2,I.FLOAT,I.FALSE,0,0),E(I,T.effects(),{opacity:O.uOpacity,colorOffset:O.uColorOffset,colorMatrix:O.uColorMatrix})},d.prototype.endLayer=function(T,S){_(this.gl,this.shaderProgram)},d.prototype.renderTile=function(T,S,I,O){var Y=this.gl,W=this.shaderProgram,X=this.constantBuffers,J=this.projMatrix,tt=this.translateVector,et=this.scaleVector;tt[0]=T.centerX(),tt[1]=T.centerY(),tt[2]=-.5,et[0]=T.scaleX(),et[1]=T.scaleY(),et[2]=1,y.copy(J,I.view().projection()),y.rotateX(J,J,T.rotX()),y.rotateY(J,J,T.rotY()),y.translate(J,J,tt),y.scale(J,J,et),Y.uniformMatrix4fv(W.uProjMatrix,!1,J),C(Y,W,O,T.z),z(Y,W,S),Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,X.vertexIndices),Y.drawElements(Y.TRIANGLES,p.length,Y.UNSIGNED_SHORT,0)},V.exports=d},7666:(V,U,s)=>{"use strict";var u=s(6438),l=s(8452).vec4,c=s(8452).vec3,i=s(8452).mat4;function a(S,I,O){var Y=S.createShader(I);if(S.shaderSource(Y,O),S.compileShader(Y),!S.getShaderParameter(Y,S.COMPILE_STATUS))throw S.getShaderInfoLog(Y);return Y}function _(S,I,O,Y){var W=S.createBuffer();return S.bindBuffer(I,W),S.bufferData(I,Y,O),W}var L=l.create(),R=i.create();i.identity(R);var w=c.create(),d=c.create();V.exports={createShaderProgram:function h(S,I,O,Y,W){var X=a(S,S.VERTEX_SHADER,I),J=a(S,S.FRAGMENT_SHADER,O),tt=S.createProgram();if(S.attachShader(tt,X),S.attachShader(tt,J),S.linkProgram(tt),!S.getProgramParameter(tt,S.LINK_STATUS))throw S.getProgramInfoLog(tt);for(var et=0;et<Y.length;et++){var nt=Y[et];if(tt[nt]=S.getAttribLocation(tt,nt),-1===tt[nt])throw new Error("Shader program has no "+nt+" attribute")}for(var ct=0;ct<W.length;ct++){var ut=W[ct];if(tt[ut]=S.getUniformLocation(tt,ut),-1===tt[ut])throw new Error("Shader program has no "+ut+" uniform")}return tt},destroyShaderProgram:function A(S,I){for(var O=S.getAttachedShaders(I),Y=0;Y<O.length;Y++){var W=O[Y];S.detachShader(I,W),S.deleteShader(W)}S.deleteProgram(I)},createConstantBuffers:function v(S,I,O,Y){return{vertexIndices:_(S,S.ELEMENT_ARRAY_BUFFER,S.STATIC_DRAW,new Uint16Array(I)),vertexPositions:_(S,S.ARRAY_BUFFER,S.STATIC_DRAW,new Float32Array(O)),textureCoords:_(S,S.ARRAY_BUFFER,S.STATIC_DRAW,new Float32Array(Y))}},destroyConstantBuffers:function E(S,I){S.deleteBuffer(I.vertexIndices),S.deleteBuffer(I.vertexPositions),S.deleteBuffer(I.textureCoords)},enableAttributes:function C(S,I){for(var O=S.getProgramParameter(I,S.ACTIVE_ATTRIBUTES),Y=0;Y<O;Y++)S.enableVertexAttribArray(Y)},disableAttributes:function z(S,I){for(var O=S.getProgramParameter(I,S.ACTIVE_ATTRIBUTES),Y=0;Y<O;Y++)S.disableVertexAttribArray(Y)},setTexture:function B(S,I,O){S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,O._texture),S.uniform1i(I.uSampler,0)},setDepth:function D(S,I,O,Y){S.uniform1f(I.uDepth,(256*(O+1)-Y)/65536)},setViewport:function T(S,I,O,Y){if(0===O.x&&1===O.width&&0===O.y&&1===O.height)return S.viewport(0,0,S.drawingBufferWidth,S.drawingBufferHeight),void i.identity(Y);var W=O.x,X=u(W,0,1),J=X-W,et=u(O.width-J,0,1-X),nt=O.width-et,ct=1-O.height-O.y,ut=u(ct,0,1),pt=ut-ct,gt=u(O.height-pt,0,1-ut),Pt=O.height-gt;c.set(d,O.width/et,O.height/gt,1),c.set(w,(nt-J)/et,(Pt-pt)/gt,0),i.identity(Y),i.translate(Y,Y,w),i.scale(Y,Y,d),S.viewport(S.drawingBufferWidth*X,S.drawingBufferHeight*ut,S.drawingBufferWidth*et,S.drawingBufferHeight*gt)},setupPixelEffectUniforms:function H(S,I,O){var Y=1;I&&null!=I.opacity&&(Y=I.opacity),S.uniform1f(O.opacity,Y);var W=L;I&&I.colorOffset&&(W=I.colorOffset),S.uniform4fv(O.colorOffset,W);var X=R;I&&I.colorMatrix&&(X=I.colorMatrix),S.uniformMatrix4fv(O.colorMatrix,!1,X)}}},7081:(V,U,s)=>{"use strict";var y=s(4159);function u(){this.constructor.super_.apply(this,arguments)}s(5946)(u,y),V.exports=u},4299:(V,U,s)=>{"use strict";var y=s(8452).mat4,M=s(6873),u=s(7666),l=u.createConstantBuffers,c=u.destroyConstantBuffers,i=u.createShaderProgram,a=u.destroyShaderProgram,h=u.enableAttributes,A=u.disableAttributes,_=u.setViewport,v=u.setupPixelEffectUniforms,E=u.setDepth,C=u.setTexture,z=s(3378),B=s(243),D=[0,1,2,0,2,3],p=[-1,-1,0,1,-1,0,1,1,0,-1,1,0],L=[0,0,1,0,1,1,0,1],R=["aVertexPosition"],H=["uDepth","uOpacity","uSampler","uInvProjMatrix","uViewportMatrix","uColorOffset","uColorMatrix","uTextureX","uTextureY","uTextureWidth","uTextureHeight"];function w(d){this.gl=d,this.invProjMatrix=y.create(),this.viewportMatrix=y.create(),this.constantBuffers=l(d,D,p,L),this.shaderProgram=i(d,z,B,R,H)}w.prototype.destroy=function(){c(this.gl,this.constantBuffers),a(this.gl,this.shaderProgram),M(this)},w.prototype.startLayer=function(d,T){var S=this.gl,I=this.shaderProgram,O=this.constantBuffers,Y=this.invProjMatrix,W=this.viewportMatrix;S.useProgram(I),h(S,I),_(S,d,T,W),S.uniformMatrix4fv(I.uViewportMatrix,!1,W),S.bindBuffer(S.ARRAY_BUFFER,O.vertexPositions),S.vertexAttribPointer(I.aVertexPosition,3,S.FLOAT,S.FALSE,0,0),S.bindBuffer(S.ARRAY_BUFFER,O.textureCoords),y.copy(Y,d.view().projection()),y.invert(Y,Y),S.uniformMatrix4fv(I.uInvProjMatrix,!1,Y);var X=d.effects().textureCrop||{},tt=null!=X.y?X.y:0,et=null!=X.width?X.width:1,nt=null!=X.height?X.height:1;S.uniform1f(I.uTextureX,null!=X.x?X.x:0),S.uniform1f(I.uTextureY,tt),S.uniform1f(I.uTextureWidth,et),S.uniform1f(I.uTextureHeight,nt),v(S,d.effects(),{opacity:I.uOpacity,colorOffset:I.uColorOffset,colorMatrix:I.uColorMatrix})},w.prototype.endLayer=function(d,T){A(this.gl,this.shaderProgram)},w.prototype.renderTile=function(d,T,S,I){var O=this.gl,Y=this.shaderProgram,W=this.constantBuffers;E(O,Y,I,d.z),C(O,Y,T),O.bindBuffer(O.ELEMENT_ARRAY_BUFFER,W.vertexIndices),O.drawElements(O.TRIANGLES,D.length,O.UNSIGNED_SHORT,0)},V.exports=w},5391:(V,U,s)=>{"use strict";var y=s(4159);function u(){this.constructor.super_.apply(this,arguments)}s(5946)(u,y),V.exports=u},133:(V,U,s)=>{"use strict";var y=s(7081),M=s(5391),u=s(4299),l=s(7829),c=s(8869),i=s(6429),a=s(4308);V.exports=function h(A){switch(A.type){case"webgl":A.registerRenderer("flat","flat",M),A.registerRenderer("cube","rectilinear",y),A.registerRenderer("equirect","rectilinear",u);break;case"css":A.registerRenderer("flat","flat",c),A.registerRenderer("cube","rectilinear",l);break;case"flash":A.registerRenderer("flat","flat",a),A.registerRenderer("cube","rectilinear",i);break;default:throw new Error("Unknown stage type: "+A.type)}}},243:V=>{"use strict";V.exports=["#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float","#endif","uniform sampler2D uSampler;","uniform float uOpacity;","uniform float uTextureX;","uniform float uTextureY;","uniform float uTextureWidth;","uniform float uTextureHeight;","uniform vec4 uColorOffset;","uniform mat4 uColorMatrix;","varying vec4 vRay;","const float PI = 3.14159265358979323846264;","void main(void) {","  float r = inversesqrt(vRay.x * vRay.x + vRay.y * vRay.y + vRay.z * vRay.z);","  float phi  = acos(vRay.y * r);","  float theta = atan(vRay.x, -1.0*vRay.z);","  float s = 0.5 + 0.5 * theta / PI;","  float t = 1.0 - phi / PI;","  s = s * uTextureWidth + uTextureX;","  t = t * uTextureHeight + uTextureY;","  vec4 color = texture2D(uSampler, vec2(s, t)) * uColorMatrix + uColorOffset;","  gl_FragColor = vec4(color.rgba * uOpacity);","}"].join("\n")},4278:V=>{"use strict";V.exports=["#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uSampler;","uniform float uOpacity;","uniform vec4 uColorOffset;","uniform mat4 uColorMatrix;","varying vec2 vTextureCoord;","void main(void) {","  vec4 color = texture2D(uSampler, vTextureCoord) * uColorMatrix + uColorOffset;","  gl_FragColor = vec4(color.rgba * uOpacity);","}"].join("\n")},3378:V=>{"use strict";V.exports=["attribute vec3 aVertexPosition;","uniform float uDepth;","uniform mat4 uViewportMatrix;","uniform mat4 uInvProjMatrix;","varying vec4 vRay;","void main(void) {","  vRay = uInvProjMatrix * vec4(aVertexPosition.xy, 1.0, 1.0);","  gl_Position = uViewportMatrix * vec4(aVertexPosition.xy, uDepth, 1.0);","}"].join("\n")},4448:V=>{"use strict";V.exports=["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float uDepth;","uniform mat4 uViewportMatrix;","uniform mat4 uProjMatrix;","varying vec2 vTextureCoord;","void main(void) {","  gl_Position = uViewportMatrix * uProjMatrix * vec4(aVertexPosition.xy, 0.0, 1.0);","  gl_Position.z = uDepth * gl_Position.w;","  vTextureCoord = aTextureCoord;","}"].join("\n")},2581:(V,U,s)=>{"use strict";var y=s(8843),M=s(1608),u=s(2412),l=s(3559),c=s(645),i=s(242),a={x:"x",y:"y",z:"z",f:"face"};function v(C,z){this._loadPool=new u({concurrency:(z=z||{}).concurrency||4}),this._retryDelay=z.retryDelay||1e4,this._retryMap={},this._sourceFromTile=C}function E(C){return new RegExp("\\{("+C+")\\}","g")}y(v),v.prototype.loadAsset=function(C,z,B){var S,D=this,p=this._retryDelay,L=this._retryMap,R=this._sourceFromTile(z),H=R.url,d=C.loadImage.bind(C,H,R.rect),I=L[H];if(null!=I){var Y=i()-I;Y<p?S=p-Y:(S=0,delete L[H])}var W=c.bind(null,S);return l(W,function(X){return D._loadPool.push(d,function(J,tt){J?(J instanceof M&&(L[H]=i(),D.emit("networkError",tt,J)),X(J,z)):(delete L[H],X(null,z,tt))})})(B)},v.fromString=function(C,z){var B=(z=z||{})&&z.cubeMapPreviewFaceOrder||"bdflru";return new v(z.cubeMapPreviewUrl?function L(H){return 0===H.z?function R(H){var w=B.indexOf(H.face)/6;return{url:z.cubeMapPreviewUrl,rect:{x:0,y:w,width:1,height:1/6}}}(H):p(H)}:p,z);function p(H){var w=C;for(var d in a){var T=a[d],S=E(d),I=H.hasOwnProperty(T)?H[T]:"";w=w.replace(S,I)}return{url:w}}},V.exports=v},6169:V=>{"use strict";function U(s){this._asset=s}U.prototype.asset=function(){return this._asset},U.prototype.loadAsset=function(s,y,M){var u=this,l=setTimeout(function(){M(null,y,u._asset)},0);return function c(){clearTimeout(l),M.apply(null,arguments)}},V.exports=U},7940:(V,U,s)=>{"use strict";var y=s(2419),M=s(6737),u=s(7767),l=s(3845),c=s(5946),i=s(1936).setAbsolute,a=s(1936).setFullSize,h=s(1936).setNullTransformOrigin,A=s(6873),_={padSize:l.ios?0:3,reverseLevelDepth:l.ios,useNullTransform:l.ios,perspectiveNudge:l.webkit||l.gecko?.001:0};function v(C){this.constructor.super_.call(this,C),this._loader=new M(this),this._domElement=document.createElement("div"),i(this._domElement),a(this._domElement)}function E(C,z,B){var D=document.createElement("canvas");i(D),h(D),this._canvas=D,this._timestamp=null,this.refresh(z,B)}c(v,y),v.prototype.destroy=function(){this.constructor.super_.prototype.destroy.call(this)},v.supported=function(){return u()},v.prototype.domElement=function(){return this._domElement},v.prototype.setSizeForType=function(){},v.prototype.loadImage=function(C,z,B){return this._loader.loadImage(C,z,B)},v.prototype.validateLayer=function(C){},v.prototype.createRenderer=function(C){return new C(this._domElement,_)},v.prototype.destroyRenderer=function(C){C.destroy()},v.prototype.startFrame=function(){},v.prototype.endFrame=function(){},v.prototype.takeSnapshot=function(){throw new Error("CssStage: takeSnapshot not implemented")},v.type=v.prototype.type="css",E.prototype.refresh=function(C,z){var B=z.timestamp();if(B!==this._timestamp){this._timestamp=B;var O,D=this._canvas,p=D.getContext("2d"),L=z.element(),R=C.width(),H=C.height(),w=_.padSize,d=C.padTop()?w:0,T=C.padBottom()?w:0,S=C.padLeft()?w:0,I=C.padRight()?w:0;for(D.width=S+R+I,D.height=d+H+T,p.drawImage(L,S,d,R,H),O=0;O<d;O++)p.drawImage(D,S,d,R,1,S,O,R,1);for(O=0;O<S;O++)p.drawImage(D,S,d,1,H,O,d,1,H);for(O=0;O<T;O++)p.drawImage(D,S,d+H-1,R,1,S,d+H+O,R,1);for(O=0;O<I;O++)p.drawImage(D,S+R-1,d,1,H,S+R+O,d,1,H)}},E.prototype.destroy=function(){A(this)},v.TextureClass=v.prototype.TextureClass=E,V.exports=v},3129:(V,U,s)=>{"use strict";var y=s(2419),M=s(4837),u=s(7892),l=s(5169),c=s(5946),i=s(8792),a=s(1936).setAbsolute,h=s(1936).setFullSize,A=s(1936).setBlocking,_=s(6873),E=function(){var H=document.currentScript;if(!H){var w=document.getElementsByTagName("script");H=w.length?w[w.length-1]:null}if(!H)return null;var d=H.src,T=d.lastIndexOf("/");return(d=T>=0?d.slice(0,T+1):"")+"marzipano.swf"}(),C="MarzipanoFlashCallbackMap";C in window||(window[C]={__next:0});var B=["imageLoaded"],D={padSize:3};function p(H){if(this.constructor.super_.call(this,H),this._wmode=H&&H.wmode||"transparent",this._swfPath=H&&H.swfPath||E,!E)throw new Error("Missing SWF path");this._flashStageId=function z(){return window[C].__next++}(),this._callbacksObj=window[C][this._flashStageId]={},this._stageCallbacksObjVarName=C+"["+this._flashStageId+"]",this._callbackListeners={};for(var w=0;w<B.length;w++)this._callbacksObj[B[w]]=this._callListeners(B[w]);this._loader=new M(this),this._loadImageQueue=new l,this._loadImageQueue.pause(),this._flashReady=!1,this._nextLayerId=0;var d=function L(H,w,d){var T=document.createElement("div");a(T),h(T);var S="marzipano-flash-stage-"+w,I='<object id="'+S+'" name="'+S+'" type="application/x-shockwave-flash" data="'+H+'">',O="";O+='<param name="movie" value="'+H+'" />',O+='<param name="allowscriptaccess" value="always" />',O+='<param name="flashvars" value="callbacksObjName='+d+'" />',I+=O+='<param name="wmode" value="transparent" />',I+="</object>";var Y=document.createElement("div");Y.innerHTML=I;var W=Y.firstChild;a(W),h(W),T.appendChild(W);var X=document.createElement("div");return a(X),h(X),A(X),T.appendChild(X),{root:T,flash:W,blocking:X}}(this._swfPath,this._flashStageId,this._stageCallbacksObjVarName);this._domElement=d.root,this._blockingElement=d.blocking,this._flashElement=d.flash,this._checkReadyTimer=setInterval(this._checkReady.bind(this),50)}function R(H,w,d){var T=d.element(),S=w.width(),I=w.height(),O=D.padSize,Y=w.padTop()?O:0,W=w.padBottom()?O:0,X=w.padLeft()?O:0,J=w.padRight()?O:0,tt=H._flashElement.createTexture(T,S,I,Y,W,X,J);this._stage=H,this._textureId=tt}c(p,y),p.prototype.destroy=function(){window[C][this._flashStageId]=null,null!=this._checkReadyTimer&&clearInterval(this._checkReadyTimer),this.constructor.super_.prototype.destroy.call(this)},p.supported=function(){return u()},p.prototype.domElement=function(){return this._domElement},p.prototype.flashElement=function(){return this._flashElement},p.prototype.setSizeForType=function(){},p.prototype.loadImage=function(H,w,d){var T=this._loader.loadImage.bind(this._loader,H,w);return this._loadImageQueue.push(T,d)},p.prototype.validateLayer=function(H){},p.prototype.addFlashCallbackListener=function(H,w){this._callbackListeners[H]=this._callbackListeners[H]||[],this._callbackListeners[H].push(w)},p.prototype.removeFlashCallbackListener=function(H,w){var d=this._callbackListeners[H]||[],T=d.indexOf(w);T>=0&&d.splice(T,1)},p.prototype._callListeners=function(H){var w=this;return function(){for(var T=w._callbackListeners[H]||[],S=0;S<T.length;S++){var I=T[S];i(I,arguments)}}},p.prototype._checkReady=function(){return!!(this._flashElement&&this._flashElement.isReady&&this._flashElement.isReady())&&(this._flashReady=!0,clearTimeout(this._checkReadyTimer),this._checkReadyTimer=null,this._loadImageQueue.resume(),this.emit("renderInvalid"),!0)},p.prototype.createRenderer=function(H){return new H(this._flashElement,++this._nextLayerId,D)},p.prototype.destroyRenderer=function(H){H.destroy()},p.prototype.startFrame=function(){},p.prototype.endFrame=function(){},p.prototype.takeSnapshot=function(H){("object"!=typeof H||null==H)&&(H={});var w=H.quality;if(typeof w>"u"&&(w=75),"number"!=typeof w||w<0||w>100)throw new Error("FlashStage: Snapshot quality needs to be a number between 0 and 100");return this._flashElement.takeSnapshot(w)},p.type=p.prototype.type="flash",R.prototype.refresh=function(H,w){},R.prototype.destroy=function(){this._stage._flashElement.destroyTexture(this._textureId),_(this)},p.TextureClass=p.prototype.TextureClass=R,V.exports=p},3205:V=>{"use strict";function U(){this._renderers={}}U.prototype.set=function(s,y,M){this._renderers[s]||(this._renderers[s]={}),this._renderers[s][y]=M},U.prototype.get=function(s,y){return this._renderers[s]&&this._renderers[s][y]||null},V.exports=U},2419:(V,U,s)=>{"use strict";var y=s(8843),M=s(5169),u=s(1045),l=s(3594),c=s(779),i=s(6873),a=s(3205);function h(v,E){return v.cmp(E)}function A(v,E){return-v.cmp(E)}function _(v){this._progressive=!(!v||!v.progressive),this._layers=[],this._renderers=[],this._tilesToLoad=[],this._tilesToRender=[],this._tmpVisible=[],this._tmpChildren=[],this._width=0,this._height=0,this._tmpRect={},this._tmpSize={},this._createTextureWorkQueue=new M,this._emitRenderInvalid=this._emitRenderInvalid.bind(this),this._rendererRegistry=new a}y(_),_.prototype.destroy=function(){this.removeAllLayers(),i(this)},_.prototype.registerRenderer=function(v,E,C){return this._rendererRegistry.set(v,E,C)},_.prototype.domElement=function(){throw new Error("Stage implementation must override domElement")},_.prototype.width=function(){return this._width},_.prototype.height=function(){return this._height},_.prototype.size=function(v){return(v=v||{}).width=this._width,v.height=this._height,v},_.prototype.setSize=function(v){this._width=v.width,this._height=v.height,this.setSizeForType(),this.emit("resize"),this._emitRenderInvalid()},_.prototype.setSizeForType=function(v){throw new Error("Stage implementation must override setSizeForType")},_.prototype.loadImage=function(){throw new Error("Stage implementation must override loadImage")},_.prototype._emitRenderInvalid=function(){this.emit("renderInvalid")},_.prototype.validateLayer=function(v){throw new Error("Stage implementation must override validateLayer")},_.prototype.listLayers=function(){return[].concat(this._layers)},_.prototype.hasLayer=function(v){return this._layers.indexOf(v)>=0},_.prototype.addLayer=function(v,E){if(this._layers.indexOf(v)>=0)throw new Error("Layer already in stage");if(null==E&&(E=this._layers.length),E<0||E>this._layers.length)throw new Error("Invalid layer position");this.validateLayer(v);var C=v.geometry().type,z=v.view().type,B=this._rendererRegistry.get(C,z);if(!B)throw new Error("No "+this.type+" renderer avaiable for "+C+" geometry and "+z+" view");var D=this.createRenderer(B);this._layers.splice(E,0,v),this._renderers.splice(E,0,D),v.addEventListener("viewChange",this._emitRenderInvalid),v.addEventListener("effectsChange",this._emitRenderInvalid),v.addEventListener("fixedLevelChange",this._emitRenderInvalid),v.addEventListener("textureStoreChange",this._emitRenderInvalid),this._emitRenderInvalid()},_.prototype.moveLayer=function(v,E){var C=this._layers.indexOf(v);if(C<0)throw new Error("No such layer in stage");if(E<0||E>=this._layers.length)throw new Error("Invalid layer position");v=this._layers.splice(C,1)[0];var z=this._renderers.splice(C,1)[0];this._layers.splice(E,0,v),this._renderers.splice(E,0,z),this._emitRenderInvalid()},_.prototype.removeLayer=function(v){var E=this._layers.indexOf(v);if(E<0)throw new Error("No such layer in stage");var C=this._layers.splice(E,1)[0],z=this._renderers.splice(E,1)[0];this.destroyRenderer(z),C.removeEventListener("viewChange",this._emitRenderInvalid),C.removeEventListener("effectsChange",this._emitRenderInvalid),C.removeEventListener("fixedLevelChange",this._emitRenderInvalid),C.removeEventListener("textureStoreChange",this._emitRenderInvalid),this._emitRenderInvalid()},_.prototype.removeAllLayers=function(){for(;this._layers.length>0;)this.removeLayer(this._layers[0])},_.prototype.startFrame=function(){throw new Error("Stage implementation must override startFrame")},_.prototype.endFrame=function(){throw new Error("Stage implementation must override endFrame")},_.prototype.render=function(){var v,E,D,C=this._tilesToLoad,z=this._tilesToRender,B=!0,p=this._width,L=this._height,R=this._tmpRect,H=this._tmpSize;if(!(p<=0||L<=0)){for(this.startFrame(),v=0;v<this._layers.length;v++)this._layers[v].textureStore().startFrame();for(v=0;v<this._layers.length;v++){var Y,W,w=this._layers[v],d=w.effects(),T=w.view(),S=w.textureStore(),I=this._renderers[v],O=this._layers.length-v;if(u(p,L,d&&d.rect,R),!(R.width<=0||R.height<=0)){for(H.width=R.width*this._width,H.height=R.height*this._height,T.setSize(H),I.startLayer(w,R),D=this._collectTiles(w,S),E=0;E<C.length;E++)S.markTile(Y=C[E]);for(E=0;E<z.length;E++)W=S.texture(Y=z[E]),I.renderTile(Y,W,w,O);w.emit("renderComplete",D),D||(B=!1),I.endLayer(w,R)}}for(v=0;v<this._layers.length;v++)this._layers[v].textureStore().endFrame();this.endFrame(),this.emit("renderComplete",B)}},_.prototype._collectTiles=function(v,E){var C=this._tilesToLoad,z=this._tilesToRender,B=this._tmpVisible;C.length=0,z.length=0,B.length=0,v.visibleTiles(B);for(var D=!0,p=0;p<B.length;p++){var R,L=B[p];this._collectTileToLoad(L),E.texture(L)?(R=!1,this._collectTileToRender(L)):(R=this._collectChildren(L,E),D=!1),this._collectParents(L,E,R)}return C.sort(h),z.sort(A),D},_.prototype._collectChildren=function(v,E){var C=this._tmpChildren,z=!0;do{if(C.length=0,!v.children(C))break;z=!1;for(var B=0;B<C.length;B++)E.texture(v=C[B])?(this._collectTileToLoad(v),this._collectTileToRender(v)):z=!0}while(z&&1===C.length);return z},_.prototype._collectParents=function(v,E,C){for(var z=this._progressive;(z||C)&&null!=(v=v.parent());){if(C)if(E.texture(v))this._collectTileToRender(v),C=!1;else if(!this._progressive)continue;this._collectTileToLoad(v)||(z=!1)}return C},_.prototype._collectTileToLoad=function(v){return this._collectTileIntoList(v,this._tilesToLoad)},_.prototype._collectTileToRender=function(v){return this._collectTileIntoList(v,this._tilesToRender)},_.prototype._collectTileIntoList=function(v,E){for(var C=!1,z=0;z<E.length;z++)if(v.equals(E[z])){C=!0;break}return C||E.push(v),!C},_.prototype.createTexture=function(v,E,C){var z=this,D=c(l(function B(){return new z.TextureClass(z,v,E)}));return this._createTextureWorkQueue.push(D,function(p,L){C(p,v,E,L)})},V.exports=_},5:(V,U,s)=>{"use strict";var y=s(2419),M=s(6737),u=s(7983),l=s(3845),c=s(5946),i=s(3367),a=s(1020),h=s(1936).setAbsolute,A=s(1936).setFullSize,_=s(6873),v=typeof MARZIPANODEBUG<"u"&&MARZIPANODEBUG.webGl,E_videoUseTexImage2D=l.chrome;function z(D){var p=this;this.constructor.super_.call(this,D=D||{}),this._generateMipmaps=null!=D.generateMipmaps&&D.generateMipmaps,this._loader=new M(this),this._domElement=document.createElement("canvas"),h(this._domElement),A(this._domElement),this._gl=function C(D,p){var L={alpha:!0,premultipliedAlpha:!0,antialias:!(!p||!p.antialias),preserveDrawingBuffer:!(!p||!p.preserveDrawingBuffer)};v&&typeof WebGLDebugUtils<"u"&&(console.log("Using WebGL lost context simulator"),D=WebGLDebugUtils.makeLostContextSimulatingCanvas(D));var R=D.getContext&&(D.getContext("webgl",L)||D.getContext("experimental-webgl",L));if(!R)throw new Error("Could not get WebGL context");return v&&typeof WebGLDebugUtils<"u"&&(R=WebGLDebugUtils.makeDebugContext(R),console.log("Using WebGL debug context")),R}(this._domElement,D),this._handleContextLoss=function(){p.emit("webglcontextlost"),p._gl=null},this._domElement.addEventListener("webglcontextlost",this._handleContextLoss),this._rendererInstances=[]}function B(D,p,L){this._stage=D,this._gl=D._gl,this._texture=null,this._timestamp=null,this._width=this._height=null,this.refresh(p,L)}c(z,y),z.prototype.destroy=function(){this._domElement.removeEventListener("webglcontextlost",this._handleContextLoss),this.constructor.super_.prototype.destroy.call(this)},z.supported=function(){return u()},z.prototype.domElement=function(){return this._domElement},z.prototype.webGlContext=function(){return this._gl},z.prototype.setSizeForType=function(){var D=i();this._domElement.width=D*this._width,this._domElement.height=D*this._height},z.prototype.loadImage=function(D,p,L){return this._loader.loadImage(D,p,L)},z.prototype.maxTextureSize=function(){return this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE)},z.prototype.validateLayer=function(D){var p=D.geometry().maxTileSize(),L=this.maxTextureSize();if(p>L)throw new Error("Layer has level with tile size larger than maximum texture size ("+p+" vs. "+L+")")},z.prototype.createRenderer=function(D){for(var p=this._rendererInstances,L=0;L<p.length;L++)if(p[L]instanceof D)return p[L];var R=new D(this._gl);return p.push(R),R},z.prototype.destroyRenderer=function(D){var p=this._rendererInstances;if(this._renderers.indexOf(D)<0){D.destroy();var L=p.indexOf(D);L>=0&&p.splice(L,1)}},z.prototype.startFrame=function(){var D=this._gl;if(!D)throw new Error("Bad WebGL context - maybe context was lost?");D.viewport(0,0,D.drawingBufferWidth,D.drawingBufferHeight),D.clearColor(0,0,0,0),D.clear(D.COLOR_BUFFER_BIT|D.DEPTH_BUFFER_BIT),D.enable(D.DEPTH_TEST),D.enable(D.BLEND),D.blendFunc(D.ONE,D.ONE_MINUS_SRC_ALPHA)},z.prototype.endFrame=function(){},z.prototype.takeSnapshot=function(D){("object"!=typeof D||null==D)&&(D={});var p=D.quality;if(typeof p>"u"&&(p=75),"number"!=typeof p||p<0||p>100)throw new Error("WebGLStage: Snapshot quality needs to be a number between 0 and 100");return this.render(),this._domElement.toDataURL("image/jpeg",p/100)},z.type=z.prototype.type="webgl",B.prototype.refresh=function(D,p){var H,L=this._gl,R=this._stage,w=p.timestamp();if(w!==this._timestamp){var d=p.element(),T=p.width(),S=p.height();if(T!==this._width||S!==this._height){var I=R.maxTextureSize();if(T>I)throw new Error("Texture width larger than max size ("+T+" vs. "+I+")");if(S>I)throw new Error("Texture height larger than max size ("+S+" vs. "+I+")");this._texture&&L.deleteTexture(H),H=this._texture=L.createTexture(),L.bindTexture(L.TEXTURE_2D,H),L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,!0),L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),L.texImage2D(L.TEXTURE_2D,0,L.RGBA,L.RGBA,L.UNSIGNED_BYTE,d)}else L.bindTexture(L.TEXTURE_2D,H=this._texture),L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,!0),L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),d instanceof HTMLVideoElement&&E_videoUseTexImage2D?L.texImage2D(L.TEXTURE_2D,0,L.RGBA,L.RGBA,L.UNSIGNED_BYTE,d):L.texSubImage2D(L.TEXTURE_2D,0,0,0,L.RGBA,L.UNSIGNED_BYTE,d);R._generateMipmaps&&a(T)&&a(S)?(L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,L.LINEAR),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,L.LINEAR_MIPMAP_LINEAR),L.generateMipmap(L.TEXTURE_2D)):(L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,L.LINEAR),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,L.LINEAR)),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,L.CLAMP_TO_EDGE),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,L.CLAMP_TO_EDGE),L.bindTexture(L.TEXTURE_2D,null),this._timestamp=w,this._width=T,this._height=S}},B.prototype.destroy=function(){this._texture&&this._gl.deleteTexture(this._texture),_(this)},z.TextureClass=z.prototype.TextureClass=B,V.exports=z},7767:(V,U,s)=>{"use strict";var u,y=s(1936).prefixProperty;V.exports=function l(){return void 0!==u?u:u=function M(){var c=y("perspective"),i=document.createElement("div"),a=typeof i.style[c]<"u";if(a&&"WebkitPerspective"===c){var h="__marzipano_test_css3d_support__",A=document.createElement("style");A.textContent="@media(-webkit-transform-3d){#"+h+"{height: 3px;})",document.getElementsByTagName("head")[0].appendChild(A),i.id=h,document.body.appendChild(i),a=i.offsetHeight>0,A.parentNode.removeChild(A),i.parentNode.removeChild(i)}return a}()}},7892:V=>{"use strict";var y;V.exports=function M(){return void 0!==y?y:y=function s(){var u=function U(){var u=null,l=navigator.plugins,c=navigator.mimeTypes,i=null;if(l&&l["Shockwave Flash"]&&c&&c["application/x-shockwave-flash"]&&c["application/x-shockwave-flash"].enabledPlugin)i=(i=l["Shockwave Flash"].description).replace(/^.*\s+(\S+\s+\S+$)/,"$1"),(u=[0,0,0])[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),u[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),u[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;else if(window.ActiveXObject)try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");a&&(i=a.GetVariable("$version"))&&(i=i.split(" ")[1].split(","),u=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}catch{}return u}();return u&&(u[0]>=11||10===u[0]&&u[1]>=1)}()}},7983:V=>{"use strict";var s;V.exports=function y(){return void 0!==s?s:s=function U(){var M=document.createElement("canvas");return!(!M.getContext||!M.getContext("webgl")&&!M.getContext("experimental-webgl"))}()}},5819:(V,U,s)=>{"use strict";var u,y=s(3845);V.exports=function l(){return void 0!==u?u:u=function M(){var c=document.createElement("a").style;c.cssText="pointer-events:auto";var i="auto"===c.pointerEvents,a=y.msie&&parseFloat(y.version)<11;return i&&!a}()}},3594:V=>{"use strict";V.exports=function U(s){return function(M){var u,l;try{l=s()}catch(c){u=c}finally{u?M(u):M(null,l)}}}},1045:V=>{"use strict";V.exports=function U(s,y,M,u){var l,c,a;return l=null!=M&&null!=M.absoluteWidth?M.absoluteWidth/s:null!=M&&null!=M.relativeWidth?M.relativeWidth:1,c=M&&null!=M.absoluteHeight?M.absoluteHeight/y:null!=M&&null!=M.relativeHeight?M.relativeHeight:1,a=null!=M&&null!=M.absoluteY?M.absoluteY/y:null!=M&&null!=M.relativeY?M.relativeY:0,(u=u||{}).x=null!=M&&null!=M.absoluteX?M.absoluteX/s:null!=M&&null!=M.relativeX?M.relativeX:0,u.y=a,u.width=l,u.height=c,u}},779:(V,U,s)=>{"use strict";var y=s(9364);V.exports=function M(u){return function(){if(!arguments.length)throw new Error("cancelized: expected at least one argument");var c=Array.prototype.slice.call(arguments,0),i=c[c.length-1]=y(c[c.length-1]);function a(){i.apply(null,arguments)}return u.apply(null,c),a}}},3559:(V,U,s)=>{"use strict";var y=s(6158);V.exports=function M(){var u=Array.prototype.slice.call(arguments,0);return function(){var c=u.slice(0),i=null,a=null,h=arguments.length?Array.prototype.slice.call(arguments,0,arguments.length-1):[],A=arguments.length?arguments[arguments.length-1]:y;function _(){var E=arguments[0];if(E)return i=a=null,void A.apply(null,arguments);if(!c.length)return i=a=null,void A.apply(null,arguments);var C=i=c.shift(),z=Array.prototype.slice.call(arguments,1);z.push(_);var B=i.apply(null,z);if(C===i){if("function"!=typeof B)throw new Error("chain: chaining on non-cancellable function");a=B}}function v(){a&&a.apply(null,arguments)}return h.unshift(null),_.apply(null,h),v}}},6438:V=>{"use strict";V.exports=function U(s,y,M){return Math.min(Math.max(s,y),M)}},6873:V=>{"use strict";V.exports=function U(s){for(var y in s)s.hasOwnProperty(y)&&(s[y]=void 0)}},5593:V=>{"use strict";V.exports=function U(s,y){return s<y?-1:s>y?1:0}},2800:V=>{"use strict";V.exports=function U(){var s=arguments;return function(M){for(var u=M,l=0;l<s.length;l++)u=s[l].call(null,u);return u}}},4224:V=>{"use strict";function U(i,a,h){return 2*Math.atan(h*Math.tan(i/2)/a)}V.exports={convert:U,htov:function s(i,a,h){return U(i,a,h)},htod:function y(i,a,h){return U(i,a,Math.sqrt(a*a+h*h))},vtoh:function M(i,a,h){return U(i,h,a)},vtod:function u(i,a,h){return U(i,h,Math.sqrt(a*a+h*h))},dtoh:function l(i,a,h){return U(i,Math.sqrt(a*a+h*h),a)},dtov:function c(i,a,h){return U(i,Math.sqrt(a*a+h*h),h)}}},3716:V=>{"use strict";V.exports=function U(s){return s.toPrecision(15)}},7802:V=>{"use strict";V.exports=function U(s,y){for(var M in y)M in s||(s[M]=y[M]);return s}},8792:V=>{"use strict";V.exports=function U(s,y){setTimeout(function M(){y&&y.length>0?s.apply(null,y):s()},0)}},9155:V=>{"use strict";V.exports=function U(s){return s*Math.PI/180}},645:V=>{"use strict";V.exports=function U(s,y){var M=null;return M=setTimeout(function u(){null!=M&&(M=null,y(null))},s),function l(){null!=M&&(clearTimeout(M),M=null,y.apply(null,arguments))}}},1936:V=>{"use strict";function U(B){for(var D=document.documentElement.style,p=["Moz","Webkit","Khtml","O","ms"],L=0;L<p.length;L++){var w=p[L]+(B[0].toUpperCase()+B.slice(1));if(w in D)return w}return B}function y(B){var D=U(B);return function(L,R){return L.style[D]=R}}var M=y("transform"),u=y("transformOrigin");V.exports={prefixProperty:U,getWithVendorPrefix:function s(B){var D=U(B);return function(L){return L.style[D]}},setWithVendorPrefix:y,setTransform:M,setTransformOrigin:u,setNullTransform:function l(B){M(B,"translateZ(0)")},setNullTransformOrigin:function c(B){u(B,"0 0 0")},setAbsolute:function i(B){B.style.position="absolute"},setPixelPosition:function a(B,D,p){B.style.left=D+"px",B.style.top=p+"px"},setPixelSize:function h(B,D,p){B.style.width=D+"px",B.style.height=p+"px"},setNullSize:function A(B){B.style.width=B.style.height=0},setFullSize:function _(B){B.style.width=B.style.height="100%"},setOverflowHidden:function v(B){B.style.overflow="hidden"},setOverflowVisible:function E(B){B.style.overflow="visible"},setNoPointerEvents:function C(B){B.style.pointerEvents="none"},setBlocking:function z(B){B.style.backgroundColor="#000",B.style.opacity="0",B.style.filter="alpha(opacity=0)"}}},2544:V=>{"use strict";V.exports=function U(s,y){for(var M in y)s[M]=y[M];return s}},3573:V=>{"use strict";var U=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:null;V.exports=U},3864:V=>{"use strict";V.exports=function U(){for(var s=0,y=0;y<arguments.length;y++){var M=arguments[y];s+=M,s+=M<<10,s^=M>>6}return s+=s<<3,s^=s>>11,(s+=s<<15)>=0?s:-s}},5946:V=>{"use strict";V.exports=function U(s,y){s.super_=y;var M=function(){};M.prototype=y.prototype,s.prototype=new M,s.prototype.constructor=s}},1020:V=>{"use strict";V.exports=function U(s){return 0==(s&s-1)}},4501:V=>{"use strict";V.exports=function U(s,y){return(+s%(y=+y)+y)%y}},6158:V=>{"use strict";V.exports=function U(){}},242:V=>{"use strict";V.exports=function U(){return typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return Date.now()}}()},9364:V=>{"use strict";V.exports=function U(s){var M,y=!1;return function(){return y||(y=!0,M=s.apply(null,arguments)),M}}},3367:V=>{"use strict";V.exports=function s(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var y=window.screen;if(y&&y.deviceXDPI&&y.logicalXDPI)return y.deviceXDPI/y.logicalXDPI;if(y&&y.systemXDPI&&y.logicalXDPI)return y.systemXDPI/y.logicalXDPI}return 1}},4576:(V,U,s)=>{"use strict";var y=s(7767),M=s(1936).setTransform,u=s(1936).setPixelPosition,l=s(3716);V.exports=function c(i,a,h,A){if(A=A||"",y()){var _="translateX("+l(a)+"px) translateY("+l(h)+"px) translateZ(0) "+A;M(i,_)}else u(i,a,h)}},2731:V=>{"use strict";V.exports=function U(s){return 180*s/Math.PI}},1097:V=>{"use strict";V.exports=function U(s){return"number"==typeof s&&isFinite(s)}},1687:(V,U,s)=>{"use strict";var y=s(6158);V.exports=function M(u){return function(){var c=arguments.length?Array.prototype.slice.call(arguments,0,arguments.length-1):[],i=arguments.length?arguments[arguments.length-1]:y,a=null,h=!1;function A(){var _=arguments[0];!_||h?i.apply(null,arguments):a=u.apply(null,c)}return c.push(A),A(!0),function(){h=!0,a.apply(null,arguments)}}}},58:(V,U,s)=>{"use strict";var y=s(242);V.exports=function M(u,l,c){var i=!1,a=y();return l(0),requestAnimationFrame(function h(){if(!i){var A=(y()-a)/u;A<1?(l(A),requestAnimationFrame(h)):(l(1),c())}}),function(){i=!0,c.apply(null,arguments)}}},4699:V=>{"use strict";V.exports=function U(s){var y=typeof s;if("object"===y){if(null===s)return"null";if("[object Array]"===Object.prototype.toString.call(s))return"array";if("[object RegExp]"===Object.prototype.toString.call(s))return"regexp"}return y}},5675:(V,U,s)=>{"use strict";var y=s(8843),M=s(8452).mat4,u=s(8452).vec4,l=s(3367),c=s(1097),i=s(6438),a=s(6873),C=[1,0,1,0],z=[-1,-1,1,1];function D(p,L){if(!p||null==p.mediaAspectRatio)throw new Error("mediaAspectRatio must be defined");this._x=p&&null!=p.x?p.x:.5,this._y=p&&null!=p.y?p.y:.5,this._zoom=p&&null!=p.zoom?p.zoom:1,this._mediaAspectRatio=p.mediaAspectRatio,this._width=p&&null!=p.width?p.width:0,this._height=p&&null!=p.height?p.height:0,this._limiter=L||null,this._projMatrix=M.create(),this._invProjMatrix=M.create(),this._frustum=[0,0,0,0],this._projectionChanged=!0,this._params={},this._vec=u.create(),this._update()}y(D),D.prototype.destroy=function(){a(this)},D.prototype.x=function(){return this._x},D.prototype.y=function(){return this._y},D.prototype.zoom=function(){return this._zoom},D.prototype.mediaAspectRatio=function(){return this._mediaAspectRatio},D.prototype.width=function(){return this._width},D.prototype.height=function(){return this._height},D.prototype.size=function(p){return(p=p||{}).width=this._width,p.height=this._height,p},D.prototype.parameters=function(p){return(p=p||{}).x=this._x,p.y=this._y,p.zoom=this._zoom,p.mediaAspectRatio=this._mediaAspectRatio,p},D.prototype.limiter=function(){return this._limiter},D.prototype.setX=function(p){this._resetParams(),this._params.x=p,this._update(this._params)},D.prototype.setY=function(p){this._resetParams(),this._params.y=p,this._update(this._params)},D.prototype.setZoom=function(p){this._resetParams(),this._params.zoom=p,this._update(this._params)},D.prototype.offsetX=function(p){this.setX(this._x+p)},D.prototype.offsetY=function(p){this.setY(this._y+p)},D.prototype.offsetZoom=function(p){this.setZoom(this._zoom+p)},D.prototype.setMediaAspectRatio=function(p){this._resetParams(),this._params.mediaAspectRatio=p,this._update(this._params)},D.prototype.setSize=function(p){this._resetParams(),this._params.width=p.width,this._params.height=p.height,this._update(this._params)},D.prototype.setParameters=function(p){this._resetParams(),this._params.x=p.x,this._params.y=p.y,this._params.zoom=p.zoom,this._params.mediaAspectRatio=p.mediaAspectRatio,this._update(this._params)},D.prototype.setLimiter=function(p){this._limiter=p||null,this._update()},D.prototype._resetParams=function(){var p=this._params;p.x=null,p.y=null,p.zoom=null,p.mediaAspectRatio=null,p.width=null,p.height=null},D.prototype._update=function(p){null==p&&(this._resetParams(),p=this._params);var L=this._x,R=this._y,H=this._zoom,w=this._mediaAspectRatio,d=this._width,T=this._height;if(p.x=null!=p.x?p.x:L,p.y=null!=p.y?p.y:R,p.zoom=null!=p.zoom?p.zoom:H,p.mediaAspectRatio=null!=p.mediaAspectRatio?p.mediaAspectRatio:w,p.width=null!=p.width?p.width:d,p.height=null!=p.height?p.height:T,this._limiter&&!(p=this._limiter(p)))throw new Error("Bad view limiter");var S=p.x,I=p.y,O=p.zoom,Y=p.mediaAspectRatio,W=p.width,X=p.height;if(!(c(S)&&c(I)&&c(O)&&c(Y)&&c(W)&&c(X)))throw new Error("Bad view - suspect a broken limiter");O=i(O,1e-6,1/0),this._x=S,this._y=I,this._zoom=O,this._mediaAspectRatio=Y,this._width=W,this._height=X,(S!==L||I!==R||O!==H||Y!==w||W!==d||X!==T)&&(this._projectionChanged=!0,this.emit("change")),(W!==d||X!==T)&&this.emit("resize")},D.prototype._zoomX=function(){return this._zoom},D.prototype._zoomY=function(){var R=this._zoom,H=R*this._mediaAspectRatio/(this._width/this._height);return isNaN(H)&&(H=R),H},D.prototype.updateWithControlParameters=function(p){var L=this.zoom(),R=this._zoomX(),H=this._zoomY();this.offsetX(p.axisScaledX*R+p.x*L),this.offsetY(p.axisScaledY*H+p.y*L),this.offsetZoom(p.zoom*L)},D.prototype._updateProjection=function(){var p=this._projMatrix,L=this._invProjMatrix,R=this._frustum;if(this._projectionChanged){var H=this._x,w=this._y,d=this._zoomX(),T=this._zoomY(),S=R[0]=.5-w+.5*T,I=R[1]=H-.5+.5*d,O=R[2]=.5-w-.5*T,Y=R[3]=H-.5-.5*d;M.ortho(p,Y,I,O,S,-1,1),M.invert(L,p),this._projectionChanged=!1}},D.prototype.projection=function(){return this._updateProjection(),this._projMatrix},D.prototype.inverseProjection=function(){return this._updateProjection(),this._invProjMatrix},D.prototype.intersects=function(p){this._updateProjection();for(var L=this._frustum,R=0;R<L.length;R++){for(var H=L[R],w=C[R],d=z[R],T=!1,S=0;S<p.length;S++){var I=p[S];if(d<0&&I[w]<H||d>0&&I[w]>H){T=!0;break}}if(!T)return!1}return!0},D.prototype.selectLevel=function(p){for(var L=l()*this.width(),R=this._zoom,H=0;H<p.length;H++){var w=p[H];if(R*w.width()>=L)return w}return p[p.length-1]},D.prototype.coordinatesToScreen=function(p,L){var R=this._vec;L||(L={});var H=this._width,w=this._height;if(H<=0||w<=0)return L.x=null,L.y=null,null;u.set(R,(p&&null!=p.x?p.x:.5)-.5,.5-(p&&null!=p.y?p.y:.5),-1,1),u.transformMat4(R,R,this.projection());for(var S=0;S<3;S++)R[S]/=R[3];return L.x=H*(R[0]+1)/2,L.y=w*(1-R[1])/2,L},D.prototype.screenToCoordinates=function(p,L){var R=this._vec;return L||(L={}),u.set(R,2*p.x/this._width-1,1-2*p.y/this._height,1,1),u.transformMat4(R,R,this.inverseProjection()),L.x=.5+R[0],L.y=.5-R[1],L},D.limit={x:function(p,L){return function(H){return H.x=i(H.x,p,L),H}},y:function(p,L){return function(H){return H.y=i(H.y,p,L),H}},zoom:function(p,L){return function(H){return H.zoom=i(H.zoom,p,L),H}},resolution:function(p){return function(R){if(R.width<=0||R.height<=0)return R;var H=R.width,w=l()*H/p;return R.zoom=i(R.zoom,w,1/0),R}},visibleX:function(p,L){return function(H){var w=L-p;return H.zoom>w&&(H.zoom=w),H.x=i(H.x,p+.5*H.zoom,L-.5*H.zoom),H}},visibleY:function(p,L){return function(H){if(H.width<=0||H.height<=0)return H;var d=H.width/H.height/H.mediaAspectRatio,T=(L-p)*d;return H.zoom>T&&(H.zoom=T),H.y=i(H.y,p+.5*H.zoom/d,L-.5*H.zoom/d),H}},letterbox:function(){return function(L){if(L.width<=0||L.height<=0)return L;var d,T,S,I,R=L.width/L.height,w=R/L.mediaAspectRatio;return L.mediaAspectRatio>=R&&(L.zoom=Math.min(L.zoom,1)),L.mediaAspectRatio<=R&&(L.zoom=Math.min(L.zoom,w)),L.zoom>1?d=T=.5:(d=0+.5*L.zoom/1,T=1-.5*L.zoom/1),L.zoom>w?S=I=.5:(S=0+.5*L.zoom/w,I=1-.5*L.zoom/w),L.x=i(L.x,d,T),L.y=i(L.y,S,I),L}}},D.type=D.prototype.type="flat",V.exports=D},9421:(V,U,s)=>{"use strict";var y=s(8843),M=s(8452).mat4,u=s(8452).vec4,l=s(3367),c=s(4224),i=s(4501),a=s(1097),h=s(6438),A=s(3716),_=s(2800),v=s(6873),p=Math.PI/4,H=1e-6;function w(d,T){this._yaw=d&&null!=d.yaw?d.yaw:0,this._pitch=d&&null!=d.pitch?d.pitch:0,this._roll=d&&null!=d.roll?d.roll:0,this._fov=d&&null!=d.fov?d.fov:p,this._width=d&&null!=d.width?d.width:0,this._height=d&&null!=d.height?d.height:0,this._projectionCenterX=d&&null!=d.projectionCenterX?d.projectionCenterX:0,this._projectionCenterY=d&&null!=d.projectionCenterY?d.projectionCenterY:0,this._limiter=T||null,this._projMatrix=M.create(),this._invProjMatrix=M.create(),this._frustum=[u.create(),u.create(),u.create(),u.create(),u.create()],this._projectionChanged=!0,this._params={},this._fovs={},this._tmpVec=u.create(),this._update()}y(w),w.prototype.destroy=function(){v(this)},w.prototype.yaw=function(){return this._yaw},w.prototype.pitch=function(){return this._pitch},w.prototype.roll=function(){return this._roll},w.prototype.projectionCenterX=function(){return this._projectionCenterX},w.prototype.projectionCenterY=function(){return this._projectionCenterY},w.prototype.fov=function(){return this._fov},w.prototype.width=function(){return this._width},w.prototype.height=function(){return this._height},w.prototype.size=function(d){return(d=d||{}).width=this._width,d.height=this._height,d},w.prototype.parameters=function(d){return(d=d||{}).yaw=this._yaw,d.pitch=this._pitch,d.roll=this._roll,d.fov=this._fov,d},w.prototype.limiter=function(){return this._limiter},w.prototype.setYaw=function(d){this._resetParams(),this._params.yaw=d,this._update(this._params)},w.prototype.setPitch=function(d){this._resetParams(),this._params.pitch=d,this._update(this._params)},w.prototype.setRoll=function(d){this._resetParams(),this._params.roll=d,this._update(this._params)},w.prototype.setFov=function(d){this._resetParams(),this._params.fov=d,this._update(this._params)},w.prototype.setProjectionCenterX=function(d){this._resetParams(),this._params.projectionCenterX=d,this._update(this._params)},w.prototype.setProjectionCenterY=function(d){this._resetParams(),this._params.projectionCenterY=d,this._update(this._params)},w.prototype.offsetYaw=function(d){this.setYaw(this._yaw+d)},w.prototype.offsetPitch=function(d){this.setPitch(this._pitch+d)},w.prototype.offsetRoll=function(d){this.setRoll(this._roll+d)},w.prototype.offsetFov=function(d){this.setFov(this._fov+d)},w.prototype.setSize=function(d){this._resetParams(),this._params.width=d.width,this._params.height=d.height,this._update(this._params)},w.prototype.setParameters=function(d){this._resetParams(),this._params.yaw=d.yaw,this._params.pitch=d.pitch,this._params.roll=d.roll,this._params.fov=d.fov,this._params.projectionCenterX=d.projectionCenterX,this._params.projectionCenterY=d.projectionCenterY,this._update(this._params)},w.prototype.setLimiter=function(d){this._limiter=d||null,this._update()},w.prototype._resetParams=function(){var d=this._params;d.yaw=null,d.pitch=null,d.roll=null,d.fov=null,d.width=null,d.height=null},w.prototype._update=function(d){null==d&&(this._resetParams(),d=this._params);var T=this._yaw,S=this._pitch,I=this._roll,O=this._fov,Y=this._projectionCenterX,W=this._projectionCenterY,X=this._width,J=this._height;if(d.yaw=null!=d.yaw?d.yaw:T,d.pitch=null!=d.pitch?d.pitch:S,d.roll=null!=d.roll?d.roll:I,d.fov=null!=d.fov?d.fov:O,d.width=null!=d.width?d.width:X,d.height=null!=d.height?d.height:J,d.projectionCenterX=null!=d.projectionCenterX?d.projectionCenterX:Y,d.projectionCenterY=null!=d.projectionCenterY?d.projectionCenterY:W,this._limiter&&!(d=this._limiter(d)))throw new Error("Bad view limiter");var tt=(d=this._normalize(d)).yaw,et=d.pitch,nt=d.roll,ct=d.fov,ut=d.width,pt=d.height,dt=d.projectionCenterX,gt=d.projectionCenterY;if(!(a(tt)&&a(et)&&a(nt)&&a(ct)&&a(ut)&&a(pt)&&a(dt)&&a(gt)))throw new Error("Bad view - suspect a broken limiter");this._yaw=tt,this._pitch=et,this._roll=nt,this._fov=ct,this._width=ut,this._height=pt,this._projectionCenterX=dt,this._projectionCenterY=gt,(tt!==T||et!==S||nt!==I||ct!==O||ut!==X||pt!==J||dt!==Y||gt!==W)&&(this._projectionChanged=!0,this.emit("change")),(ut!==X||pt!==J)&&this.emit("resize")},w.prototype._normalize=function(d){this._normalizeCoordinates(d);var T=c.htov(Math.PI,d.width,d.height),S=isNaN(T)?Math.PI:Math.min(Math.PI,T);return d.fov=h(d.fov,H,S-H),d},w.prototype._normalizeCoordinates=function(d){return"yaw"in d&&(d.yaw=i(d.yaw-Math.PI,-2*Math.PI)+Math.PI),"pitch"in d&&(d.pitch=i(d.pitch-Math.PI,-2*Math.PI)+Math.PI),"roll"in d&&(d.roll=i(d.roll-Math.PI,-2*Math.PI)+Math.PI),d},w.prototype.normalizeToClosest=function(d,T){var S=this._yaw,I=this._pitch,O=d.yaw,Y=d.pitch,W=O-2*Math.PI,X=O+2*Math.PI;Math.abs(W-S)<Math.abs(O-S)?O=W:Math.abs(X-S)<Math.abs(O-S)&&(O=X);var J=Y-2*Math.PI,tt=Y+2*Math.PI;return Math.abs(J-I)<Math.abs(Y-I)?Y=J:Math.abs(J-I)<Math.abs(Y-I)&&(Y=tt),(T=T||{}).yaw=O,T.pitch=Y,T},w.prototype.updateWithControlParameters=function(d){var T=this._fov,S=c.vtoh(T,this._width,this._height);isNaN(S)&&(S=T),this.offsetYaw(d.axisScaledX*S+2*d.x*S+d.yaw),this.offsetPitch(d.axisScaledY*T+2*d.y*S+d.pitch),this.offsetRoll(-d.roll),this.offsetFov(d.zoom*T)},w.prototype._updateProjection=function(){var d=this._projMatrix,T=this._invProjMatrix,S=this._frustum;if(this._projectionChanged){var I=this._width,O=this._height,Y=this._fov,W=c.vtoh(Y,I,O),X=I/O,J=this._projectionCenterX,tt=this._projectionCenterY;if(0!==J||0!==tt){var et=Math.atan(2*J*Math.tan(W/2)),nt=Math.atan(2*tt*Math.tan(Y/2)),ct=this._fovs;ct.leftDegrees=180*(W/2+et)/Math.PI,ct.rightDegrees=180*(W/2-et)/Math.PI,ct.upDegrees=180*(Y/2+nt)/Math.PI,ct.downDegrees=180*(Y/2-nt)/Math.PI,M.perspectiveFromFieldOfView(d,ct,-1,1)}else M.perspective(d,Y,X,-1,1);M.rotateZ(d,d,this._roll),M.rotateX(d,d,this._pitch),M.rotateY(d,d,this._yaw),M.invert(T,d),this._matrixToFrustum(d,S),this._projectionChanged=!1}},w.prototype._matrixToFrustum=function(d,T){u.set(T[0],d[3]+d[0],d[7]+d[4],d[11]+d[8],0),u.set(T[1],d[3]-d[0],d[7]-d[4],d[11]-d[8],0),u.set(T[2],d[3]+d[1],d[7]+d[5],d[11]+d[9],0),u.set(T[3],d[3]-d[1],d[7]-d[5],d[11]-d[9],0),u.set(T[4],d[3]+d[2],d[7]+d[6],d[11]+d[10],0)},w.prototype.projection=function(){return this._updateProjection(),this._projMatrix},w.prototype.inverseProjection=function(){return this._updateProjection(),this._invProjMatrix},w.prototype.intersects=function(d){this._updateProjection();for(var T=this._frustum,S=this._tmpVec,I=0;I<T.length;I++){for(var O=T[I],Y=!1,W=0;W<d.length;W++){var X=d[W];u.set(S,X[0],X[1],X[2],0),u.dot(O,S)>=0&&(Y=!0)}if(!Y)return!1}return!0},w.prototype.selectLevel=function(d){for(var T=l()*this._height,S=Math.tan(.5*this._fov),I=0;I<d.length;I++){var O=d[I];if(S*O.height()>=T)return O}return d[d.length-1]},w.prototype.coordinatesToScreen=function(d,T){var S=this._tmpVec;T||(T={});var I=this._width,O=this._height;if(I<=0||O<=0)return T.x=null,T.y=null,null;var Y=d.yaw,W=d.pitch,X=Math.sin(Y)*Math.cos(W),J=-Math.sin(d.pitch),tt=-Math.cos(Y)*Math.cos(W);return u.set(S,X,J,tt,1),u.transformMat4(S,S,this.projection()),S[3]>=0?(T.x=I*(S[0]/S[3]+1)/2,T.y=O*(1-S[1]/S[3])/2,T):(T.x=null,T.y=null,null)},w.prototype.screenToCoordinates=function(d,T){var S=this._tmpVec;T||(T={}),u.set(S,2*d.x/this._width-1,1-2*d.y/this._height,1,1),u.transformMat4(S,S,this.inverseProjection());var X=Math.sqrt(S[0]*S[0]+S[1]*S[1]+S[2]*S[2]);return T.yaw=Math.atan2(S[0],-S[2]),T.pitch=Math.acos(S[1]/X)-Math.PI/2,this._normalizeCoordinates(T),T},w.prototype.coordinatesToPerspectiveTransform=function(d,T,S){S=S||"";var I=this._height,O=this._width,W=.5*I/Math.tan(this._fov/2),X="";return X+="translateX("+A(O/2)+"px) ",X+="translateY("+A(I/2)+"px) ",X+="translateX(-50%) translateY(-50%) ",X+="perspective("+A(W)+"px) ",X+="translateZ("+A(W)+"px) ",X+="rotateZ("+A(-this._roll)+"rad) ",X+="rotateX("+A(-this._pitch)+"rad) ",X+="rotateY("+A(this._yaw)+"rad) ",X+="rotateY("+A(-d.yaw)+"rad) ",X+="rotateX("+A(d.pitch)+"rad) ",(X+="translateZ("+A(-T)+"px) ")+(S+" ")},w.limit={yaw:function(d,T){return function(I){return I.yaw=h(I.yaw,d,T),I}},pitch:function(d,T){return function(I){return I.pitch=h(I.pitch,d,T),I}},roll:function(d,T){return function(I){return I.roll=h(I.roll,d,T),I}},hfov:function(d,T){return function(I){var O=I.width,Y=I.height;if(O>0&&Y>0){var W=c.htov(d,O,Y),X=c.htov(T,O,Y);I.fov=h(I.fov,W,X)}return I}},vfov:function(d,T){return function(I){return I.fov=h(I.fov,d,T),I}},resolution:function(d){return function(S){var I=S.height;if(I){var O=l()*I,Y=2*Math.atan(O/d);S.fov=h(S.fov,Y,1/0)}return S}},traditional:function(d,T,S){return S=S??T,_(w.limit.resolution(d),w.limit.vfov(0,T),w.limit.hfov(0,S),w.limit.pitch(-Math.PI/2,Math.PI/2))}},w.type=w.prototype.type="rectilinear",V.exports=w},8843:V=>{"use strict";function U(){}U.prototype.addEventListener=function(y,M){var u=this.__events=this.__events||{},l=u[y]=u[y]||[];l.indexOf(M)<0&&l.push(M)},U.prototype.removeEventListener=function(y,M){var l=(this.__events=this.__events||{})[y];if(l){var c=l.indexOf(M);c>=0&&l.splice(c,1)}},U.prototype.emit=function(y,M){var u=this.__events=this.__events||{},l=u[y],c=Array.prototype.slice.call(arguments,1);if(l)for(var i=0;i<l.length;i++){var a=l[i];a.apply(this,c)}},V.exports=function s(y){for(var M in U.prototype)U.prototype.hasOwnProperty(M)&&(y.prototype[M]=U.prototype[M])}},7493:(V,U,s)=>{"use strict";s.d(U,{G:()=>a});var y=s(4537),M=s(8692),u=s(5732),l=s(8066),c=s(5056),i=s(7343);let a=(()=>{class h{constructor(_,v,E,C,z){this.http=_,this.windowRef=v,this.viewerDataService=E,this.panoService=C,this.platformId=z,this.session_id=""}send(_){if((0,M.PM)(this.platformId)||this.viewerDataService.editor||!this.panoService.moderationUrl)return;this.session_id||(this.session_id=window.crypto.randomUUID());let v=this._getStats();0!=v.host.indexOf("localhost")&&(null!=_.type&&(v.type=_.type),null!=_.plugin&&(v.plugin=_.plugin),null!=_.details&&(v.details=_.details),this.http.post("https://apiw.gothru.co/tours/stats",v).subscribe())}getWidget(_){let E=[{name:"Berlin Menu",component:"MenuHopenkeComponent"},{name:"Side Menu",component:"MenuKavftigComponent"},{name:"Top Menu",component:"MenuLekprogComponent"},{name:"Real Estate Menu",component:"MenuLoppitteComponent"},{name:"Berlin Map",component:"SchemeHopenkeComponent"},{name:"Floor Map",component:"SchemeKavftigComponent"},{name:"Mapbox",component:"SchemeGvesjodComponent"},{name:"Berlin Hotspot",component:"HotspotHopenkeComponent"},{name:"Hotspot",component:"HotspotKavftigComponent"},{name:"Pano link",component:"HotspotHolmlackComponent"},{name:"Berlin Control",component:"ControlHopenkeComponent"},{name:"Control Bar",component:"ControlKavftigComponent"},{name:"Real Estate Control",component:"ControlLoppitteComponent"},{name:"Carousel",component:"OtherCarouselComponent"},{name:"Language",component:"OtherLanguageComponent"},{name:"Logo",component:"OtherLogoComponent"},{name:"Code",component:"OtherCodeComponent"},{name:"Password",component:"OtherPasswordComponent"},{name:"Pano Label",component:"OtherTitleComponent"}].filter(C=>C.component==_).pop();return E?{name:E.name,key:E.name.toLowerCase().replace(" ","_")}:{name:"",key:""}}_getStats(){let _={ip:null,action:null,returning:null,user_type:null,time:null,m_key:null,user_id:this.panoService.user_id,session_id:this.session_id,browser:this.windowRef.nativeWindow.navigator.userAgent,height:this.windowRef.nativeWindow.innerHeight,language:this.windowRef.nativeWindow.navigator.language,location:this.windowRef.nativeWindow.location.href,moderation_id:this.viewerDataService.active.t_id,pano_id:this.viewerDataService.active.id,referer:document.referrer,site:this.panoService.moderationUrl.substr(2),local_time:Math.floor(Date.now()/1e3),width:this.windowRef.nativeWindow.innerWidth,device:null,host:null,tour_type:null,plugin:null,type:null,details:null};return this.panoService.googleApiKey&&(_.m_key=this.panoService.googleApiKey),_.device=this.windowRef.nativeWindow.innerWidth<600?"mobile":this.windowRef.nativeWindow.innerWidth>=600&&this.windowRef.nativeWindow.innerWidth<1e3?"tablet":"desktop",_.host=_.location.split("/")[2],_.tour_type=0==this.panoService.moderationUrl.indexOf("G")?"google":"hosted",_}}return h.\u0275fac=function(_){return new(_||h)(y.LFG(u.eN),y.LFG(l.X),y.LFG(c.m),y.LFG(i.X),y.LFG(y.Lbi))},h.\u0275prov=y.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},3272:(V,U,s)=>{"use strict";s.d(U,{m:()=>E});var y=s(4537),M=s(7343),u=s(7267),l=s(2001),c=s(7493),i=s(6101),a=s(8692);function h(C,z){if(1&C&&(y.TgZ(0,"span",2),y._uU(1),y.qZA()),2&C){const B=y.oxw();y.Udp("background",B.getBgcStyles(B.otherTitleComponentBg))("color",B.otherTitleComponentColor?B.otherTitleComponentColor.color:"")("left",B.panoTitlePos.x,"px")("top",B.panoTitlePos.y,"px"),y.xp6(1),y.Oqu(B.panoTitle)}}function A(C,z){if(1&C&&(y.O4$(),y._UZ(0,"path",7)),2&C){const B=z.$implicit,D=y.oxw().$implicit,p=y.oxw(2);y.Q6J("ngClass",B.class),y.uIk("d",B.d)("transform",p.transform(D.angle,B.class))}}function _(C,z){if(1&C){const B=y.EpF();y.O4$(),y.TgZ(0,"g",4,5),y.NdJ("mouseenter",function(){const L=y.CHM(B).$implicit,R=y.MAs(1),H=y.oxw(2);return y.KtG(H.mouseEnter(L.id,R))})("mouseleave",function(){y.CHM(B);const p=y.oxw(2);return y.KtG(p.mouseLeave())})("click",function(){const L=y.CHM(B).$implicit,R=y.oxw(2);return y.KtG(R.goToPano(L.id))}),y.YNc(2,A,1,3,"path",6),y.qZA()}if(2&C){const B=y.oxw(2);y.xp6(2),y.Q6J("ngForOf",B.shapes)}}function v(C,z){if(1&C&&(y.O4$(),y.TgZ(0,"svg"),y.YNc(1,_,3,1,"g",3),y.qZA()),2&C){const B=y.oxw();y.xp6(1),y.Q6J("ngForOf",B.activePano.links)}}let E=(()=>{class C{constructor(B,D,p,L,R){this.panoData=B,this.otherService=D,this.viewerService=p,this.statsService=L,this.i18n=R,this.shapes=[{class:"shadow",d:"M 0 -100 L 40 -60 L 30 -50 L 0 -82 L -30 -50 L -40 -60"},{class:"arrow",d:"M 0 -100 L 40 -60 L 30 -50 L 0 -82 L -30 -50 L -40 -60"},{class:"placeholder",d:"M 0 -120 L 60 -60 L 40 -30 L -40 -30 L -60 -60 L 0 -120"}],this.panoTitle=null,this.panoTitlePos={x:0,y:0}}get viewerReady(){return this.viewerService.viewerReady}goToPano(B){this.panoTitle=null,this.viewerService.goToPano(B),this.statsService.send({type:"arrow",details:B})}toFloat(B){return parseFloat(B.toFixed(2))}transform(B,D){let p=-1*this.viewerService.viewer.scene().view().pitch()*180/Math.PI,L=this.toFloat(this.viewerService.viewer._size.width/2),R=this.toFloat(this.viewerService.viewer._size.height*(78+p)/100);"shadow"==D&&(R+=3);let H=this.toFloat(1-(.667+.262*p/90));return p<=0&&(H=this.toFloat(.333+.667*p/-90)),`translate(${L}, ${R}) scale(1, ${H}) rotate(${this.toFloat(B-this.viewerService.angle+this.activePano.north_angle)})`}get otherTitleComponentShow(){if(!this.otherService.getWidget("OtherTitleComponent"))return!1;let B=this.otherService.getWidgetOption("OtherTitleComponent","tooltip_show");return!!B&&B.value}get otherTitleComponentBg(){if(!this.otherService.getWidget("OtherTitleComponent"))return null;let B=this.otherService.getWidgetOption("OtherTitleComponent","tooltip_background");return B?B.value:null}get otherTitleComponentColor(){if(!this.otherService.getWidget("OtherTitleComponent"))return null;let B=this.otherService.getWidgetOption("OtherTitleComponent","tooltip_color");return B?B.value:null}getBgcStyles(B){return B?"gradient"==B.type?"radial"!=B.align?`-webkit-linear-gradient(${B.align}, ${B.color} 0%, ${B.color2} 100%)`:`radial-gradient(at center center, ${B.color} 0%, ${B.color2} 100%)`:B.color:null}mouseEnter(B,D){if(!this.otherService.getWidget("OtherTitleComponent"))return;let p=this.otherService.getWidgetOption("OtherTitleComponent","list");if(!p)return;let L=p.value.filter(w=>w.pano.id===B).pop();if(!L)return;let R=D.getBoundingClientRect(),H=document.getElementById("panorama").getBoundingClientRect();this.panoTitlePos.x=Math.floor(R.left-H.left+R.width/2),this.panoTitlePos.y=Math.floor(R.top-H.top-R.height),this.panoTitle=this.i18n.t(L.name)||null}mouseLeave(){this.panoTitle=null}ngOnChanges(B){void 0!==B.activeId&&(this.activePano=this.panoData.getPanoById(this.activeId))}}return C.\u0275fac=function(B){return new(B||C)(y.Y36(M.X),y.Y36(u.m),y.Y36(l.a),y.Y36(c.G),y.Y36(i.T))},C.\u0275cmp=y.Xpm({type:C,selectors:[["vwr-arrows"]],inputs:{activeId:"activeId"},features:[y.TTD],decls:2,vars:2,consts:[["class","tooltip",3,"background","color","left","top",4,"ngIf"],[4,"ngIf"],[1,"tooltip"],[3,"mouseenter","mouseleave","click",4,"ngFor","ngForOf"],[3,"mouseenter","mouseleave","click"],["arrow",""],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(B,D){1&B&&(y.YNc(0,h,2,9,"span",0),y.YNc(1,v,2,1,"svg",1)),2&B&&(y.Q6J("ngIf",D.otherTitleComponentShow&&D.panoTitle),y.xp6(1),y.Q6J("ngIf",D.viewerReady&&D.activePano))},dependencies:[a.mk,a.sg,a.O5],styles:["span.tooltip[_ngcontent-%COMP%]{position:absolute;top:0;left:0;transform:translate(-50%,-50%);background-color:#fff;border-radius:2px;padding:2px 10px;font-size:14px;color:#5c6b75;z-index:3}svg[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;top:0;pointer-events:none;z-index:4}svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]{cursor:pointer}svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{pointer-events:all;stroke-width:0;fill-rule:evenodd}svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   path.shadow[_ngcontent-%COMP%]{fill:#00000080;margin-top:3px}svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   path.arrow[_ngcontent-%COMP%]{fill:#fff}svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   path.placeholder[_ngcontent-%COMP%]{opacity:0}svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]:hover   path.arrow[_ngcontent-%COMP%]{fill:#cff}"]}),C})()},1148:(V,U,s)=>{"use strict";function y(){this._dynamics={yaw:new Marzipano.Dynamics,pitch:new Marzipano.Dynamics},this._deviceOrientationHandler=this._handleData.bind(this),window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",this._deviceOrientationHandler),this._previous={},this._current={},this._tmp={},this._getPitchCallbacks=[]}s.d(U,{z:()=>y}),Marzipano.dependencies.eventEmitter(y),y.prototype.destroy=function(){this._dynamics=null,window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",this._deviceOrientationHandler),this._deviceOrientationHandler=null,this._previous=null,this._current=null,this._tmp=null,this._getPitchCallbacks=null},y.prototype.getPitch=function(u){this._getPitchCallbacks.push(u)},y.prototype._handleData=function(u){var l=this._previous,c=this._current,i=this._tmp;i.yaw=Marzipano.util.degToRad(u.alpha),i.pitch=Marzipano.util.degToRad(u.beta),i.roll=Marzipano.util.degToRad(u.gamma),function M(u,l){var c,i,a,h=Math.cos(u.yaw),A=Math.sin(u.yaw),_=Math.cos(u.pitch),v=Math.sin(u.pitch),E=Math.cos(u.roll),C=Math.sin(u.roll),z=[A*C-h*v*E,-h*_,h*v*C+A*E,_*E,-v,-_*C,A*v*E+h*C,A*_,-A*v*C+h*E];z[3]>.9999?(c=Math.atan2(z[2],z[8]),a=Math.PI/2,i=0):z[3]<-.9999?(c=Math.atan2(z[2],z[8]),a=-Math.PI/2,i=0):(c=Math.atan2(-z[6],z[0]),i=Math.atan2(-z[5],z[4]),a=Math.asin(z[3])),l.yaw=c,l.pitch=a,l.roll=i}(i,c),this._getPitchCallbacks.forEach(function(a){a(null,c.pitch)}),this._getPitchCallbacks.length=0,null!=l.yaw&&null!=l.pitch&&null!=l.roll&&(this._dynamics.yaw.offset=-(c.yaw-l.yaw),this._dynamics.pitch.offset=c.pitch-l.pitch,this.emit("parameterDynamics","yaw",this._dynamics.yaw),this.emit("parameterDynamics","pitch",this._dynamics.pitch)),l.yaw=c.yaw,l.pitch=c.pitch,l.roll=c.roll}},8550:(V,U,s)=>{"use strict";s.d(U,{e:()=>A});var y=s(4537),M=s(5617),u=s(2001),l=s(7343),c=s(8692),i=s(3272);const a=["viewer"];function h(_,v){if(1&_&&y._UZ(0,"vwr-arrows",3),2&_){const E=y.oxw();y.Q6J("activeId",E.active.id)}}let A=(()=>{class _{constructor(E,C,z){this.marzipanoService=E,this.viewerService=C,this.panoService=z,this.clicked=!1}ngOnInit(){this.viewerService.viewerService=this.marzipanoService,this.viewerService.viewerDataService.viewer=this.viewerElm,this.viewerService.viewerWidthObs.subscribe(E=>{this.viewerService.viewer&&setTimeout(()=>this.viewerService.viewer._updateSizeListener())})}get active(){return this.viewerService.active}get show_arrows(){return this.panoService.hosted_arrows}ngAfterViewInit(){this.viewerService.initViewer(this.viewerElm.nativeElement),this.regWindowTouchEvents()}onMouseDown(){this.mouseDown()}onMouseUp(){this.mouseUp()}onMouseMove(){this.mouseMove()}keyDown(E){let C=document.activeElement,z=document.getElementById("overlay");if((z==C||z?.contains(C))&&(!C||-1===["input","select","textarea"].indexOf(C.tagName.toLowerCase()))&&!E.ctrlKey&&!E.metaKey)switch(E.which){case 87:case 38:this.interactStart(),this.viewerService.goNorth(),this.interactEnd();break;case 83:case 40:this.interactStart(),this.viewerService.goSouth(),this.interactEnd()}}interactStart(){this.viewerService.interaction||(this.viewerService.interaction=!0,this.viewerService.viewerDataService.slideInterval.angle&&this.viewerService.slidePause()),this.interactTimer&&clearTimeout(this.interactTimer)}interactEnd(E=2e3){this.interactTimer&&clearTimeout(this.interactTimer),this.interactTimer=setTimeout(()=>{this.viewerService.interaction&&(this.viewerService.interaction=!1,this.viewerService.viewerDataService.slideInterval.angle&&this.viewerService.slideResume())},E)}mouseDown(){this.clicked||(this.clicked=!0),this.interactStart()}mouseUp(){this.clicked&&(this.clicked=!1),this.interactEnd()}mouseMove(){!this.viewerService.viewerDataService.canInteract||(this.interactStart(),this.clicked||this.interactEnd())}regWindowTouchEvents(){window.addEventListener("touchstart",()=>{this.mouseDown()},{passive:!0}),window.addEventListener("touchsmove",()=>{this.mouseMove()},{passive:!0})}}return _.\u0275fac=function(E){return new(E||_)(y.Y36(M.l),y.Y36(u.a),y.Y36(l.X))},_.\u0275cmp=y.Xpm({type:_,selectors:[["vwr-marzipano"]],viewQuery:function(E,C){if(1&E&&y.Gf(a,7,y.SBq),2&E){let z;y.iGM(z=y.CRH())&&(C.viewerElm=z.first)}},hostBindings:function(E,C){1&E&&y.NdJ("mousedown",function(){return C.onMouseDown()})("mouseup",function(){return C.onMouseUp()})("touchend",function(){return C.onMouseUp()})("mousemove",function(){return C.onMouseMove()})("keydown",function(B){return C.keyDown(B)},!1,y.Jf7)},decls:3,vars:1,consts:[["id","viewer"],["viewer",""],[3,"activeId",4,"ngIf"],[3,"activeId"]],template:function(E,C){1&E&&(y._UZ(0,"div",0,1),y.YNc(2,h,1,1,"vwr-arrows",2)),2&E&&(y.xp6(2),y.Q6J("ngIf",C.show_arrows))},dependencies:[c.O5,i.m],styles:["#viewer[_ngcontent-%COMP%]{height:100%}"]}),_})()},2709:(V,U,s)=>{"use strict";s.r(U),s.d(U,{MarzipanoModule:()=>c});var y=s(8692),M=s(5617),u=s(8550),l=s(4537);let c=(()=>{class i{}return i.\u0275fac=function(h){return new(h||i)},i.\u0275mod=l.oAB({type:i,bootstrap:[u.e]}),i.\u0275inj=l.cJS({providers:[M.l],imports:[y.ez]}),i})()},5617:(V,U,s)=>{"use strict";s.d(U,{l:()=>L});var y=s(8239),M=s(5775),u=s(6215),l=s(9911),c=s(7609),i=s(4395),a=s(4537);let h=(()=>{class R{constructor(w){this.zone=w,this.allowedEvents=["panoChange"],this.subscriptions={},this.allowedEvents.forEach(d=>{this.subscriptions[d]=[]}),window.fireAngularEvent=(d,T)=>{if(!this.subscriptions[d])throw new Error("Event has to be defined in the event list.");w.run(()=>{this.fireEvent(d,T)})},window.subscribeToAngularEvent=(d,T)=>{this.subscribe(d,T)}}subscribe(w,d){if(!this.subscriptions[w])throw new Error("Event has to be defined in the event list.");this.subscriptions[w].push(d)}fireEvent(w,d){if(!this.subscriptions[w])throw new Error("Event has to be defined in the event list.");this.subscriptions[w].forEach(T=>{T.apply(null,d)})}}return R.\u0275fac=function(w){return new(w||R)(a.LFG(a.R0b))},R.\u0275prov=a.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();var A=s(2001),_=s(2281),v=s(8692),E=s(7343),C=s(4445),z=s(6883),B=s(7267),D=s(5732);c.KeyControlMethod.prototype._handlePress=function(R){if(R.keyCode!==this._keyCode)return;let H=document.activeElement,w=document.getElementById("overlay");w!=H&&!w?.contains(H)||H&&-1!==["input","select","textarea"].indexOf(H.tagName.toLowerCase())||(this._pressing=!0,this._dynamics.velocity=this._velocity,this._dynamics.friction=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("active"))};var p=window||p;p.Marzipano=c;let L=(()=>{class R{constructor(w,d,T,S,I,O,Y,W,X){this.globalPubService=w,this.viewerService=d,this.content=T,this.location=S,this.panoService=I,this.hotspotService=O,this.controlService=Y,this.otherService=W,this.http=X,this.viewerReady=!1,this.scenes=[],this.scenes2=[],this.imgHost="https://img.gothru.org/",this.locationSubject=new M.xQ,this.changing_pano=!1,this.yaw=0,this.pitch=0,this.fov=this.panoService.fov||180,this.changing=!1,this.activePanoObs=new u.X(this.viewerService.viewerDataService.active),this.imgRes={full:"4096x2048",preview:"1024x512",thumb:"150x75"},this.gyroscope=!1,this.viewerService.viewerService=this}getFirstLoad(w){let d={panoId:this.panoService.first.pano.id,position:{theta:this.panoService.first.theta,phi:this.panoService.first.phi,fov:this.panoService.fov},thetaDetected:!1},T=l.v.paramsStringToObj(w);return T.p&&(d.panoId=T.p),T.h&&(d.position.theta=T.h,d.thetaDetected=!0),T.t&&(d.position.phi=T.t-90),T.room&&(this.panoService.callRoom=T.room),d}initViewer(w){this.viewer=new c.Viewer(w,{stage:{progressive:!0},controls:{scrollZoom:this.viewerService.viewerDataService.canScroll}}),this.viewer.__events.sceneChange.push(()=>{this.viewerReady=!0}),["aKey","dKey","leftArrowKey","rightArrowKey"].forEach(T=>{this.viewer.controls().enableMethod(T),this.viewer.controls().method(T).instance._velocity/=2}),this.locateControl(),this.angleControl(),this.panoControl(),this.gyroscopeInit();let d=this.getFirstLoad(this.panoService.moderationUrlOptions);setTimeout(()=>this.viewer._updateSizeListener()),this.loadPano(d.panoId).then(T=>{!T||(d.thetaDetected&&(d.position.theta-=T.north_angle),this.goToPano(d.panoId,d.position))})}_tileUrl(w,d,T,S,I,O,Y){let J,X=6144*Y/3;switch(w){case"f":J={x1:0*X,y1:0*X,x2:1*X,y2:1*X};break;case"b":J={x1:1*X,y1:0*X,x2:2*X,y2:1*X};break;case"u":J={x1:2*X,y1:0*X,x2:3*X,y2:1*X};break;case"d":J={x1:0*X,y1:1*X,x2:1*X,y2:2*X};break;case"l":J={x1:1*X,y1:1*X,x2:2*X,y2:2*X};break;case"r":J={x1:2*X,y1:1*X,x2:3*X,y2:2*X}}let et=X/Math.pow(2,d-1);return this.panoService.res_16k&&(O+="&pad=bg:000016"),`${I}?crop=${J.x1+et*(T-1)}x${J.y1+et*(S-1)}x${J.x1+et*T}x${J.y1+et*S}&resize=512x512&${O}`}source(w){let d=w.url.split("?"),T=d[0],S=parseInt(d[1].split(":")[1]),I=this.panoService.res_16k?2:1,O=`save=optimize,progressive,qual:${this.panoService.jpeg_quality}`;return new c.ImageUrlSource(Y=>{if(0===Y.z){var W="lfrbud".indexOf(Y.face)/6;return{url:`${this.imgHost}cube/${T.replace(".jpg",`_thumb_${S}.jpg`)}?${O}`,rect:{x:0,y:W,width:1,height:1/6}}}return{url:this._tileUrl(Y.face,Y.z,Y.x+1,Y.y+1,`${this.imgHost}cube/${T.replace(".jpg",`_${S}.jpg`)}`,O,I)}},{concurrency:10})}createCubeMapScene(w,d=!1){let T=this.source(w),S=[{tileSize:256,size:256,fallbackOnly:!0},{tileSize:512,size:512},{tileSize:512,size:1024},{tileSize:512,size:2048}];this.panoService.res_16k&&S.push({tileSize:512,size:4096});let I=new c.CubeGeometry(S),O={yaw:0*Math.PI/180,pitch:0*Math.PI/180,fov:this.fov*Math.PI/180},Y=c.RectilinearView.limit.traditional(8192,120*Math.PI/180),W=new c.RectilinearView(O,Y);return d?this.viewer2.createScene({source:T,geometry:I,view:W,pinFirstLevel:!0}):this.viewer.createScene({source:T,geometry:I,view:W,pinFirstLevel:!0})}loadScene(w,d=!1){if(d&&this.scenes2[w.id])return this.scenes2[w.id];if(this.scenes[w.id])return this.scenes[w.id];let T=this.createCubeMapScene(w,d);return d?this.scenes2[w.id]=T:this.scenes[w.id]=T,T}locateControl(){this.locationSubject.pipe((0,i.b)(100)).subscribe(()=>{const[w,d,T]=[this.viewerService.viewerDataService.active.id,this._angleCorrector(parseFloat(this.viewerService.viewerDataService.angle.toFixed(2))),this._angleCorrector(parseFloat((-1*this.pitch+90).toFixed(2)))];let S=`${w}p&${d}h&${T}t`;this.panoService.callRoom&&(S+="&room:"+this.panoService.callRoom),this.panoService.moderationUrl&&(S=`${this.panoService.moderationUrl}/${S}`),this.location.replaceState(S)})}_angleCorrector(w){return-14210854715202004e-30==w&&(w=0),w>=360&&(w%=360),w<0&&(w+=360),w}angleControl(){this.viewer.__events.viewChange.push(()=>{this.changing_pano?this.changing_pano=!1:(this.panoService.fov_lock&&this.viewer.scene().view().setFov(9e4*Math.PI/180),this.panoService.lock_pitch&&this.viewer.scene().view().setPitch(0),this.yaw=180*this.viewer.scene().view().yaw()/Math.PI,this.pitch=180*this.viewer.scene().view().pitch()/Math.PI,this.fov=180*this.viewer.scene().view().fov()/Math.PI,this.viewerService.viewerDataService.angle=this._angleCorrector(this.yaw+this.panoService.getPanoById(this.viewerService.viewerDataService.active.id).north_angle),this.viewerService.viewerDataService.editor||this.locationSubject.next())})}panoControl(){this.viewer.__events.sceneChange.push(()=>{this.globalPubService.fireEvent("panoChange",[this.viewerService.viewerDataService.active.id]),this.viewer._updateSizeListener();let w=this.panoService.getPanoById(this.viewerService.viewerDataService.active.id);if(this.activePanoObs.next(this.viewerService.viewerDataService.active),this.changing_pano=!0,this.viewer.scene().view().setYaw(this._angleCorrector(this.viewerService.viewerDataService.angle-w.north_angle)*Math.PI/180),this.viewer.scene().view().setPitch(this.pitch*Math.PI/180),this.viewer.scene().view().setFov(this.fov*Math.PI/180),this.loadPano(w.next_pano).then(T=>this.loadScene(T)),this.loadPano(w.prev_pano).then(T=>this.loadScene(T)),w.links.forEach(T=>{this.loadPano(T.id).then(S=>this.loadScene(S))}),this.hotspotControl(),1==this.viewerService.viewerDataService.slideInterval.angle&&!this.viewerService.interaction){var d=c.autorotate({yawSpeed:.1,targetPitch:0,targetFov:Math.PI/2});this.viewer.setIdleMovement(1e3,d),this.viewer.startMovement(d)}this.viewerService.viewerDataService.editor||this.locationSubject.next()})}_addAllHotspotsOfCurrentPano(){!this.content.hotspotsContainer||(this.content.hotspotsContainer.clear(),this.hotspotService.hotspots.filter(w=>w.pano.id==this.viewerService.viewerDataService.active.id).forEach(w=>{this.content.addHotspot(w.widget,w),w.pano_link?.pano?.id&&this.loadPano(w.pano_link.pano.id)}))}hotspotControl(){this.hotspotService.close(),this.removeHotspots(),this._addAllHotspotsOfCurrentPano()}addHotspot(w,d){let T=this.hotspotService.getHotspotById(w);if(!T||T.pano.id!=this.viewerService.viewerDataService.active.id)return;let S=this.hotspotService.doc.getElementById(T.id),I={yaw:this.viewer.scene().view().yaw(),pitch:this.viewer.scene().view().pitch()};T.position?I={yaw:T.position.theta*Math.PI/180,pitch:-1*T.position.phi*Math.PI/180}:T.position={theta:180*I.yaw/Math.PI,phi:-1*I.pitch*180/Math.PI,radius:1};let O={};return T.perspective&&(O={perspective:{radius:340}}),this.viewer.scene().hotspotContainer().createHotspot(S,I,O),T}removeHotspot(w){let d=this.viewer.scene().hotspotContainer().listHotspots().filter(S=>S.domElement().id==w).pop(),T=this.viewer.scene().hotspotContainer().listHotspots().indexOf(d);d&&this.viewer.scene().hotspotContainer().destroyHotspot(d),this.hotspotService.deleteHotspotById(w),-1!==T&&this.content.hotspotsContainer.remove(T)}removeHotspots(){this.viewer.scene().hotspotContainer().listHotspots().map(w=>{this.viewer.scene().hotspotContainer().destroyHotspot(w)})}ifSlidingPauseIt(){1==this.viewerService.viewerDataService.slideInterval.angle&&(this.viewer.setIdleMovement(1/0),this.viewer.stopMovement())}panoWalk(){if(!this.viewerService.viewerDataService.slideInterval.angle&&this.viewerService.interaction)return;let w=this.panoService.getPanoById(this.viewerService.viewerDataService.active.id);if(!w)return;let d=this.loadPano(w.next_pano),T=this.viewerService.viewerDataService.angle,S=this.viewerService.viewerDataService.angle-360;if(w.links.length){let X=[];w.links.forEach(tt=>{let et=Math.round((tt.angle+w.north_angle)%360),nt=Math.round((et-S)%360);nt>180&&(nt-=360),X.push(Math.abs(nt))});let J=w.links[X.indexOf(Math.min(...X))];T=Math.round((J.angle+w.north_angle)%360),d=this.loadPano(J.id)}let I=this._angleCorrector(T-w.north_angle);S=this.viewerService.viewerDataService.angle-(I+w.north_angle),S<0&&(S*=-1),S>180&&(S-=180);let W=S/10;W<6&&(W=6),this.viewer.lookTo({yaw:I*Math.PI/180,pitch:0*Math.PI/180},{transitionDuration:1e3*W},()=>{this.viewerService.viewerDataService.slideInterval.angle&&!this.viewerService.interaction&&d.then(X=>{this.goToPano(X.id),this.panoWalk()})})}slidePano(){if(this.viewer.scene().view().setFov(this.fov*Math.PI/180),this.viewerService.viewerDataService.slideInterval.angle=!0,!this.viewerService.interaction)if(this.controlService.control.tools&&this.controlService.control.tools.filter(w=>"slider"==w.key).pop().pano_walk)this.viewerService.viewerDataService.slideInterval.angle=2,this.panoWalk();else{let w={slide_speed:10,slide_toggle:5,slide_pano_change:!0},d=this.controlService.control?.tools?.find(S=>"slider"===S.key);d&&(w=d),this.viewerService.viewerDataService.slideInterval.angle=1,w.slide_pano_change&&(this.viewerService.viewerDataService.slideInterval.pano=setInterval(()=>{this.nextPano()},1e3*w.slide_toggle));let T=c.autorotate({yawSpeed:.1,targetPitch:0,targetFov:Math.PI/2});this.viewer.setIdleMovement(1e3,T),this.viewer.startMovement(T)}}slideStop(){this.viewerService.viewerDataService.slideInterval.pano&&clearInterval(this.viewerService.viewerDataService.slideInterval.pano),this.viewerService.viewerDataService.slideInterval.angle=0,this.viewerService.viewerDataService.slideInterval.pano=null,this.viewer.setIdleMovement(1/0),this.viewer.stopMovement()}slidePause(){this.viewerService.viewerDataService.slideInterval.pano&&clearInterval(this.viewerService.viewerDataService.slideInterval.pano),this.viewerService.viewerDataService.slideInterval.pano=null,this.viewer.setIdleMovement(1/0),this.viewer.stopMovement()}slideResume(){this.slidePano()}nextPano(){this.ifSlidingPauseIt();let T,w=this.panoService.getPanoById(this.viewerService.viewerDataService.active.id).next_pano,d=this.panoService.panoramas.filter(I=>I.id==w).pop();if(this.controlService.control.tools){var S=this.controlService.control.tools.filter(I=>"slider"===I.key).pop();S&&(T=S)}if(T.slide_pano_on_chosed){if(T.slide_pano_arr.length>0){let I=T.slide_pano_arr.filter(O=>O.pano.id==this.viewerService.viewerDataService.active.id).pop();if(I){let O=T.slide_pano_arr.indexOf(I);I=T.slide_pano_arr[O+1]?T.slide_pano_arr[O+1]:T.slide_pano_arr[0]}else I=T.slide_pano_arr[0];return void(I&&this.goToPano(I.pano.id))}}else if(!d)return void this.panoService.panoLoading[w].then(()=>{d=this.panoService.panoramas.filter(I=>I.id==w).pop(),this.goToPano(d.id)});this.goToPano(d.id)}previousPano(){this.ifSlidingPauseIt();let T,w=this.panoService.getPanoById(this.viewerService.viewerDataService.active.id).prev_pano,d=this.panoService.panoramas.filter(I=>I.id==w).pop();if(this.controlService.control.tools){var S=this.controlService.control.tools.filter(I=>"slider"===I.key).pop();S&&(T=S)}if(T.slide_pano_on_chosed){if(T.slide_pano_arr.length>0){let I=T.slide_pano_arr.filter(O=>O.pano.id==this.viewerService.viewerDataService.active.id).pop();if(I){let O=T.slide_pano_arr.indexOf(I);I=T.slide_pano_arr[O-1]?T.slide_pano_arr[O-1]:T.slide_pano_arr[T.slide_pano_arr.length-1]}else I=T.slide_pano_arr[T.slide_pano_arr.length-1];return void(I&&this.goToPano(I.pano.id))}}else if(!d)return void this.panoService.panoLoading[w].then(()=>{d=this.panoService.panoramas.filter(I=>I.id==w).pop(),this.goToPano(d.id)});this.goToPano(d.id)}hotspotMoveControlMousemove(w,d){w.preventDefault(),this.viewer._controlMethods.mouseViewDrag._startEvent=!1;let T=this.viewer.scene().hotspotContainer().listHotspots().filter(Y=>Y.domElement().id==d).pop(),S=180*T._coords.yaw/Math.PI+w.movementX/10,I=180*T._coords.pitch/Math.PI+w.movementY/10;T.setPosition({yaw:S*Math.PI/180,pitch:I*Math.PI/180}),S=this._angleCorrector(S);let O=this.hotspotService.getHotspotById(d);O.position.theta=S,O.position.phi=-1*I}panoramaUrl(w){return`/panorama/${this.panoService.user_id}/${this.panoService.folder_id}/${this.panoService.tour_id}/${w}`}loadPano(w){return this.panoService.panoLoading[w]||(this.panoService.panoLoading[w]=new Promise(d=>{let T=this.panoService.panoramas.filter(S=>S.id==w).pop();if(T)d(T);else try{this.http.get(this.panoramaUrl(w)).toPromise().then(S=>{if(S){let I=this.panoService.addPano(S,this.imgRes);I.hotspots?.map(O=>{this.hotspotService.getHotspotById(O.id)||(this.hotspotService.addHotspot(O),O.pano_link?.pano?.id&&!this.panoService.panoLoading[O.pano_link.pano.id]&&this.loadPano(O.pano_link.pano.id))}),d(I)}})}catch{}})),this.panoService.panoLoading[w]}changeActivePano(w,d,T){this.viewerService.viewerDataService.active.id!=w.id&&(this.viewerService.viewerDataService.prevActive=Object.assign({},this.viewerService.viewerDataService.active),this.viewerService.viewerDataService.active.id=w.id,this.viewerService.viewerDataService.active.t_id=w.moderation_id,this.loadScene(w).switchTo()),d&&this.viewer.lookTo({yaw:null!=d.theta?d.theta*Math.PI/180:this.viewer.scene().view().yaw(),pitch:null!=d.phi?-1*d.phi*Math.PI/180:this.viewer.scene().view().pitch(),fov:null!=d.fov?d.fov*Math.PI/180:this.viewer.scene().view().fov()},{transitionDuration:T?1e3:0})}goToPano(w,d,T){this.ifSlidingPauseIt();let S=this.panoService.getPanoById(w);S?this.changeActivePano(S,d,T):this.loadPano(w).then(I=>{!I||this.changeActivePano(I,d,T)})}gyroscopeEnable(){if(window.DeviceOrientationEvent){let w=window.DeviceOrientationEvent;"function"==typeof w.requestPermission?w.requestPermission().then(d=>{"granted"===d&&this.enableDeviceOrientation()}).catch(d=>{console.error(d)}):this.enableDeviceOrientation()}}gyroscopeDisable(){this.viewer.controls().disableMethod("deviceOrientation"),this.gyroscope=!1}enableDeviceOrientation(){var w=this.viewer.controls();this.deviceOrientationControlMethod.getPitch((d,T)=>{d||this.viewer.scene().view().setPitch(T)}),w.enableMethod("deviceOrientation"),this.gyroscope=!0}gyroscopeInit(){var w=this;return(0,y.Z)(function*(){let d=yield s(1148).z;w.deviceOrientationControlMethod=new d,w.viewer.controls().registerMethod("deviceOrientation",w.deviceOrientationControlMethod)})()}gyroscopeToggle(){this.gyroscope?this.gyroscopeDisable():this.gyroscopeEnable()}}return R.\u0275fac=function(w){return new(w||R)(a.LFG(h),a.LFG(A.a),a.LFG(_.x),a.LFG(v.Ye),a.LFG(E.X),a.LFG(C.N),a.LFG(z.B),a.LFG(B.m),a.LFG(D.eN))},R.\u0275prov=a.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})()},8239:(V,U,s)=>{"use strict";function y(u,l,c,i,a,h,A){try{var _=u[h](A),v=_.value}catch(E){return void c(E)}_.done?l(v):Promise.resolve(v).then(i,a)}function M(u){return function(){var l=this,c=arguments;return new Promise(function(i,a){var h=u.apply(l,c);function A(v){y(h,i,a,A,_,"next",v)}function _(v){y(h,i,a,A,_,"throw",v)}A(void 0)})}}s.d(U,{Z:()=>M})}}]);