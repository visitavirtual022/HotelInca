"use strict";(self.webpackChunktourmkr_download=self.webpackChunktourmkr_download||[]).push([[694],{7072:(_,c,t)=>{t.d(c,{o:()=>i});var a=t(8692),p=t(4537),h=t(4091),r=t(6101),m=t(7343),u=t(7493);class i{constructor(o){if(this.injector=o,this.isMobile=!1,this.observableFunc={},this.elRef=this.injector.get(p.SBq),this.i18n=this.injector.get(r.T),this.fontsService=this.injector.get(h.C),this.panoService=this.injector.get(m.X),this.statsService=this.injector.get(u.G),(0,a.NF)(this.panoService.platformId)){const e=navigator.userAgent.toLowerCase();this.isMobile=-1!==e.indexOf("mobile")||-1!==e.indexOf("android")}}_updateFontStyle(o,e){!o||Object.keys(e).filter(n=>["family","align","size","line_height"].includes(n)).forEach(n=>{o[n]||(o[n]=e[n])})}setFontStyle(o,e){this.fontsService.setFontStyle(this.elRef,o,e)}setStyleProperties(o){Object.entries(o).forEach(e=>{this.elRef.nativeElement.style.setProperty(e[0],e[1])})}}},7493:(_,c,t)=>{t.d(c,{G:()=>i});var a=t(4537),p=t(8692),h=t(5732),r=t(8066),m=t(5056),u=t(7343);let i=(()=>{class s{constructor(e,n,l,d,v){this.http=e,this.windowRef=n,this.viewerDataService=l,this.panoService=d,this.platformId=v,this.session_id=""}send(e){if((0,p.PM)(this.platformId)||this.viewerDataService.editor||!this.panoService.moderationUrl)return;this.session_id||(this.session_id=window.crypto.randomUUID());let n=this._getStats();0!=n.host.indexOf("localhost")&&(null!=e.type&&(n.type=e.type),null!=e.plugin&&(n.plugin=e.plugin),null!=e.details&&(n.details=e.details),this.http.post("https://apiw.gothru.co/tours/stats",n).subscribe())}getWidget(e){let l=[{name:"Berlin Menu",component:"MenuHopenkeComponent"},{name:"Side Menu",component:"MenuKavftigComponent"},{name:"Top Menu",component:"MenuLekprogComponent"},{name:"Real Estate Menu",component:"MenuLoppitteComponent"},{name:"Berlin Map",component:"SchemeHopenkeComponent"},{name:"Floor Map",component:"SchemeKavftigComponent"},{name:"Mapbox",component:"SchemeGvesjodComponent"},{name:"Berlin Hotspot",component:"HotspotHopenkeComponent"},{name:"Hotspot",component:"HotspotKavftigComponent"},{name:"Pano link",component:"HotspotHolmlackComponent"},{name:"Berlin Control",component:"ControlHopenkeComponent"},{name:"Control Bar",component:"ControlKavftigComponent"},{name:"Real Estate Control",component:"ControlLoppitteComponent"},{name:"Carousel",component:"OtherCarouselComponent"},{name:"Language",component:"OtherLanguageComponent"},{name:"Logo",component:"OtherLogoComponent"},{name:"Code",component:"OtherCodeComponent"},{name:"Password",component:"OtherPasswordComponent"},{name:"Pano Label",component:"OtherTitleComponent"}].filter(d=>d.component==e).pop();return l?{name:l.name,key:l.name.toLowerCase().replace(" ","_")}:{name:"",key:""}}_getStats(){let e={ip:null,action:null,returning:null,user_type:null,time:null,m_key:null,user_id:this.panoService.user_id,session_id:this.session_id,browser:this.windowRef.nativeWindow.navigator.userAgent,height:this.windowRef.nativeWindow.innerHeight,language:this.windowRef.nativeWindow.navigator.language,location:this.windowRef.nativeWindow.location.href,moderation_id:this.viewerDataService.active.t_id,pano_id:this.viewerDataService.active.id,referer:document.referrer,site:this.panoService.moderationUrl.substr(2),local_time:Math.floor(Date.now()/1e3),width:this.windowRef.nativeWindow.innerWidth,device:null,host:null,tour_type:null,plugin:null,type:null,details:null};return this.panoService.googleApiKey&&(e.m_key=this.panoService.googleApiKey),e.device=this.windowRef.nativeWindow.innerWidth<600?"mobile":this.windowRef.nativeWindow.innerWidth>=600&&this.windowRef.nativeWindow.innerWidth<1e3?"tablet":"desktop",e.host=e.location.split("/")[2],e.tour_type=0==this.panoService.moderationUrl.indexOf("G")?"google":"hosted",e}}return s.\u0275fac=function(e){return new(e||s)(a.LFG(h.eN),a.LFG(r.X),a.LFG(m.m),a.LFG(u.X),a.LFG(a.Lbi))},s.\u0275prov=a.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},8313:(_,c,t)=>{t.r(c),t.d(c,{OtherCodeModule:()=>u});var a=t(8692),p=t(8041);const h=JSON.parse('{"widget":"OtherCodeComponent","options":[{"key":"code","label":"Head append","type":"htmlmixed","help":"Additional code which will be in head tag","value":""},{"key":"code2","label":"Body append","type":"htmlmixed","help":"Additional code which will be in body tag","value":""}]}');var r=t(4537);let m=(()=>{class i extends p.P{constructor(o,e){super(o),this.doc=e,this.default_options=h}_appendToElmStringHtml(o,e){let n=this.doc.createElement("div");n.innerHTML=e.trim(),Array.from(n.children).forEach(l=>{if(l.setAttribute("data-widget",this.widgetName),"SCRIPT"===l.tagName&&(0,a.NF)(this.panoService.platformId)){let d=document.createElement("script");d.setAttribute("data-widget",this.widgetName);let v=this.doc.createTextNode(l.innerHTML);d.appendChild(v),o.appendChild(d)}else o.appendChild(l)})}initData(){super.initData(),!this.doc.querySelector(`[data-widget="${this.widgetName}"]`)&&(this.options.code.value.trim()&&this._appendToElmStringHtml(this.doc.head,this.options.code.value),this.options.code2.value.trim()&&this._appendToElmStringHtml(this.doc.body,this.options.code2.value))}}return i.\u0275fac=function(o){return new(o||i)(r.Y36(r.zs3),r.Y36(a.K0))},i.\u0275cmp=r.Xpm({type:i,selectors:[["wdg-other-code"]],features:[r.qOj],decls:0,vars:0,template:function(o,e){},encapsulation:2}),i})(),u=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=r.oAB({type:i,bootstrap:[m]}),i.\u0275inj=r.cJS({}),i})()}}]);