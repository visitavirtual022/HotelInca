"use strict";(self.webpackChunktourmkr_download=self.webpackChunktourmkr_download||[]).push([[788],{2788:(Z,p,a)=>{a.r(p),a.d(p,{SchemeVarderaModule:()=>T});var g=a(8692),l=a(2288),h=a(9638),_=a(4507),u=a(6031),v=a(384),C=a(5573);const f=JSON.parse('{"widget":"SchemeVarderaComponent","styles":"","common_color":false,"background":{"type":"native","color":"rgb(255, 255, 255)"},"active_color":{"type":"native","color":"rgb(219, 106, 0)"},"text_color":{"color":"rgb(255, 255, 255)"},"image":"","margin":0,"border_size":15,"dots":[],"dot_size":22}');var e=a(4537),M=a(5998),x=a(354),O=a(6369),P=a(7239);const k=["map"];function z(n,i){if(1&n&&(e._UZ(0,"code",2),e.ALo(1,"safe")),2&n){const t=e.oxw();e.Q6J("innerHTML",e.xi3(1,1,t.styles,"html"),e.oJD)}}function b(n,i){if(1&n&&e._UZ(0,"div",10),2&n){const t=i.$implicit;e.Udp("left",t.pos.x,"%")("top",t.pos.y,"%")}}function y(n,i){if(1&n&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Oqu(o.i18n.t(t.name))}}function w(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",11),e.NdJ("click",function(r){const d=e.CHM(t),c=d.$implicit,s=d.index,m=e.oxw(2);return e.KtG(m.markerClick(r,c,s))})("mouseleave",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.markerClickOut())})("cdkDragStarted",function(r){const c=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.onDragStart(r,c))})("cdkDragMoved",function(r){const c=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.onDragMoved(r,c))})("cdkDragEnded",function(r){const c=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.onDragEnd(r,c.pos))}),e.TgZ(1,"div",12),e._UZ(2,"img",13),e.qZA(),e.YNc(3,y,2,1,"div",14),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw(2);e.Udp("left",t.pos.x,"%")("top",t.pos.y,"%"),e.Q6J("cdkDragDisabled",!o.editorMode),e.xp6(2),e.Q6J("src",o.getImg(t),e.LSH),e.xp6(1),e.Q6J("ngIf",o.i18n.t(t.name))}}function S(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"button",4),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.toggle())}),e._UZ(2,"sh-icon",5),e.qZA(),e.TgZ(3,"sh-drag-zoom",6,7),e.YNc(5,b,1,4,"div",8),e.YNc(6,w,4,7,"div",9),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("icon",t.icons[0]),e.xp6(1),e.Q6J("imgSrc",t.scheme.image),e.xp6(2),e.Q6J("ngForOf",t.scheme.dots),e.xp6(1),e.Q6J("ngForOf",t.scheme.dots)}}let D=(()=>{class n extends C.G{constructor(t,o){super(t),this.injector=t,this.meta=o,this.default_options=f,this.icons=[{prefix:"far",iconName:"xmark-large",icon:[448,512,[],"e59b","M224 222.1L407 39.03C416.4 29.66 431.6 29.66 440.1 39.03C450.3 48.4 450.3 63.6 440.1 72.97L257.9 256L440.1 439C450.3 448.4 450.3 463.6 440.1 472.1C431.6 482.3 416.4 482.3 407 472.1L224 289.9L40.97 472.1C31.6 482.3 16.4 482.3 7.029 472.1C-2.343 463.6-2.343 448.4 7.029 439L190.1 256L7.029 72.97C-2.343 63.6-2.343 48.4 7.029 39.03C16.4 29.66 31.6 29.66 40.97 39.03L224 222.1z"]}]}addStylesheetToHead(t){this.meta.addTag({rel:"preload",as:"image",href:t})}onDragStart(t,o){!this.dragZoom||(this.dragZoom.disableDragging=!0,t.source.element.nativeElement.style.display="none",this.onDragMarker=t.source.element.nativeElement.parentNode.querySelectorAll(".marker")[o])}onDragMoved(t,o){this.onDragMarker.style.transform=`translate3d(calc(-50% + ${t.distance.x}px),calc(-50% + ${t.distance.y}px),0)`}onDragEnd(t,o){!this.dragZoom||(setTimeout(()=>{this.dragZoom.disableDragging=!1}),t.source.element.nativeElement.style.display="block",this.onDragMarker.style.transform="",t.source.reset(),o.x+=parseFloat((100*t.distance.x/this.dragZoom.params.width).toFixed(2)),o.y+=parseFloat((100*t.distance.y/this.dragZoom.params.height).toFixed(2)))}getImg(t){if(!t||!t.pano)return"";let o=t.pano.id,r=this.panoService.getPanoById(o)?.url;if(!r)return"";let d=r.split("?")[0],c=parseInt(r.split("?")[1].replace("pad=bg:","")),s=Math.round(t.theta||0);return`https://img.gothru.org/pano_zoom.php?p=${o}&i=${d}&w=96&h=96&a=40&t=${Math.round(t.phi||0)}&y=${s}&v=${c}`}onMarginChange(t){super.onMarginChange(t),this.dragZoom?.updateParams()}onBorderSizeChange(t){super.onBorderSizeChange(t),this.dragZoom?.updateParams()}markerClick(t,o,r){this.dragZoom.disableDragging||("touch"!==t.pointerType||this.markerPopupIndex==r?(this.viewerService.goToPano(o.pano.id,{theta:o.theta,phi:o.phi}),this.toggle()):(this.dragZoom?.setPosition(o.pos),this.markerPopupIndex=r))}markerClickOut(){this.markerPopupIndex=void 0}ngOnInit(){this.initData(),this.addStylesheetToHead(this.scheme.image),(new Image).src=this.scheme.image}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(M.h_))},n.\u0275cmp=e.Xpm({type:n,selectors:[["wdg-scheme-vardera"]],viewQuery:function(t,o){if(1&t&&e.Gf(k,5),2&t){let r;e.iGM(r=e.CRH())&&(o.dragZoom=r.first)}},features:[e.qOj],decls:2,vars:2,consts:[[3,"innerHTML",4,"ngIf"],["class","widget scheme scheme-vardera",4,"ngIf"],[3,"innerHTML"],[1,"widget","scheme","scheme-vardera"],["mat-button","","aria-label","Close map",1,"close",3,"click"],[3,"icon"],[3,"imgSrc"],["map",""],["class","marker",3,"left","top",4,"ngFor","ngForOf"],["class","marker-popup","cdkDrag","","cdkDragBoundary",".content",3,"left","top","cdkDragDisabled","click","mouseleave","cdkDragStarted","cdkDragMoved","cdkDragEnded",4,"ngFor","ngForOf"],[1,"marker"],["cdkDrag","","cdkDragBoundary",".content",1,"marker-popup",3,"cdkDragDisabled","click","mouseleave","cdkDragStarted","cdkDragMoved","cdkDragEnded"],[1,"img-wrapper"],["alt","panorama",3,"src"],["class","name",4,"ngIf"],[1,"name"]],template:function(t,o){1&t&&(e.YNc(0,z,2,4,"code",0),e.YNc(1,S,7,4,"div",1)),2&t&&(e.Q6J("ngIf",o.styles),e.xp6(1),e.Q6J("ngIf",o.scheme&&o.show))},dependencies:[g.sg,g.O5,l.Zt,h.lW,x.o,O.H,P.y],styles:['.scheme-vardera[_ngcontent-%COMP%]{position:absolute;background:var(--background);color:var(--text-color);z-index:11;width:calc(100% - var(--margin) * 2);height:calc(100% - var(--margin) * 2);margin:var(--margin);padding:var(--padding);box-sizing:border-box}.close[_ngcontent-%COMP%]{--close-button-size: 50px;--close-button-icon-size: 30px;position:absolute;top:var(--padding);right:var(--padding);z-index:2;width:var(--close-button-size);height:var(--close-button-size);display:flex;justify-content:center;align-items:center;color:var(--text-color)}.close[_ngcontent-%COMP%]   sh-icon[_ngcontent-%COMP%]{width:var(--close-button-icon-size);height:var(--close-button-icon-size)}sh-drag-zoom[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%], sh-drag-zoom[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]:before, sh-drag-zoom[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]:after{position:absolute;transform:translate(-50%,-50%);border-radius:50%;border:calc(var(--dot-size) / 10) solid var(--active-color);box-sizing:border-box}sh-drag-zoom[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]{width:var(--dot-size);height:var(--dot-size);border-width:calc(var(--dot-size) / 4);background-color:var(--text-color);pointer-events:none}sh-drag-zoom[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]:hover{cursor:pointer}sh-drag-zoom[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]:before, sh-drag-zoom[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;border-radius:50%;z-index:1}sh-drag-zoom[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]:before{width:calc(var(--dot-size) * 1.5);height:calc(var(--dot-size) * 1.5);opacity:.8}sh-drag-zoom[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]:after{width:calc(var(--dot-size) * 2);height:calc(var(--dot-size) * 2);opacity:.6}sh-drag-zoom[_ngcontent-%COMP%]   .marker-popup[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-50%);width:calc(var(--dot-size) * 2);height:calc(var(--dot-size) * 2);border-radius:50%}sh-drag-zoom[_ngcontent-%COMP%]   .marker-popup[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%], sh-drag-zoom[_ngcontent-%COMP%]   .marker-popup[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]:before{position:absolute;top:50%;left:50%;border-radius:50%;transform:translate(-50%,-50%);border:0px solid var(--active-color);box-sizing:border-box}sh-drag-zoom[_ngcontent-%COMP%]   .marker-popup[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]{width:calc(var(--dot-size) * 4.36);height:calc(var(--dot-size) * 4.36);border-width:calc(var(--dot-size) * .3);line-height:0;transition:all .3s ease;transform:translate(-50%,-50%) scale(0);opacity:0;z-index:2}sh-drag-zoom[_ngcontent-%COMP%]   .marker-popup[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]:before{content:"";width:calc(var(--dot-size) * 5.1);height:calc(var(--dot-size) * 5.1);border-width:calc(var(--dot-size) * .15)}sh-drag-zoom[_ngcontent-%COMP%]   .marker-popup[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:inherit}sh-drag-zoom[_ngcontent-%COMP%]   .marker-popup[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;display:inline-block;line-height:16px;height:-moz-fit-content;height:fit-content;opacity:0;left:50%;top:50%;transform-origin:left center;transform:rotate(35deg) translate(-50px,-50%) scale(.6);border-radius:100px;background-color:var(--active-color);padding:12px 26px;transition:opacity .3s,transform .3s;white-space:nowrap;pointer-events:none}sh-drag-zoom[_ngcontent-%COMP%]   .marker-popup[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:100%;height:100%;padding:3px;border-radius:100px;transform:translate(-50%,-50%);border:2px solid var(--active-color)}sh-drag-zoom[_ngcontent-%COMP%]   .marker-popup[_ngcontent-%COMP%]:hover{cursor:pointer}sh-drag-zoom[_ngcontent-%COMP%]   .marker-popup[_ngcontent-%COMP%]:hover   .img-wrapper[_ngcontent-%COMP%]{opacity:1;transform:translate(-50%,-50%) scale(1)}sh-drag-zoom[_ngcontent-%COMP%]   .marker-popup[_ngcontent-%COMP%]:hover   .name[_ngcontent-%COMP%]{opacity:1;transform:rotate(0) translate(calc(var(--dot-size) * 3),-50%) scale(1)}@media screen and (max-width: 767px){sh-drag-zoom[_ngcontent-%COMP%]   .marker-popup[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{transform-origin:center;transform:translate(-50%,-50%) scale(.6)}sh-drag-zoom[_ngcontent-%COMP%]   .marker-popup[_ngcontent-%COMP%]:hover   .name[_ngcontent-%COMP%]{transform:translate(-50%,calc(-100% + var(--dot-size) * -3)) scale(1)}}code[_ngcontent-%COMP%]{display:none}']}),n})(),T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n,bootstrap:[D]}),n.\u0275inj=e.cJS({imports:[g.ez,l._t,h.ot,_.D,u.Q,v.a]}),n})()}}]);