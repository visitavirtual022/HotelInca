"use strict";(self.webpackChunktourmkr_download=self.webpackChunktourmkr_download||[]).push([[749],{7072:(_,p,n)=>{n.d(p,{o:()=>h});var r=n(8692),d=n(4537),a=n(4091),l=n(6101),u=n(7343),e=n(7493);class h{constructor(c){if(this.injector=c,this.isMobile=!1,this.observableFunc={},this.elRef=this.injector.get(d.SBq),this.i18n=this.injector.get(l.T),this.fontsService=this.injector.get(a.C),this.panoService=this.injector.get(u.X),this.statsService=this.injector.get(e.G),(0,r.NF)(this.panoService.platformId)){const t=navigator.userAgent.toLowerCase();this.isMobile=-1!==t.indexOf("mobile")||-1!==t.indexOf("android")}}_updateFontStyle(c,t){!c||Object.keys(t).filter(s=>["family","align","size","line_height"].includes(s)).forEach(s=>{c[s]||(c[s]=t[s])})}setFontStyle(c,t){this.fontsService.setFontStyle(this.elRef,c,t)}setStyleProperties(c){Object.entries(c).forEach(t=>{this.elRef.nativeElement.style.setProperty(t[0],t[1])})}}},4507:(_,p,n)=>{n.d(p,{D:()=>d});var r=n(4537);let d=(()=>{class a{}return a.\u0275fac=function(u){return new(u||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({}),a})()},7239:(_,p,n)=>{n.d(p,{y:()=>a});var r=n(4537),d=n(5998);let a=(()=>{class l{constructor(e){this.sanitizer=e}transform(e,h){switch(h){case"html":return this.sanitizer.bypassSecurityTrustHtml(e);case"style":return this.sanitizer.bypassSecurityTrustStyle(e);case"script":return this.sanitizer.bypassSecurityTrustScript(e);case"url":return this.sanitizer.bypassSecurityTrustUrl(e);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(e);default:throw new Error(`Invalid safe type specified: ${h}`)}}}return l.\u0275fac=function(e){return new(e||l)(r.Y36(d.H7,16))},l.\u0275pipe=r.Yjl({name:"safe",type:l,pure:!0}),l})()},7493:(_,p,n)=>{n.d(p,{G:()=>h});var r=n(4537),d=n(8692),a=n(5732),l=n(8066),u=n(5056),e=n(7343);let h=(()=>{class m{constructor(t,s,v,i,g){this.http=t,this.windowRef=s,this.viewerDataService=v,this.panoService=i,this.platformId=g,this.session_id=""}send(t){if((0,d.PM)(this.platformId)||this.viewerDataService.editor||!this.panoService.moderationUrl)return;this.session_id||(this.session_id=window.crypto.randomUUID());let s=this._getStats();0!=s.host.indexOf("localhost")&&(null!=t.type&&(s.type=t.type),null!=t.plugin&&(s.plugin=t.plugin),null!=t.details&&(s.details=t.details),this.http.post("https://apiw.gothru.co/tours/stats",s).subscribe())}getWidget(t){let v=[{name:"Berlin Menu",component:"MenuHopenkeComponent"},{name:"Side Menu",component:"MenuKavftigComponent"},{name:"Top Menu",component:"MenuLekprogComponent"},{name:"Real Estate Menu",component:"MenuLoppitteComponent"},{name:"Berlin Map",component:"SchemeHopenkeComponent"},{name:"Floor Map",component:"SchemeKavftigComponent"},{name:"Mapbox",component:"SchemeGvesjodComponent"},{name:"Berlin Hotspot",component:"HotspotHopenkeComponent"},{name:"Hotspot",component:"HotspotKavftigComponent"},{name:"Pano link",component:"HotspotHolmlackComponent"},{name:"Berlin Control",component:"ControlHopenkeComponent"},{name:"Control Bar",component:"ControlKavftigComponent"},{name:"Real Estate Control",component:"ControlLoppitteComponent"},{name:"Carousel",component:"OtherCarouselComponent"},{name:"Language",component:"OtherLanguageComponent"},{name:"Logo",component:"OtherLogoComponent"},{name:"Code",component:"OtherCodeComponent"},{name:"Password",component:"OtherPasswordComponent"},{name:"Pano Label",component:"OtherTitleComponent"}].filter(i=>i.component==t).pop();return v?{name:v.name,key:v.name.toLowerCase().replace(" ","_")}:{name:"",key:""}}_getStats(){let t={ip:null,action:null,returning:null,user_type:null,time:null,m_key:null,user_id:this.panoService.user_id,session_id:this.session_id,browser:this.windowRef.nativeWindow.navigator.userAgent,height:this.windowRef.nativeWindow.innerHeight,language:this.windowRef.nativeWindow.navigator.language,location:this.windowRef.nativeWindow.location.href,moderation_id:this.viewerDataService.active.t_id,pano_id:this.viewerDataService.active.id,referer:document.referrer,site:this.panoService.moderationUrl.substr(2),local_time:Math.floor(Date.now()/1e3),width:this.windowRef.nativeWindow.innerWidth,device:null,host:null,tour_type:null,plugin:null,type:null,details:null};return this.panoService.googleApiKey&&(t.m_key=this.panoService.googleApiKey),t.device=this.windowRef.nativeWindow.innerWidth<600?"mobile":this.windowRef.nativeWindow.innerWidth>=600&&this.windowRef.nativeWindow.innerWidth<1e3?"tablet":"desktop",t.host=t.location.split("/")[2],t.tour_type=0==this.panoService.moderationUrl.indexOf("G")?"google":"hosted",t}}return m.\u0275fac=function(t){return new(t||m)(r.LFG(a.eN),r.LFG(l.X),r.LFG(u.m),r.LFG(e.X),r.LFG(r.Lbi))},m.\u0275prov=r.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},2198:(_,p,n)=>{n.r(p),n.d(p,{OtherSequenceModule:()=>v});var r=n(8692),d=n(4507),a=n(9911),l=n(8041);const u=JSON.parse('{"widget":"OtherSequenceComponent","options":[{"key":"area","label":"Area","areas":["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"],"type":"area","category":"appearance","value":"top-left"},{"key":"size","label":"Size","type":"slider","category":"appearance","help":"px","value":28},{"key":"margin","label":"Margin","type":"slider","category":"appearance","help":"px","value":0},{"key":"colors","type":"color-bundle","category":"colors","value":{"common_color":false,"background":{"type":"native","color":"rgba(0,0,0,0.5)"},"text_color":{"color":"rgb(255,255,255)"}}},{"key":"styles","label":"Styles","type":"css","category":"styles","value":""}]}');var e=n(4537),h=n(2001),m=n(7239);function c(i,g){if(1&i&&(e._UZ(0,"code",2),e.ALo(1,"safe")),2&i){const o=e.oxw();e.Q6J("innerHTML",e.xi3(1,1,o.styles,"html"),e.oJD)}}function t(i,g){if(1&i&&(e.TgZ(0,"div",3),e._uU(1),e.qZA()),2&i){const o=e.oxw();e.Q6J("ngClass",o.options.area.value),e.xp6(1),e.hij(" ",o.sequence,"\n")}}let s=(()=>{class i extends l.P{constructor(o,f){super(o),this.viewerService=f,this.default_options=u}addObservableFunc(){this.observableFunc.size=o=>{this.onSizeChange(o)},this.observableFunc.margin=o=>{this.onMarginChange(o)}}onSizeChange(o){this.elRef.nativeElement.style.setProperty("--size",o+"px")}onMarginChange(o){this.elRef.nativeElement.style.setProperty("--margin",o+"px")}ngOnDestroy(){this.activePanoChangeSubscription?.unsubscribe()}initData(){(0,r.NF)(this.panoService.platformId)&&a.v.waitUntil(()=>void 0!==this.viewerService.activePanoObs).then(()=>{this.activePanoChangeSubscription=this.viewerService.activePanoObs.subscribe(o=>{this.sequence=this.panoService.getPanoById(o.id)?.sequence})}),this.addObservableFunc(),super.initData()}}return i.\u0275fac=function(o){return new(o||i)(e.Y36(e.zs3),e.Y36(h.a))},i.\u0275cmp=e.Xpm({type:i,selectors:[["wdg-other-sequence"]],features:[e.qOj],decls:2,vars:2,consts:[[3,"innerHTML",4,"ngIf"],["class","widget other",3,"ngClass",4,"ngIf"],[3,"innerHTML"],[1,"widget","other",3,"ngClass"]],template:function(o,f){1&o&&(e.YNc(0,c,2,4,"code",0),e.YNc(1,t,2,2,"div",1)),2&o&&(e.Q6J("ngIf",f.styles),e.xp6(1),e.Q6J("ngIf",f.widgetInit&&f.widget&&void 0!==f.sequence))},dependencies:[r.mk,r.O5,m.y],styles:[".widget[_ngcontent-%COMP%]{position:absolute;z-index:1;display:inline-flex;overflow:hidden;flex-direction:row;font-size:var(--size);padding:5px 20px;margin:var(--margin);color:var(--text-color);background:var(--background)}.widget.bottom[_ngcontent-%COMP%], .widget.top[_ngcontent-%COMP%]{left:50%;transform:translate(-50%);margin-left:initial;margin-right:initial}.widget.left[_ngcontent-%COMP%], .widget.right[_ngcontent-%COMP%]{top:50%;transform:translateY(-50%);margin-top:initial;margin-bottom:initial}.widget.top[_ngcontent-%COMP%], .widget.top-left[_ngcontent-%COMP%], .widget.top-right[_ngcontent-%COMP%]{top:0}.widget.bottom[_ngcontent-%COMP%], .widget.bottom-left[_ngcontent-%COMP%], .widget.bottom-right[_ngcontent-%COMP%]{bottom:0}.widget.bottom-right[_ngcontent-%COMP%], .widget.right[_ngcontent-%COMP%], .widget.top-right[_ngcontent-%COMP%]{right:0}.widget.bottom-left[_ngcontent-%COMP%], .widget.left[_ngcontent-%COMP%], .widget.top-left[_ngcontent-%COMP%]{left:0}"]}),i})(),v=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i,bootstrap:[s]}),i.\u0275inj=e.cJS({imports:[r.ez,d.D]}),i})()}}]);