"use strict";(self.webpackChunktourmkr_download=self.webpackChunktourmkr_download||[]).push([[569],{354:(g,f,a)=>{a.d(f,{o:()=>_});var m=a(8692),s=a(4537);const h=function(l,p,o,c,u,v,t,e,n){return{"--animation-name":l,"--animation-delay":p,"--animation-direction":o,"--animation-duration":c,"--animation-timing":u,"--animation-beat_scale":v,"--animation-fade_opacity":t,"--animation-flip_x":e,"--animation-flip_y":n}};function r(l,p){if(1&l&&(s.O4$(),s.TgZ(0,"svg",1),s._UZ(1,"path",2),s.qZA()),2&l){const o=s.oxw();s.Akn(o.icon.animation?s.rFY(6,h,["icon-"+o.icon.animation.name,o.icon.animation.delay+"s",o.icon.animation.direction,o.icon.animation.duration+"s",o.icon.animation.timing,o.icon.animation.beat_scale,o.icon.animation.fade_opacity,o.icon.animation.flip_x,o.icon.animation.flip_y]):null),s.uIk("data-prefix",o.icon.prefix)("data-icon",o.icon.iconName)("viewBox","0 0 "+o.icon.icon[0]+" "+o.icon.icon[1]),s.xp6(1),s.uIk("d",o.icon.icon[4])}}let _=(()=>{class l{constructor(o,c){this.elRef=o,this.platformId=c}iconTransform(){!(0,m.NF)(this.platformId)||this.elRef.nativeElement.style.setProperty("--transform",this.icon&&this.icon.icon&&this.icon.icon[0]!=this.icon.icon[1]&&this.icon.icon[0]/this.icon.icon[1]>.8?"scale("+this.icon.icon[0]/this.icon.icon[1]+")":null)}ngOnInit(){this.iconTransform()}ngOnChanges(o){void 0!==o.icon&&this.iconTransform()}}return l.\u0275fac=function(o){return new(o||l)(s.Y36(s.SBq),s.Y36(s.Lbi))},l.\u0275cmp=s.Xpm({type:l,selectors:[["sh-icon"]],inputs:{icon:"icon"},features:[s.TTD],decls:1,vars:1,consts:[["role","img","aria-hidden","true","focusable","false","xmlns","http://www.w3.org/2000/svg",3,"style",4,"ngIf"],["role","img","aria-hidden","true","focusable","false","xmlns","http://www.w3.org/2000/svg"],["fill","currentColor"]],template:function(o,c){1&o&&s.YNc(0,r,2,16,"svg",0),2&o&&s.Q6J("ngIf",c.icon&&c.icon.icon)},dependencies:[m.O5],styles:["[_nghost-%COMP%]{width:14px;height:14px;display:inline-block;line-height:0;transform:var(--transform)}svg[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:100%;height:100%;animation-name:var(--animation-name);animation-delay:var(--animation-delay);animation-direction:var(--animation-direction);animation-duration:var(--animation-duration);animation-iteration-count:var(--animation-iteration-count, infinite);animation-timing-function:var(--animation-timing)}"]}),l})()},6031:(g,f,a)=>{a.d(f,{Q:()=>h});var m=a(8692),s=a(4537);let h=(()=>{class r{}return r.\u0275fac=function(l){return new(l||r)},r.\u0275mod=s.oAB({type:r}),r.\u0275inj=s.cJS({imports:[m.ez]}),r})()},5735:(g,f,a)=>{a.d(f,{M:()=>c});var m=a(7072),s=a(8692),h=a(9911),r=a(4537),_=a(9321),l=a(2001),p=a(4445),o=a(8066);let c=(()=>{class u extends m.o{constructor(t,e,n,d,y){super(t),this.injector=t,this.menuService=e,this.viewerService=n,this.hotspotService=d,this.windowRef=y,this.data=null,this.default_options=null,this.widgetInit=!1,this.menu=null,this.editorMode=!1,this.icons=[],this.observableFunc={background:i=>this.onBackgroundChange(i),active_color:i=>this.onActiveColorChange(i),text_color:i=>this.onTextColorChange(i),common_color:i=>this.onCommonColorChange(i),common_background:i=>this.onCommonBackgroundChange(i),common_active_color:i=>this.onCommonActiveColorChange(i),common_text_color:i=>this.onCommonTextColorChange(i),border_radius:i=>this.onBorderRadiusChange(i),width:i=>this.onWidthChange(i),margin:i=>this.onMarginChange(i),opacity:i=>this.onOpacityChange(i),hide_on_start:i=>this.onHideOnStarChange(i),title_font:i=>this.onTitleFontChange(i),contact_title_font:i=>this.onContactTitleFontChange(i),contact1_font:i=>this.onContactFontChange(i),address1_font:i=>this.onAddressFontChange(i),pano_title_font:i=>this.onPanoTitleFontChange(i),panos_font:i=>this.onPanosFontChange(i),area:i=>this.onAreaChange(i),hover_color:i=>this.onHoverColorChange(i),list_active_item_bg:i=>this.onActiveBackgroundChange(i),list_padding:i=>this.onListPaddingChange(i),pano:i=>this.onPanoChange(i),panos:i=>this.onPanosChange(i),styles:i=>this.onStylesChange(i)},this.fontsLoading=[]}get show(){return this.menuService.show}get activePano(){return this.viewerService.active}get angle(){return this.viewerService.angle}get activeHotspot(){return this.hotspotService.activeId}get activeMenuElem(){return this.menuService.activeMenuElem}get isDownload(){return!this.panoService.moderationUrl&&!this.editorMode}toggle(){this.menuService.toggle()}openHotspotElm(t){let e=this.hotspotService.getHotspotById(t),n=e.parent?e.parent:e;!n||null==n.direct_link&&null==n.pano_link||this.viewerService.editor?(this.viewerService.active.id==e.pano.id?this.hotspotService.open(e.id):this.hotspotService.tempActiveId=e.id,this.viewerService.goToPano(e.pano.id,e.position)):null!=n.pano_link?n.pano_link.pano&&this.viewerService.goToPano(n.pano_link.pano.id,n.pano_link,!0):null!=n.direct_link&&n.direct_link&&this.windowRef.open(n.direct_link,n.direct_link_target?"_self":"_blank")}linkHref(t){return"string"==typeof t?t:this.i18n.t(t)}open(t,e){switch(e.type){case"pano":this.viewerService.goToPano(e.pano.id,{theta:e.theta,phi:e.phi,fov:e.fov});let n=this.statsService.getWidget(this.menu.widget);this.statsService.send({plugin:n.name,type:n.key,details:e.pano.id});break;case"link":let d=this.linkHref(e.href).match(/1s(.*?)!2/);d&&-1!=["G1","G2"].indexOf(this.panoService.keyStarts)?this.viewerService.viewer.setPano(d[1]):this.windowRef.open(this.linkHref(e.href),e.href_self?"_self":"_blank");break;case"hotspot":this.openHotspotElm(e.hotspot)}e.children&&this.openDropdown(t),this.menuService.activeMenuElem=e.id}openDropdown(t){let e=this._getParent(t.target,"LI");if(e.classList.contains("open"))e.classList.remove("open"),this.menu.list_dropdown_hover||this._slideUp(e.getElementsByTagName("ul")[0]);else{let n=this._getParent(e,"UL");Array.from(n.children).forEach(d=>{d.classList.contains("open")&&(null==this.menu?.list_dropdown_accordion||this.menu?.list_dropdown_accordion)&&(d.classList.remove("open"),this._slideUp(d.getElementsByTagName("ul")[0]))}),e.classList.add("open"),this.menu.list_dropdown_hover||this._slideDown(e.getElementsByTagName("ul")[0])}}_slideDown(t,e=400){clearInterval(this._slideInterval),t.style.removeProperty("height"),t.style.position="absolute",t.style.visibility="hidden",t.style.display="block",t.style.overflow="hidden";let n=t.offsetHeight;t.style.removeProperty("position"),t.style.removeProperty("visibility"),t.style.height=0,t.style.transition="height "+e+"ms ease",setTimeout(()=>{t.style.height=n+"px",this._slideInterval=setTimeout(()=>{t.style.removeProperty("height"),t.style.removeProperty("overflow")},e)})}_slideUp(t,e=400){clearInterval(this._slideInterval),t.style.removeProperty("height"),t.style.height=t.offsetHeight+"px",t.style.overflow="hidden",t.style.transition="height "+e+"ms ease",setTimeout(()=>{t.style.height=0,this._slideInterval=setTimeout(()=>{t.style.removeProperty("height"),t.style.removeProperty("overflow"),t.style.removeProperty("display")},e)})}_getParent(t,e){let n=t.parentElement;for(;n.tagName!=e;)n=n.parentElement;return n}onPanosChange(t){}onPanoChange(t){}onAreaChange(t){}onCommonBackgroundChange(t){this.elRef.nativeElement.style.setProperty("--background",h.v.backgroundStyle(t))}onCommonActiveColorChange(t){this.elRef.nativeElement.style.setProperty("--active-color",h.v.backgroundStyle(t))}onCommonTextColorChange(t){this.elRef.nativeElement.style.setProperty("--text-color",t?t.color:null)}onBackgroundChange(t){this.elRef.nativeElement.style.setProperty("--background",h.v.backgroundStyle(t))}onActiveColorChange(t){this.elRef.nativeElement.style.setProperty("--active-color",h.v.backgroundStyle(t))}onTextColorChange(t){this.elRef.nativeElement.style.setProperty("--text-color",t?t.color:null)}onCommonColorChange(t){this.elRef.nativeElement.style.setProperty("--background",h.v.backgroundStyle(t?this.panoService.commonColor.background:this.menu.background)),this.elRef.nativeElement.style.setProperty("--active-color",h.v.backgroundStyle(t?this.panoService.commonColor.active_color:this.menu.active_color)),this.elRef.nativeElement.style.setProperty("--text-color",t?this.panoService.commonColor.text_color.color:this.menu.text_color.color)}onBorderRadiusChange(t){this.elRef.nativeElement.style.setProperty("--border-radius-top-left",t?t.topLeft+"px":null),this.elRef.nativeElement.style.setProperty("--border-radius-top-right",t?t.topRight+"px":null),this.elRef.nativeElement.style.setProperty("--border-radius-bottom-left",t?t.bottomLeft+"px":null),this.elRef.nativeElement.style.setProperty("--border-radius-bottom-right",t?t.bottomRight+"px":null)}onWidthChange(t){this.elRef.nativeElement.style.setProperty("--width",t+"px")}onOpacityChange(t){this.elRef.nativeElement.style.setProperty("--opacity",t)}onMarginChange(t){this.elRef.nativeElement.style.setProperty("--margin",t+"px")}onTitleFontChange(t){this.fontsService.setFontStyle(this.elRef,t,"--title-style-")}onContactTitleFontChange(t){this.fontsService.setFontStyle(this.elRef,t,"--contact-title-style-")}onContactFontChange(t){this.fontsService.setFontStyle(this.elRef,t,"--contact-style-")}onAddressFontChange(t){this.fontsService.setFontStyle(this.elRef,t,"--address-style-")}onPanoTitleFontChange(t){this.fontsService.setFontStyle(this.elRef,t,"--pano-title-style-")}onHideOnStarChange(t){}onPanosFontChange(t){this.fontsService.setFontStyle(this.elRef,t,"--pano-style-")}onStylesChange(t){this.styles=h.v.getStyleCode(this.elRef.nativeElement,t)}onListPaddingChange(t){this.elRef.nativeElement.style.setProperty("--list-padding-top",t.top+"px"),this.elRef.nativeElement.style.setProperty("--list-padding-left",t.left+"px"),this.elRef.nativeElement.style.setProperty("--list-padding-bottom",t.bottom+"px"),this.elRef.nativeElement.style.setProperty("--list-padding-right",t.right+"px")}onHoverColorChange(t){this.elRef.nativeElement.style.setProperty("--hover-background",h.v.backgroundStyle(t))}onActiveBackgroundChange(t){this.elRef.nativeElement.style.setProperty("--active-background",h.v.backgroundStyle(t))}initObs(){Object.keys(this.dataObs).forEach(t=>{this.dataObs[t].subscribe(e=>{this.observableFunc[t]&&this.observableFunc[t](e)})}),Object.keys(this.panoService.commonColorObs).forEach(t=>{this.panoService.commonColorObs[t].subscribe(e=>{this.observableFunc["common_"+t]&&this.menu.common_color&&this.observableFunc["common_"+t](e)})})}_recursiveChildrenHotspotPanoCheck(t){t.forEach(e=>{e.hotspot&&!e.pano&&(e.pano=this.hotspotService.getHotspotById(e.hotspot).pano),e.children&&this._recursiveChildrenHotspotPanoCheck(e.children)})}checkDefaultDataText(){!this.default_options||(null!=this.default_options.title&&"string"==typeof this.default_options.title&&(this.default_options.title=this.i18n.toLangFormat(this.default_options.title)),null!=this.default_options.contact_title&&"string"==typeof this.default_options.contact_title&&(this.default_options.contact_title=this.i18n.toLangFormat(this.default_options.contact_title)),null!=this.default_options.contact1&&"string"==typeof this.default_options.contact1&&(this.default_options.contact1=this.i18n.toLangFormat(this.default_options.contact1)),null!=this.default_options.address_title&&"string"==typeof this.default_options.address_title&&(this.default_options.address_title=this.i18n.toLangFormat(this.default_options.address_title)),null!=this.default_options.address1&&"string"==typeof this.default_options.address1&&(this.default_options.address1=this.i18n.toLangFormat(this.default_options.address1)),null!=this.default_options.pano_title&&"string"==typeof this.default_options.pano_title&&(this.default_options.pano_title=this.i18n.toLangFormat(this.default_options.pano_title)),null!=this.default_options.gallery_arr&&this.default_options.gallery_arr.map(t=>{t.name=this.i18n.toLangFormat(t.name)}))}checkDefaultDataUpdate(){Object.keys(this.default_options).forEach(t=>{null==this.data[t]?(this.panoService.newIdentification.menu[t]=!0,this.data[t]=this.default_options[t]):t.endsWith("_font")&&this._updateFontStyle(this.data[t],this.default_options[t])})}checkFontStyle(){Object.keys(this.menuService.menu).forEach(t=>{t.endsWith("_font")&&this.menuService.menu[t]&&this.menuService.menu[t].family&&this.fontsLoading.push(this.fontsService.loadFonts([this.menuService.menu[t].family]))})}initData(){this.data?(this.checkDefaultDataUpdate(),("boolean"==typeof this.data.hide_on_start||"string"==typeof this.data.hide_on_start)&&(this.data.hide_on_start={desktop:!1,tablet:!1,mobile:!0}),this.menuService.init(this.data),this.menu=this.menuService.menu,null!=this.menu.hide_on_start&&this.menu.hide_on_start[this.viewerService.overlayDeviceClass]&&(this.menuService.show=!1),this.menu.panos&&Array.isArray(this.menu.panos)&&this._recursiveChildrenHotspotPanoCheck(this.menu.panos)):(this.checkDefaultDataText(),this.menuService.show=!0,this.menuService.init(this.default_options)),this.checkFontStyle(),this.menu=this.menuService.menu,this.editorMode=this.viewerService.editor,this.dataObs=this.menuService.dataObs,(0,s.NF)(this.panoService.platformId)&&(this.initObs(),this.viewerService.viewerWidthObs.subscribe(()=>setTimeout(()=>{this.menuService.show=!this.menuService.menu||null==this.menuService.menu.hide_on_start||!this.menuService.menu.hide_on_start[this.viewerService.overlayDeviceClass]}))),this.widgetInit=!0}ngOnInit(){setTimeout(()=>this.initData())}}return u.\u0275fac=function(t){return new(t||u)(r.Y36(r.zs3),r.Y36(_.h),r.Y36(l.a),r.Y36(p.N),r.Y36(o.X))},u.\u0275cmp=r.Xpm({type:u,selectors:[["menu-component"]],inputs:{data:"data"},features:[r.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2}),u})()}}]);