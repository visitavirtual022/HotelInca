"use strict";(self.webpackChunktourmkr_download=self.webpackChunktourmkr_download||[]).push([[42],{3808:(_,g,r)=>{r.d(g,{G:()=>m});var l=r(92),u=r(8692),v=r(4537);let m=(()=>{class d{}return d.\u0275fac=function(w){return new(w||d)},d.\u0275mod=v.oAB({type:d}),d.\u0275inj=v.cJS({imports:[u.ez,l.u5]}),d})()},6042:(_,g,r)=>{r.r(g),r.d(g,{OtherNavigationModule:()=>L});var l=r(8692),u=r(4507),v=r(9638),m=r(6031),d=r(3808),t=r(4537),w=r(8041),f=r(9911),C=r(354);function M(o,a){if(1&o&&(t.TgZ(0,"div",8),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.Akn(e.font),t.Udp("color",e.font.color?e.font.color:e.widget.title_color.value.color)("background",e.widget.title_bg.value.color)("margin-bottom",e.widget.size.value/2,"px"),t.xp6(1),t.Oqu(e.i18n.t(e.data.name))}}function O(o,a){if(1&o&&t._UZ(0,"div",9),2&o){const e=t.oxw(2);t.Udp("background",e.widget.colors.value.background.color)}}function x(o,a){if(1&o&&t._UZ(0,"sh-icon",10),2&o){const e=t.oxw(2);t.Udp("color",e.widget.colors.value.background.color),t.Q6J("icon",e.widget.icon.value)}}function b(o,a){if(1&o&&t._UZ(0,"img",11),2&o){const e=t.oxw(2);t.Q6J("src",e.widget.image.value,t.LSH)}}function y(o,a){if(1&o&&t._UZ(0,"sh-icon",10),2&o){const e=t.oxw(2);t.Udp("color",e.widget.colors.value.background.color),t.Q6J("icon",e.data.icon)}}function I(o,a){if(1&o&&t._UZ(0,"img",11),2&o){const e=t.oxw(2);t.Q6J("src",e.data.img,t.LSH)}}function P(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",12)(1,"button",13),t.NdJ("mousedown",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.positionChange())}),t._UZ(2,"sh-icon",10),t.qZA(),t.TgZ(3,"button",14),t.NdJ("mousedown",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.radiusChange())}),t._UZ(4,"sh-icon",10),t.qZA(),t.TgZ(5,"button",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.remove())}),t._UZ(6,"sh-icon",10),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("icon",e.icons[0]),t.xp6(2),t.Q6J("icon",e.icons[1]),t.xp6(2),t.Q6J("icon",e.icons[2])}}function S(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",1),t.YNc(1,M,2,9,"div",2),t.TgZ(2,"div",3),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.goToPano())}),t.YNc(3,O,1,2,"div",4),t.YNc(4,x,1,3,"sh-icon",5),t.YNc(5,b,1,1,"img",6),t.YNc(6,y,1,3,"sh-icon",5),t.YNc(7,I,1,1,"img",6),t.qZA(),t.YNc(8,P,7,3,"div",7),t.qZA()}if(2&o){const e=t.oxw();t.ekj("title-show",e.widget.title_show.value),t.MGl("id","nav-",e.data.id,""),t.xp6(1),t.Q6J("ngIf",e.i18n.t(e.data.name)&&e.font),t.xp6(1),t.Udp("width",e.widget.size.value,"px")("height",e.widget.size.value,"px")("transform","translate(-50%, -50%) perspective(300px) rotateX("+e.widget.rotatex.value+"deg)"),t.ekj("clickable",e.data.pano_link),t.xp6(1),t.Q6J("ngIf",!(e.widget.icon.value&&e.widget.icon.value.icon||e.widget.image.value||e.data.img||e.data.icon&&e.data.icon.icon)),t.xp6(1),t.Q6J("ngIf",e.widget.icon.value&&e.widget.icon.value.icon&&!e.widget.image.value&&!e.data.img&&!(e.data.icon&&e.data.icon.icon)),t.xp6(1),t.Q6J("ngIf",e.widget.image.value&&!e.data.img&&!(e.data.icon&&e.data.icon.icon)),t.xp6(1),t.Q6J("ngIf",e.data.icon&&e.data.icon.icon&&!e.data.img),t.xp6(1),t.Q6J("ngIf",e.data.img),t.xp6(1),t.Q6J("ngIf",e.editorMode)}}let N=(()=>{class o{constructor(){this.positionChangeItem=new t.vpe,this.radiusChangeItem=new t.vpe,this.removeItem=new t.vpe,this.changePano=new t.vpe,this.icons=[{prefix:"far",iconName:"arrows-alt",icon:[512,512,[],"f077","M276 236.075h115.85v-76.15c0-10.691 12.926-16.045\n        20.485-8.485l96.149 96.149c4.686 4.686 4.686 12.284 0 16.971l-96.149 96.149c-7.56 7.56-20.485\n        2.206-20.485-8.485v-76.149H275.999v115.776h76.15c10.691 0 16.045 12.926\n        8.485 20.485l-96.149 96.15c-4.686 4.686-12.284 4.686-16.971\n        0l-96.149-96.149c-7.56-7.56-2.206-20.485 8.485-20.485H236V276.075H120.149v76.149c0\n        10.691-12.926 16.045-20.485 8.485L3.515 264.56c-4.686-4.686-4.686-12.284\n        0-16.971l96.149-96.149c7.56-7.56 20.485-2.206 20.485\n        8.485v76.15H236V120.15h-76.149c-10.691 0-16.045-12.926-8.485-20.485l96.149-96.149c4.686-4.686\n        12.284-4.686 16.971 0l96.149 96.149c7.56 7.56 2.206 20.485-8.485 20.485H276v115.925z"]},{prefix:"far",iconName:"arrows-left-right",icon:[512,512,["arrows-h"],"f07e","M512 256c0 6.688-2.812 13.09-7.719 17.62l-104 96C395.7 373.9 389.8 376 384 376c-6.469 0-12.91-2.594-17.62-7.719c-9-9.75-8.406-24.94 1.344-33.91L426.6 280H85.38l58.91 54.38c9.75 8.969 10.34 24.16 1.344 33.91C140.9 373.4 134.5 376 128 376c-5.812 0-11.66-2.094-16.28-6.375l-104-96C2.813 269.1 0 262.7 0 256s2.812-13.09 7.719-17.62l104-96C121.5 133.3 136.7 134 145.6 143.7c9 9.75 8.406 24.94-1.344 33.91L85.38 232h341.3l-58.91-54.38c-9.75-8.969-10.34-24.16-1.344-33.91C375.3 134 390.5 133.3 400.3 142.4l104 96C509.2 242.9 512 249.3 512 256z"]},{prefix:"far",iconName:"trash-alt",icon:[448,512,[],"f007","M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0\n      0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48\n      48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0\n      96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16\n      16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6\n      0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0\n      0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"]},{prefix:"far",iconName:"circle-chevron-up",icon:[512,512,["chevron-circle-up"],"f139","M272.1 159C268.3 154.3 262.2 152 256 152S243.7 154.3 239 159l-112 112c-9.375 9.375-9.375 24.56 0 33.94s24.56 9.375 33.94 0L256 209.9l95.03 95.03c9.375 9.375 24.56 9.375 33.94 0s9.375-24.56 0-33.94L272.1 159zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 464c-114.7 0-208-93.31-208-208S141.3 48 256 48s208 93.31 208 208S370.7 464 256 464z"]}]}get font(){let e=this.fontsService.fontStyle(this.widget.list.font);return e["font-size"]=e["font-size.px"]+"px",e["line-height"]=e["line-height.px"]+"px",e}get perspective(){return 400}positionChange(){this.positionChangeItem.emit(this.data)}radiusChange(){this.radiusChangeItem.emit(this.data)}remove(){this.removeItem.emit(this.data)}goToPano(){this.changePano.emit(this.data)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["wdg-other-navigation-arrow"]],inputs:{data:"data",editorMode:"editorMode",widget:"widget",i18n:"i18n",fontsService:"fontsService"},outputs:{positionChangeItem:"positionChangeItem",radiusChangeItem:"radiusChangeItem",removeItem:"removeItem",changePano:"changePano"},decls:1,vars:1,consts:[["class","arrow-wrapper",3,"id","title-show",4,"ngIf"],[1,"arrow-wrapper",3,"id"],["class","title",3,"style","color","background","marginBottom",4,"ngIf"],[1,"arrow",3,"click"],["class","circle",3,"background",4,"ngIf"],[3,"icon","color",4,"ngIf"],["alt","arrow",3,"src",4,"ngIf"],["class","editor-buttons",4,"ngIf"],[1,"title"],[1,"circle"],[3,"icon"],["alt","arrow",3,"src"],[1,"editor-buttons"],["mat-icon-button","",1,"move",3,"mousedown"],["mat-icon-button","",1,"radius",3,"mousedown"],["mat-icon-button","",3,"click"]],template:function(e,n){1&e&&t.YNc(0,S,9,18,"div",0),2&e&&t.Q6J("ngIf",n.data)},dependencies:[l.O5,v.lW,C.o],styles:[".arrow-wrapper[_ngcontent-%COMP%]{display:none;width:0;height:0;position:relative;perspective:150px}.arrow-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:absolute;bottom:100%;left:0;padding:0 10px;border-radius:2px;transform:translate(-50%);display:none;white-space:nowrap}.arrow-wrapper[_ngcontent-%COMP%]:hover   .title[_ngcontent-%COMP%], .arrow-wrapper.title-show[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:block}.arrow-wrapper[_ngcontent-%COMP%]   .arrow.clickable[_ngcontent-%COMP%]{cursor:pointer}.arrow-wrapper[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]   sh-icon[_ngcontent-%COMP%], .arrow-wrapper[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:inherit;height:inherit}.arrow-wrapper[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{border-radius:50%;width:100%;height:100%}.arrow-wrapper[_ngcontent-%COMP%]   .editor-buttons[_ngcontent-%COMP%]{display:none;position:absolute;top:0;left:50%;padding-top:20px;transform:translate(-50%);z-index:-1}.arrow-wrapper[_ngcontent-%COMP%]   .editor-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff}.arrow-wrapper[_ngcontent-%COMP%]   .editor-buttons[_ngcontent-%COMP%]   button.move[_ngcontent-%COMP%]{cursor:all-scroll}.arrow-wrapper[_ngcontent-%COMP%]   .editor-buttons[_ngcontent-%COMP%]   button.radius[_ngcontent-%COMP%]{cursor:ew-resize}.arrow-wrapper[_ngcontent-%COMP%]:hover   .editor-buttons[_ngcontent-%COMP%]{display:flex}"]}),o})();const A=JSON.parse('{"widget":"OtherNavigationComponent","show":false,"options":[{"key":"list","label":"List","type":"liste","pano_link":true,"category":"content","icons":true,"images":true,"font":{"family":"Exo","align":"left","size":14,"line_height":21,"italic":false,"bold":false,"underline":false,"color":""},"value":[]},{"key":"icon","label":"Icon","type":"icon","category":"content","value":""},{"key":"image","label":"Image","type":"image","category":"content","value":""},{"key":"size","label":"Size","type":"slider","category":"appearance","help":"px","value":50},{"key":"rotatex","label":"Rotate X","type":"slider","category":"appearance","min":0,"max":360,"value":60},{"key":"title-show","label":"Title always show","type":"toggle","category":"appearance","value":false},{"key":"colors","type":"color-bundle","category":"colors","value":{"common_color":false,"background":{"type":"native","color":"rgba(0,0,0,0.5)"},"text_color":{"color":"rgb(255,255,255)"}}},{"key":"title-bg","label":"Title background","type":"color","category":"colors","value":{"type":"native","color":"rgba(0,0,0,0.5)"}},{"key":"title-color","label":"Title color","type":"color","category":"colors","value":{"color":"rgba(255,255,255)"}},{"key":"styles","label":"Styles","type":"css","category":"styles","value":""}]}');var H=r(2001),T=r(7239);const k=["hotspots"];function J(o,a){if(1&o&&(t._UZ(0,"code",2),t.ALo(1,"safe")),2&o){const e=t.oxw();t.Q6J("innerHTML",t.xi3(1,1,e.styles,"html"),t.oJD)}}function E(o,a){1&o&&(t.TgZ(0,"div",3,4),t.GkF(2,null,5),t.qZA())}let z=(()=>{class o extends w.P{constructor(e,n){super(e),this.viewerService=n,this.default_options=A}__dynamicLoadArrowComponent(e){const n=this.hotspotsContainer.createComponent(N);n.instance.data=e,n.instance.widget=this.options,n.instance.editorMode=this.viewerService.editor,n.instance.i18n=this.i18n,n.instance.fontsService=this.fontsService,n.instance.positionChangeItem.subscribe(i=>this.onPositionChange(i)),n.instance.radiusChangeItem.subscribe(i=>this.onRadiusChange(i)),n.instance.removeItem.subscribe(i=>this.onRemove(i)),n.instance.changePano.subscribe(i=>this.goToPano(i)),e.pano_link&&this.viewerService.viewerService.loadPano(e.pano_link.id)}__addViewerHotspot(e){let n="nav-"+e.id;if(this.viewerService.viewer.scene().hotspotContainer().listHotspots().find(c=>c._domElement.id==n))return;let i=document.getElementById(n);if(!i)return;let s={yaw:e.theta*Math.PI/180,pitch:e.phi*Math.PI/-180};null==e.radius&&(e.radius=340);let h={perspective:{radius:e.radius}};this.viewerService.viewer.scene().hotspotContainer().createHotspot(i,s,h)}addAllArrowsOfCurrentPano(){!(0,l.NF)(this.panoService.platformId)||f.v.waitUntil(()=>null!=this.hotspotsContainer).then(()=>{this.hotspotsContainer.clear(),this.options.list.value.filter(e=>e.pano.id==this.viewerService.viewerDataService.active.id).forEach(e=>{this.__dynamicLoadArrowComponent(e),setTimeout(()=>this.__addViewerHotspot(e))})})}removeAllArrowsOfCurrentPano(){!(0,l.NF)(this.panoService.platformId)||(this.hotspotsContainer.clear(),this.viewerService.viewer.scene().hotspotContainer().listHotspots().map(e=>{0==e._domElement.id.indexOf("nav")&&this.viewerService.viewer.scene().hotspotContainer().destroyHotspot(e)}))}panoControlSubscribe(){if(!(0,l.NF)(this.panoService.platformId))return;const e=()=>this.addAllArrowsOfCurrentPano();f.v.waitUntil(()=>null!=this.viewerService.viewer).then(()=>{this.viewerService.viewer.__events.sceneChange.push(e),this._navControlFuncIndex=this.viewerService.viewer.__events.sceneChange.indexOf(e)})}panoControlUnSubscribe(){!(0,l.NF)(this.panoService.platformId)||this.viewerService.viewer.__events.sceneChange.splice(this._navControlFuncIndex,1)}addObservableFunc(){this.observableFunc.list=e=>this.onListChange(e),this.observableFunc.size=e=>this.onSizeChange(e),this.observableFunc.rotatex=e=>this.onRotatexChange(e)}onListChange(e){!(0,l.NF)(this.panoService.platformId)||f.v.waitUntil(()=>null!=this.hotspotsContainer&&null!=this.viewerService.viewer&&null!=this.viewerService.viewer.scene()).then(()=>{let n=e.filter(c=>c.pano.id==this.viewerService.active.id),i=this.viewerService.viewer.scene().hotspotContainer().listHotspots(),s=i.filter(c=>0==c.domElement().id.indexOf("nav-")&&!n.find(p=>"nav-"+p.id==c.domElement().id)),h=n.filter(c=>!i.find(p=>p.domElement().id=="nav-"+c.id));s.forEach(c=>{this.viewerService.viewer.scene().hotspotContainer().destroyHotspot(c)}),h.forEach(c=>{this.__dynamicLoadArrowComponent(c),setTimeout(()=>this.__addViewerHotspot(c))})})}onSizeChange(e){this.elRef.nativeElement.style.setProperty("--size",e+"px")}onRotatexChange(e){this.elRef.nativeElement.style.setProperty("--rotatex",e+"deg")}goToPano(e){e.pano_link&&this.viewerService.goToPano(e.pano_link.id)}onPositionChange(e){this.positionChangeItem=e,this.positionChangeStartingValues=Object.assign({},e)}onRadiusChange(e){this.radiusChangeItem=e}onRemove(e){let n=this.viewerService.viewer.scene().hotspotContainer().listHotspots().find(i=>i.domElement().id=="nav-"+e.id);n&&(this.viewerService.viewer.scene().hotspotContainer().destroyHotspot(n),this.options.list.value=this.options.list.value.filter(i=>i.id!=e.id))}onMousemove(e){this.positionChangeItem?this._hotspotMoveControlMousemove(e,this.positionChangeItem.id):this.radiusChangeItem&&this._radiusMoveControlMouseMove(e,this.radiusChangeItem.id)}onMouseup(){this.positionChangeItem=void 0,this.radiusChangeItem=void 0}_hotspotMoveControlMousemove(e,n){e.preventDefault(),this.viewerService.viewer._controlMethods.mouseViewDrag._startEvent=!1;let i=this.viewerService.viewer.scene().hotspotContainer().listHotspots().find(U=>U.domElement().id=="nav-"+n),s=180*i._coords.yaw/Math.PI+e.movementX/10,h=180*i._coords.pitch/Math.PI+e.movementY/10;if(i.setPosition({yaw:s*Math.PI/180,pitch:h*Math.PI/180}),s>=360&&(s%=360),s<0&&(s+=360),!this.positionChangeItem||(this.positionChangeItem.theta=s,this.positionChangeItem.phi=-1*h,!this.positionChangeStartingValues))return;let p=this.positionChangeStartingValues.radius-Math.round(20*(this.positionChangeStartingValues.phi-this.positionChangeItem.phi));p<=180&&(p=180),this.positionChangeItem.radius=p,i.setPerspective({radius:this.positionChangeItem.radius})}_radiusMoveControlMouseMove(e,n){e.preventDefault(),this.viewerService.viewer._controlMethods.mouseViewDrag._startEvent=!1;let i=this.viewerService.viewer.scene().hotspotContainer().listHotspots().find(h=>h.domElement().id=="nav-"+n),s=i.perspective().radius-e.movementX;s<=180&&(s=180),i.setPerspective({radius:s}),this.radiusChangeItem.radius=s}initData(){this.addObservableFunc(),super.initData(),this.panoControlSubscribe()}ngOnDestroy(){this.panoControlUnSubscribe(),this.removeAllArrowsOfCurrentPano()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.zs3),t.Y36(H.a))},o.\u0275cmp=t.Xpm({type:o,selectors:[["wdg-other-navigation"]],viewQuery:function(e,n){if(1&e&&t.Gf(k,5,t.s_b),2&e){let i;t.iGM(i=t.CRH())&&(n.hotspotsContainer=i.first)}},hostBindings:function(e,n){1&e&&t.NdJ("mousemove",function(s){return n.onMousemove(s)},!1,t.Jf7)("mouseup",function(){return n.onMouseup()},!1,t.Jf7)},features:[t.qOj],decls:2,vars:2,consts:[[3,"innerHTML",4,"ngIf"],["class","widget other",4,"ngIf"],[3,"innerHTML"],[1,"widget","other"],["widget",""],["hotspots",""]],template:function(e,n){1&e&&(t.YNc(0,J,2,4,"code",0),t.YNc(1,E,4,0,"div",1)),2&e&&(t.Q6J("ngIf",n.styles),t.xp6(1),t.Q6J("ngIf",n.widgetInit&&n.widget))},dependencies:[l.O5,T.y],styles:[".widget[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:flex}"]}),o})(),L=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o,bootstrap:[z]}),o.\u0275inj=t.cJS({imports:[l.ez,u.D,v.ot,m.Q,d.G]}),o})()}}]);