"use strict";(self.webpackChunktourmkr_download=self.webpackChunktourmkr_download||[]).push([[569],{354:(v,f,s)=>{s.d(f,{o:()=>a});var p=s(8692),n=s(4537);function l(h,d){if(1&h&&(n.O4$(),n.TgZ(0,"svg",1),n._UZ(1,"path",2),n.qZA()),2&h){const r=n.oxw();n.uIk("data-prefix",r.icon.prefix)("data-icon",r.icon.iconName)("viewBox","0 0 "+r.icon.icon[0]+" "+r.icon.icon[1]),n.xp6(1),n.uIk("d",r.icon.icon[4])}}let a=(()=>{class h{constructor(r,u){this.elRef=r,this.platformId=u}iconTransform(){!(0,p.NF)(this.platformId)||this.elRef.nativeElement.style.setProperty("--transform",this.icon&&this.icon.icon&&this.icon.icon[0]!=this.icon.icon[1]&&this.icon.icon[0]/this.icon.icon[1]>.8?"scale("+this.icon.icon[0]/this.icon.icon[1]+")":null)}ngOnInit(){this.iconTransform()}ngOnChanges(r){void 0!==r.icon&&this.iconTransform()}}return h.\u0275fac=function(r){return new(r||h)(n.Y36(n.SBq),n.Y36(n.Lbi))},h.\u0275cmp=n.Xpm({type:h,selectors:[["sh-icon"]],inputs:{icon:"icon"},features:[n.TTD],decls:1,vars:1,consts:[["role","img","aria-hidden","true","focusable","false","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["role","img","aria-hidden","true","focusable","false","xmlns","http://www.w3.org/2000/svg"],["fill","currentColor"]],template:function(r,u){1&r&&n.YNc(0,l,2,4,"svg",0),2&r&&n.Q6J("ngIf",u.icon&&u.icon.icon)},dependencies:[p.O5],styles:["[_nghost-%COMP%]{width:14px;height:14px;display:inline-block;line-height:0;transform:var(--transform)}svg[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:100%;height:100%}"]}),h})()},6031:(v,f,s)=>{s.d(f,{Q:()=>l});var p=s(8692),n=s(4537);let l=(()=>{class a{}return a.\u0275fac=function(d){return new(d||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[p.ez]}),a})()},5735:(v,f,s)=>{s.d(f,{M:()=>m});var p=s(7072),n=s(8692),l=s(9911),a=s(4537),h=s(9321),d=s(2001),r=s(4445),u=s(8066);let m=(()=>{class _ extends p.o{constructor(t,e,i,c,y){super(t),this.injector=t,this.menuService=e,this.viewerService=i,this.hotspotService=c,this.windowRef=y,this.data=null,this.default_options=null,this.widgetInit=!1,this.menu=null,this.editorMode=!1,this.icons=[],this.observableFunc={background:o=>this.onBackgroundChange(o),active_color:o=>this.onActiveColorChange(o),text_color:o=>this.onTextColorChange(o),common_color:o=>this.onCommonColorChange(o),common_background:o=>this.onCommonBackgroundChange(o),common_active_color:o=>this.onCommonActiveColorChange(o),common_text_color:o=>this.onCommonTextColorChange(o),border_radius:o=>this.onBorderRadiusChange(o),width:o=>this.onWidthChange(o),margin:o=>this.onMarginChange(o),opacity:o=>this.onOpacityChange(o),hide_on_start:o=>this.onHideOnStarChange(o),title_font:o=>this.onTitleFontChange(o),contact_title_font:o=>this.onContactTitleFontChange(o),contact1_font:o=>this.onContactFontChange(o),address1_font:o=>this.onAddressFontChange(o),pano_title_font:o=>this.onPanoTitleFontChange(o),panos_font:o=>this.onPanosFontChange(o),area:o=>this.onAreaChange(o),hover_color:o=>this.onHoverColorChange(o),list_active_item_bg:o=>this.onActiveBackgroundChange(o),list_padding:o=>this.onListPaddingChange(o),pano:o=>this.onPanoChange(o),panos:o=>this.onPanosChange(o),styles:o=>this.onStylesChange(o)},this.fontsLoading=[]}get show(){return this.menuService.show}get activePano(){return this.viewerService.active}get angle(){return this.viewerService.angle}get activeHotspot(){return this.hotspotService.activeId}get activeMenuElem(){return this.menuService.activeMenuElem}get isDownload(){return!this.panoService.moderationUrl&&!this.editorMode}toggle(){this.menuService.toggle()}openHotspotElm(t){let e=this.hotspotService.getHotspotById(t),i=e.parent?e.parent:e;!i||null==i.direct_link&&null==i.pano_link||this.viewerService.editor?(this.viewerService.active.id==e.pano.id?this.hotspotService.open(e.id):this.hotspotService.tempActiveId=e.id,this.viewerService.goToPano(e.pano.id,e.position)):null!=i.pano_link?i.pano_link.pano&&this.viewerService.goToPano(i.pano_link.pano.id,i.pano_link,!0):null!=i.direct_link&&i.direct_link&&this.windowRef.open(i.direct_link,i.direct_link_target?"_self":"_blank")}linkHref(t){return"string"==typeof t?t:this.i18n.t(t)}open(t,e){switch(e.type){case"pano":this.viewerService.goToPano(e.pano.id,{theta:e.theta,phi:e.phi,fov:e.fov});let i=this.statsService.getWidget(this.menu.widget);this.statsService.send({plugin:i.name,type:i.key,details:e.pano.id});break;case"link":let c=this.linkHref(e.href).match(/1s(.*?)!2/);c&&-1!=["G1","G2"].indexOf(this.panoService.keyStarts)?this.viewerService.viewer.setPano(c[1]):this.windowRef.open(this.linkHref(e.href),e.href_self?"_self":"_blank");break;case"hotspot":this.openHotspotElm(e.hotspot)}e.children&&this.openDropdown(t),this.menuService.activeMenuElem=e.id}openDropdown(t){let e=this._getParent(t.target,"LI");if(e.classList.contains("open"))e.classList.remove("open"),this.menu.list_dropdown_hover||this._slideUp(e.getElementsByTagName("ul")[0]);else{let i=this._getParent(e,"UL");Array.from(i.children).forEach(c=>{c.classList.contains("open")&&(null==this.menu?.list_dropdown_accordion||this.menu?.list_dropdown_accordion)&&(c.classList.remove("open"),this._slideUp(c.getElementsByTagName("ul")[0]))}),e.classList.add("open"),this.menu.list_dropdown_hover||this._slideDown(e.getElementsByTagName("ul")[0])}}_slideDown(t,e=400){clearInterval(this._slideInterval),t.style.removeProperty("height"),t.style.position="absolute",t.style.visibility="hidden",t.style.display="block",t.style.overflow="hidden";let i=t.offsetHeight;t.style.removeProperty("position"),t.style.removeProperty("visibility"),t.style.height=0,t.style.transition="height "+e+"ms ease",setTimeout(()=>{t.style.height=i+"px",this._slideInterval=setTimeout(()=>{t.style.removeProperty("height"),t.style.removeProperty("overflow")},e)})}_slideUp(t,e=400){clearInterval(this._slideInterval),t.style.removeProperty("height"),t.style.height=t.offsetHeight+"px",t.style.overflow="hidden",t.style.transition="height "+e+"ms ease",setTimeout(()=>{t.style.height=0,this._slideInterval=setTimeout(()=>{t.style.removeProperty("height"),t.style.removeProperty("overflow"),t.style.removeProperty("display")},e)})}_getParent(t,e){let i=t.parentElement;for(;i.tagName!=e;)i=i.parentElement;return i}onPanosChange(t){}onPanoChange(t){}onAreaChange(t){}onCommonBackgroundChange(t){this.elRef.nativeElement.style.setProperty("--background",l.v.backgroundStyle(t))}onCommonActiveColorChange(t){this.elRef.nativeElement.style.setProperty("--active-color",l.v.backgroundStyle(t))}onCommonTextColorChange(t){this.elRef.nativeElement.style.setProperty("--text-color",t?t.color:null)}onBackgroundChange(t){this.elRef.nativeElement.style.setProperty("--background",l.v.backgroundStyle(t))}onActiveColorChange(t){this.elRef.nativeElement.style.setProperty("--active-color",l.v.backgroundStyle(t))}onTextColorChange(t){this.elRef.nativeElement.style.setProperty("--text-color",t?t.color:null)}onCommonColorChange(t){this.elRef.nativeElement.style.setProperty("--background",l.v.backgroundStyle(t?this.panoService.commonColor.background:this.menu.background)),this.elRef.nativeElement.style.setProperty("--active-color",l.v.backgroundStyle(t?this.panoService.commonColor.active_color:this.menu.active_color)),this.elRef.nativeElement.style.setProperty("--text-color",t?this.panoService.commonColor.text_color.color:this.menu.text_color.color)}onBorderRadiusChange(t){this.elRef.nativeElement.style.setProperty("--border-radius-top-left",t?t.topLeft+"px":null),this.elRef.nativeElement.style.setProperty("--border-radius-top-right",t?t.topRight+"px":null),this.elRef.nativeElement.style.setProperty("--border-radius-bottom-left",t?t.bottomLeft+"px":null),this.elRef.nativeElement.style.setProperty("--border-radius-bottom-right",t?t.bottomRight+"px":null)}onWidthChange(t){this.elRef.nativeElement.style.setProperty("--width",t+"px")}onOpacityChange(t){this.elRef.nativeElement.style.setProperty("--opacity",t)}onMarginChange(t){this.elRef.nativeElement.style.setProperty("--margin",t+"px")}onTitleFontChange(t){this.fontsService.setFontStyle(this.elRef,t,"--title-style-")}onContactTitleFontChange(t){this.fontsService.setFontStyle(this.elRef,t,"--contact-title-style-")}onContactFontChange(t){this.fontsService.setFontStyle(this.elRef,t,"--contact-style-")}onAddressFontChange(t){this.fontsService.setFontStyle(this.elRef,t,"--address-style-")}onPanoTitleFontChange(t){this.fontsService.setFontStyle(this.elRef,t,"--pano-title-style-")}onHideOnStarChange(t){}onPanosFontChange(t){this.fontsService.setFontStyle(this.elRef,t,"--pano-style-")}onStylesChange(t){this.styles=l.v.getStyleCode(this.elRef.nativeElement,t)}onListPaddingChange(t){this.elRef.nativeElement.style.setProperty("--list-padding-top",t.top+"px"),this.elRef.nativeElement.style.setProperty("--list-padding-left",t.left+"px"),this.elRef.nativeElement.style.setProperty("--list-padding-bottom",t.bottom+"px"),this.elRef.nativeElement.style.setProperty("--list-padding-right",t.right+"px")}onHoverColorChange(t){this.elRef.nativeElement.style.setProperty("--hover-background",l.v.backgroundStyle(t))}onActiveBackgroundChange(t){this.elRef.nativeElement.style.setProperty("--active-background",l.v.backgroundStyle(t))}initObs(){Object.keys(this.dataObs).forEach(t=>{this.dataObs[t].subscribe(e=>{this.observableFunc[t]&&this.observableFunc[t](e)})}),Object.keys(this.panoService.commonColorObs).forEach(t=>{this.panoService.commonColorObs[t].subscribe(e=>{this.observableFunc["common_"+t]&&this.menu.common_color&&this.observableFunc["common_"+t](e)})})}_recursiveChildrenHotspotPanoCheck(t){t.forEach(e=>{e.hotspot&&!e.pano&&(e.pano=this.hotspotService.getHotspotById(e.hotspot).pano),e.children&&this._recursiveChildrenHotspotPanoCheck(e.children)})}checkDefaultDataText(){!this.default_options||(null!=this.default_options.title&&"string"==typeof this.default_options.title&&(this.default_options.title=this.i18n.toLangFormat(this.default_options.title)),null!=this.default_options.contact_title&&"string"==typeof this.default_options.contact_title&&(this.default_options.contact_title=this.i18n.toLangFormat(this.default_options.contact_title)),null!=this.default_options.contact1&&"string"==typeof this.default_options.contact1&&(this.default_options.contact1=this.i18n.toLangFormat(this.default_options.contact1)),null!=this.default_options.address_title&&"string"==typeof this.default_options.address_title&&(this.default_options.address_title=this.i18n.toLangFormat(this.default_options.address_title)),null!=this.default_options.address1&&"string"==typeof this.default_options.address1&&(this.default_options.address1=this.i18n.toLangFormat(this.default_options.address1)),null!=this.default_options.pano_title&&"string"==typeof this.default_options.pano_title&&(this.default_options.pano_title=this.i18n.toLangFormat(this.default_options.pano_title)),null!=this.default_options.gallery_arr&&this.default_options.gallery_arr.map(t=>{t.name=this.i18n.toLangFormat(t.name)}))}checkDefaultDataUpdate(){Object.keys(this.default_options).forEach(t=>{null==this.data[t]?(this.panoService.newIdentification.menu[t]=!0,this.data[t]=this.default_options[t]):t.endsWith("_font")&&this._updateFontStyle(this.data[t],this.default_options[t])})}checkFontStyle(){Object.keys(this.menuService.menu).forEach(t=>{t.endsWith("_font")&&this.menuService.menu[t]&&this.menuService.menu[t].family&&this.fontsLoading.push(this.fontsService.loadFonts([this.menuService.menu[t].family]))})}initData(){this.data?(this.checkDefaultDataUpdate(),("boolean"==typeof this.data.hide_on_start||"string"==typeof this.data.hide_on_start)&&(this.data.hide_on_start={desktop:!1,tablet:!1,mobile:!0}),this.menuService.init(this.data),this.menu=this.menuService.menu,null!=this.menu.hide_on_start&&this.menu.hide_on_start[this.viewerService.overlayDeviceClass]&&(this.menuService.show=!1),this.menu.panos&&Array.isArray(this.menu.panos)&&this._recursiveChildrenHotspotPanoCheck(this.menu.panos)):(this.checkDefaultDataText(),this.menuService.show=!0,this.menuService.init(this.default_options)),this.checkFontStyle(),this.menu=this.menuService.menu,this.editorMode=this.viewerService.editor,this.dataObs=this.menuService.dataObs,(0,n.NF)(this.panoService.platformId)&&(this.initObs(),this.viewerService.viewerWidthObs.subscribe(()=>setTimeout(()=>{this.menuService.show=!this.menuService.menu||null==this.menuService.menu.hide_on_start||!this.menuService.menu.hide_on_start[this.viewerService.overlayDeviceClass]}))),this.widgetInit=!0}ngOnInit(){setTimeout(()=>this.initData())}}return _.\u0275fac=function(t){return new(t||_)(a.Y36(a.zs3),a.Y36(h.h),a.Y36(d.a),a.Y36(r.N),a.Y36(u.X))},_.\u0275cmp=a.Xpm({type:_,selectors:[["menu-component"]],inputs:{data:"data"},features:[a.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2}),_})()}}]);