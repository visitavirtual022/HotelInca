"use strict";(self.webpackChunktourmkr_download=self.webpackChunktourmkr_download||[]).push([[750],{354:(y,p,s)=>{s.d(p,{o:()=>a});var h=s(8692),i=s(4537);function u(l,g){if(1&l&&(i.O4$(),i.TgZ(0,"svg",1),i._UZ(1,"path",2),i.qZA()),2&l){const t=i.oxw();i.uIk("data-prefix",t.icon.prefix)("data-icon",t.icon.iconName)("viewBox","0 0 "+t.icon.icon[0]+" "+t.icon.icon[1]),i.xp6(1),i.uIk("d",t.icon.icon[4])}}let a=(()=>{class l{constructor(t,v){this.elRef=t,this.platformId=v}iconTransform(){!(0,h.NF)(this.platformId)||this.elRef.nativeElement.style.setProperty("--transform",this.icon&&this.icon.icon&&this.icon.icon[0]!=this.icon.icon[1]&&this.icon.icon[0]/this.icon.icon[1]>.8?"scale("+this.icon.icon[0]/this.icon.icon[1]+")":null)}ngOnInit(){this.iconTransform()}ngOnChanges(t){void 0!==t.icon&&this.iconTransform()}}return l.\u0275fac=function(t){return new(t||l)(i.Y36(i.SBq),i.Y36(i.Lbi))},l.\u0275cmp=i.Xpm({type:l,selectors:[["sh-icon"]],inputs:{icon:"icon"},features:[i.TTD],decls:1,vars:1,consts:[["role","img","aria-hidden","true","focusable","false","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["role","img","aria-hidden","true","focusable","false","xmlns","http://www.w3.org/2000/svg"],["fill","currentColor"]],template:function(t,v){1&t&&i.YNc(0,u,2,4,"svg",0),2&t&&i.Q6J("ngIf",v.icon&&v.icon.icon)},dependencies:[h.O5],styles:["[_nghost-%COMP%]{width:14px;height:14px;display:inline-block;line-height:0;transform:var(--transform)}svg[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:100%;height:100%}"]}),l})()},6031:(y,p,s)=>{s.d(p,{Q:()=>u});var h=s(8692),i=s(4537);let u=(()=>{class a{}return a.\u0275fac=function(g){return new(g||a)},a.\u0275mod=i.oAB({type:a}),a.\u0275inj=i.cJS({imports:[h.ez]}),a})()},5573:(y,p,s)=>{s.d(p,{G:()=>v});var h=s(8692),i=s(9911),u=s(7072),a=s(4537),l=s(2001),g=s(4827),t=s(5056);let v=(()=>{class _ extends u.o{constructor(e,f,b,x){super(e),this.injector=e,this.viewerService=f,this.schemeService=b,this.viewerDataService=x,this.data=null,this.default_options=null,this.widgetInit=!1,this.scheme=null,this.editorMode=!1,this.icons=[],this.observableFunc={background:o=>this.onBackgroundChange(o),active_color:o=>this.onActiveColorChange(o),text_color:o=>this.onTextColorChange(o),common_color:o=>this.onCommonColorChange(o),common_background:o=>this.onCommonBackgroundChange(o),common_active_color:o=>this.onCommonActiveColorChange(o),common_text_color:o=>this.onCommonTextColorChange(o),margin:o=>this.onMarginChange(o),hide_on_start:o=>this.onHideOnStarChange(o),border_size:o=>this.onBorderSizeChange(o),border_radius:o=>this.onBorderRadiusChange(o),map_size:o=>this.onMapSizeChange(o),map_width:o=>this.onMapWidthChange(o),map_height:o=>this.onMapHeightChange(o),map_max_width:o=>this.onMapMaxWidthChange(o),map_max_height:o=>this.onMapMaxHeightChange(o),map_fullscreen_width:o=>this.onMapFullscreenWidthChange(o),map_fullscreen_height:o=>this.onMapFullscreenHeightChange(o),dot_background:o=>this.onDotBackgroundChange(o),dot_size:o=>this.onDotSizeChange(o),special_dot_size:o=>this.onSpecialDotSizeChange(o),active_dot_size:o=>this.onActiveDotSizeChange(o),polyline_size:o=>this.onPolylineSizeChange(o),polyline_bg_size:o=>this.onPolylineBgSizeChange(o),polyline_color:o=>this.onPolylineColorChange(o),polyline_bg_color:o=>this.onPolylineBgColorChange(o),labels_fit:o=>this.onLabelsFitChange(o),dots:o=>this.onPanosChange(o),dots_font:o=>this.onDotsFontChange(o),toggle_text_font:o=>this.onToggleTextFontChange(o),styles:o=>this.onStylesChange(o)},this.fontsLoading=[]}get show(){return this.schemeService.show}get visible(){return this.viewerDataService.widgetVisibility.all}get activePano(){return this.viewerService.active}get angle(){return this.viewerService.angle}get isDownload(){return!this.panoService.moderationUrl&&!this.editorMode}toggle(){this.schemeService.toggle()}onPanosChange(e){}onActivePanoChange(e){}onDotSizeChange(e){this.elRef.nativeElement.style.setProperty("--dot-size",e+"px")}onPolylineSizeChange(e){this.elRef.nativeElement.style.setProperty("--polyline-size",e+"px")}onPolylineBgSizeChange(e){this.elRef.nativeElement.style.setProperty("--polyline-bg-size",e+"px")}onSpecialDotSizeChange(e){this.elRef.nativeElement.style.setProperty("--special-dot-size",e+"px")}onActiveDotSizeChange(e){this.elRef.nativeElement.style.setProperty("--active-dot-size",e+"px")}onLabelsFitChange(e){this.elRef.nativeElement.style.setProperty("--labels-fit",e?1:null)}onCommonBackgroundChange(e){this.elRef.nativeElement.style.setProperty("--background",i.v.backgroundStyle(e))}onCommonActiveColorChange(e){this.elRef.nativeElement.style.setProperty("--active-color",i.v.backgroundStyle(e))}onCommonTextColorChange(e){this.elRef.nativeElement.style.setProperty("--text-color",e?e.color:null)}onPolylineColorChange(e){this.elRef.nativeElement.style.setProperty("--polyline-color",e?e.color:null)}onPolylineBgColorChange(e){this.elRef.nativeElement.style.setProperty("--polyline-bg-color",e?e.color:null)}onBackgroundChange(e){this.elRef.nativeElement.style.setProperty("--background",i.v.backgroundStyle(e))}onActiveColorChange(e){this.elRef.nativeElement.style.setProperty("--active-color",i.v.backgroundStyle(e))}onTextColorChange(e){this.elRef.nativeElement.style.setProperty("--text-color",e?e.color:null)}onCommonColorChange(e){null!=this.scheme.background&&this.elRef.nativeElement.style.setProperty("--background",i.v.backgroundStyle(e?this.panoService.commonColor.background:this.scheme.background)),null!=this.scheme.active_color&&this.elRef.nativeElement.style.setProperty("--active-color",i.v.backgroundStyle(e?this.panoService.commonColor.active_color:this.scheme.active_color)),null!=this.scheme.text_color&&this.elRef.nativeElement.style.setProperty("--text-color",e?this.panoService.commonColor.text_color.color:this.scheme.text_color.color)}onHideOnStarChange(e){}onMarginChange(e){this.elRef.nativeElement.style.setProperty("--margin",e+"px")}onBorderSizeChange(e){this.elRef.nativeElement.style.setProperty("--padding",e+"px")}onBorderRadiusChange(e){this.elRef.nativeElement.style.setProperty("--border-radius-top-left",e?e.topLeft+"px":null),this.elRef.nativeElement.style.setProperty("--border-radius-top-right",e?e.topRight+"px":null),this.elRef.nativeElement.style.setProperty("--border-radius-bottom-left",e?e.bottomLeft+"px":null),this.elRef.nativeElement.style.setProperty("--border-radius-bottom-right",e?e.bottomRight+"px":null)}onMapSizeChange(e){this.elRef.nativeElement.style.setProperty("--size",e+"px")}onMapWidthChange(e){this.elRef.nativeElement.style.setProperty("--width",e+"px")}onMapHeightChange(e){this.elRef.nativeElement.style.setProperty("--height",e+"px")}onMapMaxWidthChange(e){this.elRef.nativeElement.style.setProperty("--width-max",e+"px")}onMapMaxHeightChange(e){this.elRef.nativeElement.style.setProperty("--height-max",e+"px")}onMapFullscreenWidthChange(e){this.elRef.nativeElement.style.setProperty("--width-full",e+"%")}onMapFullscreenHeightChange(e){this.elRef.nativeElement.style.setProperty("--height-full",e+"%")}onDotBackgroundChange(e){this.elRef.nativeElement.style.setProperty("--dot-background",i.v.backgroundStyle(e))}onDotsFontChange(e){this.fontsService.setFontStyle(this.elRef,e,"--dots-style-")}onToggleTextFontChange(e){this.fontsService.setFontStyle(this.elRef,e,"--toggle-text-style-")}onStylesChange(e){this.styles=i.v.getStyleCode(this.elRef.nativeElement,e)}checkDefaultDataUpdate(){Object.keys(this.default_options).forEach(e=>{-1==["image","map_angle","dots"].indexOf(e)&&(null==this.data[e]?(this.panoService.newIdentification.scheme[e]=!0,this.data[e]=this.default_options[e]):e.includes("_font")&&this._updateFontStyle(this.data[e],this.default_options[e]))})}checkFontStyle(){Object.keys(this.schemeService.scheme).forEach(e=>{e.endsWith("_font")&&this.schemeService.scheme[e]&&this.schemeService.scheme[e].family&&this.fontsLoading.push(this.fontsService.loadFonts([this.schemeService.scheme[e].family]))})}initObs(){Object.keys(this.dataObs).forEach(e=>{this.dataObs[e].subscribe(f=>{this.observableFunc[e]&&this.observableFunc[e](f)})}),Object.keys(this.panoService.commonColorObs).forEach(e=>{this.panoService.commonColorObs[e].subscribe(f=>{this.observableFunc["common_"+e]&&this.scheme.common_color&&this.observableFunc["common_"+e](f)})})}initData(){this.data?(this.checkDefaultDataUpdate(),this.schemeService.init(this.data)):(this.schemeService.show=!0,this.schemeService.init(this.default_options)),this.checkFontStyle(),this.scheme=this.schemeService.scheme,null!=this.scheme.hide_on_start&&this.scheme.hide_on_start[this.viewerService.overlayDeviceClass]&&(this.schemeService.show=!1),this.dataObs=this.schemeService.dataObs,this.editorMode=this.viewerService.editor,(0,h.NF)(this.panoService.platformId)&&this.initObs(),this.viewerService.viewerWidthObs.subscribe(()=>{setTimeout(()=>this.schemeService.mapbox?.resize()),this.scheme&&(null!=this.scheme.hide_on_start?this.scheme.hide_on_start[this.viewerService.overlayDeviceClass]&&(this.schemeService.show=!1):this.schemeService.show="mobile"!=this.viewerService.overlayDeviceClass)}),(0,h.NF)(this.panoService.platformId)&&i.v.waitUntil(()=>void 0!==this.viewerService.activePanoObs).then(()=>{this.viewerService.activePanoObs.subscribe(e=>this.onActivePanoChange(e))}),this.widgetInit=!0}ngOnInit(){setTimeout(()=>this.initData())}}return _.\u0275fac=function(e){return new(e||_)(a.Y36(a.zs3),a.Y36(l.a),a.Y36(g.p),a.Y36(t.m))},_.\u0275cmp=a.Xpm({type:_,selectors:[["scheme-component"]],inputs:{data:"data"},features:[a.qOj],decls:0,vars:0,template:function(e,f){},encapsulation:2}),_})()},750:(y,p,s)=>{s.r(p),s.d(p,{SchemeGvesjodModule:()=>P});var h=s(8692),i=s(9638),u=s(3577),a=s(6031),l=s(5573);const g=JSON.parse('{"widget":"SchemeGvesjodComponent","area":"top-right","areas":["top-left","top-right","bottom-left","bottom-right"],"show_on_load":true,"hide_on_start":{"desktop":false,"tablet":false,"mobile":true},"styles":"","common_color":false,"background":{"type":"native","color":"rgba(255,255,255,0.6)"},"map_width":240,"map_height":240,"map_zoom":20,"border_size":2,"border_radius":{"topLeft":0,"topRight":0,"bottomLeft":0,"bottomRight":0},"margin":20,"marker_style":{"color":{"color":"rgb(0,153,255)"},"color_active":{"color":"rgb(255,77,0)"},"weight":12},"link_style":{"show":true,"color":{"color":"rgb(92,107,117)"},"weight":2}}');var t=s(4537),v=s(9743),_=s(354),C=s(7239);const e=["mapbox"];function f(r,m){if(1&r&&(t._UZ(0,"code",2),t.ALo(1,"safe")),2&r){const n=t.oxw();t.Q6J("innerHTML",t.xi3(1,1,n.styles,"html"),t.oJD)}}function b(r,m){if(1&r){const n=t.EpF();t.TgZ(0,"sh-mapbox",7,8),t.NdJ("onMarkerClick",function(d){t.CHM(n);const M=t.oxw(2);return t.KtG(M.onMarkerClick(d))}),t.qZA()}if(2&r){const n=t.oxw(2);t.Q6J("panoramas",n.scheme.panoramas)("width",n.scheme.map_width)("height",n.scheme.map_height)("border",n.scheme.border_size)("margin",n.scheme.margin)("markers-count",null==n.scheme.panoramas?null:n.scheme.panoramas.length)("active",n.activePano.id)("angle",n.angle)("marker-weight",n.scheme.marker_style?n.scheme.marker_style.weight:"")("marker-color",n.scheme.marker_style?n.scheme.marker_style.color.color:"")("marker-active-color",n.scheme.marker_style?n.scheme.marker_style.color_active.color:"")("link-active",null!=n.scheme.link_style?n.scheme.link_style.show:"")("link-weight",null!=n.scheme.link_style?n.scheme.link_style.weight:"")("link-color",null!=n.scheme.link_style&&n.scheme.link_style.color?n.scheme.link_style.color.color:"")("zoom",n.scheme.map_zoom)("fly",!0)}}function x(r,m){if(1&r){const n=t.EpF();t.TgZ(0,"div",3),t.YNc(1,b,2,16,"sh-mapbox",4),t.TgZ(2,"button",5),t.NdJ("click",function(){t.CHM(n);const d=t.oxw();return t.KtG(d.toggle())}),t._UZ(3,"sh-icon",6),t.qZA()()}if(2&r){const n=t.oxw();t.ekj("show",n.schemeService.show),t.Q6J("ngClass",n.scheme.area),t.xp6(1),t.Q6J("ngIf",(null==n.scheme.panoramas?null:n.scheme.panoramas.length)&&n.activePano.id),t.xp6(2),t.Q6J("icon",n.icons[0])}}let o=(()=>{class r extends l.G{constructor(){super(...arguments),this.default_options=g,this.icons=[{prefix:"fal",iconName:"times",icon:[320,512,[],"f00d","M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"]}]}onMarkerClick(n){let c=document.getElementById("overlay");c&&c.offsetWidth<600&&this.schemeService.show&&(this.schemeService.show=!1);let d=this.statsService.getWidget(this.schemeService.scheme.widget);this.statsService.send({plugin:d.name,type:d.key,details:n.id})}initData(){super.initData(),this.scheme&&!this.scheme.panoramas&&(this.scheme.panoramas=this.panoService.panoramas.map(n=>({id:n.id,latlong:n.latlong,links:n.links.map(c=>c.id)})))}ngAfterViewInit(){this.schemeService.mapbox=this.mapbox}}return r.\u0275fac=function(){let m;return function(c){return(m||(m=t.n5z(r)))(c||r)}}(),r.\u0275cmp=t.Xpm({type:r,selectors:[["wdg-scheme-gvesjod"]],viewQuery:function(n,c){if(1&n&&t.Gf(e,5),2&n){let d;t.iGM(d=t.CRH())&&(c.mapbox=d.first)}},features:[t.qOj],decls:2,vars:2,consts:[[3,"innerHTML",4,"ngIf"],["class","widget scheme scheme-gvesjod",3,"ngClass","show",4,"ngIf"],[3,"innerHTML"],[1,"widget","scheme","scheme-gvesjod",3,"ngClass"],[3,"panoramas","width","height","border","margin","markers-count","active","angle","marker-weight","marker-color","marker-active-color","link-active","link-weight","link-color","zoom","fly","onMarkerClick",4,"ngIf"],["mat-raised-button","","aria-label","toggle map",1,"toggle",3,"click"],[3,"icon"],[3,"panoramas","width","height","border","margin","markers-count","active","angle","marker-weight","marker-color","marker-active-color","link-active","link-weight","link-color","zoom","fly","onMarkerClick"],["mapbox",""]],template:function(n,c){1&n&&(t.YNc(0,f,2,4,"code",0),t.YNc(1,x,4,5,"div",1)),2&n&&(t.Q6J("ngIf",c.styles),t.xp6(1),t.Q6J("ngIf",c.widgetInit&&c.scheme))},dependencies:[h.mk,h.O5,v.t,i.lW,_.o,C.y],styles:[".scheme-gvesjod[_ngcontent-%COMP%]{z-index:10;display:inline-block;box-sizing:border-box;visibility:hidden;position:absolute;width:var(--width);height:var(--height);margin:var(--margin);padding:var(--padding);border-radius:var(--border-radius-top-left) var(--border-radius-top-right) var(--border-radius-bottom-right) var(--border-radius-bottom-left);background:var(--background);box-shadow:0 5px 10px #0003}.scheme-gvesjod.show[_ngcontent-%COMP%]{visibility:visible;opacity:1}.scheme-gvesjod[_ngcontent-%COMP%]   sh-mapbox[_ngcontent-%COMP%]{display:block;height:100%;overflow:hidden;border-radius:inherit}.scheme-gvesjod[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{position:absolute;top:calc(var(--padding) + 10px);right:calc(var(--padding) + 10px);box-shadow:0 0 0 2px #0000001a;width:30px;min-width:initial;height:30px;padding:0;color:inherit;display:flex;justify-content:center;align-items:center;background-color:#fff}.scheme-gvesjod[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   sh-icon[_ngcontent-%COMP%]{width:20px;height:20px}.scheme-gvesjod[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]     span.mat-button-wrapper{line-height:0}.scheme-gvesjod.hide[_ngcontent-%COMP%]{visibility:hidden;opacity:0}.scheme-gvesjod.top-right[_ngcontent-%COMP%]{top:0;right:0}.scheme-gvesjod.top-left[_ngcontent-%COMP%]{top:0;left:0}.scheme-gvesjod.bottom-right[_ngcontent-%COMP%]{right:0;bottom:0}.scheme-gvesjod.bottom-left[_ngcontent-%COMP%]{bottom:0;left:0}  #overlay.mobile wdg-scheme-gvesjod .scheme-gvesjod{box-sizing:border-box;top:0!important;right:initial!important;bottom:initial!important;left:0!important;width:100%!important;height:calc(100% - 76px)!important;margin:0!important}code[_ngcontent-%COMP%]{display:none}"]}),r})();var S=s(4507);let P=(()=>{class r{constructor(n){this.componentFactoryResolver=n}resolveComponent(){return this.componentFactoryResolver.resolveComponentFactory(o)}}return r.\u0275fac=function(n){return new(n||r)(t.LFG(t._Vd))},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[h.ez,u.b,i.ot,a.Q,S.D]}),r})()}}]);