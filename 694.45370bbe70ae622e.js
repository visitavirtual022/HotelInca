"use strict";(self.webpackChunktourmkr_download=self.webpackChunktourmkr_download||[]).push([[694],{7072:(_,c,t)=>{t.d(c,{o:()=>u});var a=t(4537),p=t(4091),h=t(6101),r=t(7343),m=t(7493);class u{constructor(n){this.injector=n,this.elRef=this.injector.get(a.SBq),this.i18n=this.injector.get(h.T),this.fontsService=this.injector.get(p.C),this.panoService=this.injector.get(r.X),this.statsService=this.injector.get(m.G)}_updateFontStyle(n,i){!n||Object.keys(i).filter(e=>["family","align","size","line_height"].includes(e)).forEach(e=>{n[e]||(n[e]=i[e])})}}},7493:(_,c,t)=>{t.d(c,{G:()=>o});var a=t(4537),p=t(8692),h=t(5732),r=t(8066),m=t(5056),u=t(7343);let o=(()=>{class n{constructor(e,s,l,d,v){this.http=e,this.windowRef=s,this.viewerDataService=l,this.panoService=d,this.platformId=v,this.session_id=""}send(e){if((0,p.PM)(this.platformId)||this.viewerDataService.editor||!this.panoService.moderationUrl)return;this.session_id||(this.session_id=(Math.random().toString(36).slice(2)+Date.now().toString(36)).substr(0,16));let s=this._getStats();0!=s.host.indexOf("localhost")&&(null!=e.type&&(s.type=e.type),null!=e.plugin&&(s.plugin=e.plugin),null!=e.details&&(s.details=e.details),this.http.post("https://apiw.gothru.co/tours/stats",s).subscribe())}getWidget(e){let l=[{name:"Berlin Menu",component:"MenuHopenkeComponent"},{name:"Side Menu",component:"MenuKavftigComponent"},{name:"Top Menu",component:"MenuLekprogComponent"},{name:"Real Estate Menu",component:"MenuLoppitteComponent"},{name:"Berlin Map",component:"SchemeHopenkeComponent"},{name:"Floor Map",component:"SchemeKavftigComponent"},{name:"Mapbox",component:"SchemeGvesjodComponent"},{name:"Berlin Hotspot",component:"HotspotHopenkeComponent"},{name:"Hotspot",component:"HotspotKavftigComponent"},{name:"Pano link",component:"HotspotHolmlackComponent"},{name:"Berlin Control",component:"ControlHopenkeComponent"},{name:"Control Bar",component:"ControlKavftigComponent"},{name:"Real Estate Control",component:"ControlLoppitteComponent"},{name:"Carousel",component:"OtherCarouselComponent"},{name:"Language",component:"OtherLanguageComponent"},{name:"Logo",component:"OtherLogoComponent"},{name:"Code",component:"OtherCodeComponent"},{name:"Password",component:"OtherPasswordComponent"},{name:"Pano Label",component:"OtherTitleComponent"}].filter(d=>d.component==e).pop();return l?{name:l.name,key:l.name.toLowerCase().replace(" ","_")}:{name:"",key:""}}_getStats(){let e={ip:null,action:null,returning:null,user_type:null,time:null,m_key:null,user_id:this.panoService.user_id,session_id:this.session_id,browser:this.windowRef.nativeWindow.navigator.userAgent,height:this.windowRef.nativeWindow.innerHeight,language:this.windowRef.nativeWindow.navigator.language,location:this.windowRef.nativeWindow.location.href,moderation_id:this.viewerDataService.active.t_id,pano_id:this.viewerDataService.active.id,referer:document.referrer,site:this.panoService.moderationUrl.substr(2),local_time:Math.floor(Date.now()/1e3),width:this.windowRef.nativeWindow.innerWidth,device:null,host:null,tour_type:null,plugin:null,type:null,details:null};return this.panoService.googleApiKey&&(e.m_key=this.panoService.googleApiKey),e.device=this.windowRef.nativeWindow.innerWidth<600?"mobile":this.windowRef.nativeWindow.innerWidth>=600&&this.windowRef.nativeWindow.innerWidth<1e3?"tablet":"desktop",e.host=e.location.split("/")[2],e.tour_type=0==this.panoService.moderationUrl.indexOf("G")?"google":"hosted",e}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(h.eN),a.LFG(r.X),a.LFG(m.m),a.LFG(u.X),a.LFG(a.Lbi))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},8313:(_,c,t)=>{t.r(c),t.d(c,{OtherCodeModule:()=>u});var a=t(8692),p=t(8041);const h=JSON.parse('{"widget":"OtherCodeComponent","options":[{"key":"code","label":"Head append","type":"htmlmixed","help":"Additional code which will be in head tag","value":""},{"key":"code2","label":"Body append","type":"htmlmixed","help":"Additional code which will be in body tag","value":""}]}');var r=t(4537);let m=(()=>{class o extends p.P{constructor(i,e){super(i),this.doc=e,this.default_options=h}_appendToElmStringHtml(i,e){let s=this.doc.createElement("div");s.innerHTML=e.trim(),Array.from(s.children).forEach(l=>{if(l.setAttribute("data-widget",this.widgetName),"SCRIPT"===l.tagName&&(0,a.NF)(this.panoService.platformId)){let d=document.createElement("script");d.setAttribute("data-widget",this.widgetName);let v=this.doc.createTextNode(l.innerHTML);d.appendChild(v),i.appendChild(d)}else i.appendChild(l)})}initData(){super.initData(),!this.doc.querySelector(`[data-widget="${this.widgetName}"]`)&&(this.options.code.value.trim()&&this._appendToElmStringHtml(this.doc.head,this.options.code.value),this.options.code2.value.trim()&&this._appendToElmStringHtml(this.doc.body,this.options.code2.value))}}return o.\u0275fac=function(i){return new(i||o)(r.Y36(r.zs3),r.Y36(a.K0))},o.\u0275cmp=r.Xpm({type:o,selectors:[["wdg-other-code"]],features:[r.qOj],decls:0,vars:0,template:function(i,e){},encapsulation:2}),o})(),u=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=r.oAB({type:o,bootstrap:[m]}),o.\u0275inj=r.cJS({}),o})()}}]);